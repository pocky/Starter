(function(){if(!jQuery.fn.offset)return;var e,t,n=jQuery("<div/>").css({width:2e3,height:2e3}),r=function(){r=!1;var i=jQuery("<div/>").css({position:"fixed",top:"20px"}).appendTo("#qunit-fixture");n.appendTo("body"),window.scrollTo(200,200),e=document.documentElement.scrollTop||document.body.scrollTop,n.detach(),t=i[0].offsetTop===20,i.remove()};module("offset",{setup:function(){typeof r=="function"&&r(),n.appendTo("body"),window.scrollTo(1,1),n.detach()},teardown:moduleTeardown}),test("empty set",function(){expect(2),strictEqual(jQuery().offset(),undefined,"offset() returns undefined for empty set (#11962)"),strictEqual(jQuery().position(),undefined,"position() returns undefined for empty set (#11962)")}),test("object without getBoundingClientRect",function(){expect(2);var e=jQuery({ownerDocument:document}).offset();equal(e.top,0,"Check top"),equal(e.left,0,"Check left")}),test("disconnected node",function(){expect(2);var e=jQuery(document.createElement("div")).offset();equal(e.top,0,"Check top"),equal(e.left,0,"Check left")}),testIframe("offset/absolute","absolute",function(e,t){expect(4);var n=t.document,r;r=[{id:"#absolute-1",top:1,left:1}],jQuery.each(r,function(){equal(jQuery(this.id,n).offset().top,this.top,"jQuery('"+this.id+"').offset().top"),equal(jQuery(this.id,n).offset().left,this.left,"jQuery('"+this.id+"').offset().left")}),r=[{id:"#absolute-1",top:0,left:0}],jQuery.each(r,function(){equal(jQuery(this.id,n).position().top,this.top,"jQuery('"+this.id+"').position().top"),equal(jQuery(this.id,n).position().left,this.left,"jQuery('"+this.id+"').position().left")})}),testIframe("offset/absolute","absolute",function(e){expect(178);var t,n;t=[{id:"#absolute-1",top:1,left:1},{id:"#absolute-1-1",top:5,left:5},{id:"#absolute-1-1-1",top:9,left:9},{id:"#absolute-2",top:20,left:20}],jQuery.each(t,function(){equal(e(this.id).offset().top,this.top,"jQuery('"+this.id+"').offset().top"),equal(e(this.id).offset().left,this.left,"jQuery('"+this.id+"').offset().left")}),t=[{id:"#absolute-1",top:0,left:0},{id:"#absolute-1-1",top:1,left:1},{id:"#absolute-1-1-1",top:1,left:1},{id:"#absolute-2",top:19,left:19}],jQuery.each(t,function(){equal(e(this.id).position().top,this.top,"jQuery('"+this.id+"').position().top"),equal(e(this.id).position().left,this.left,"jQuery('"+this.id+"').position().left")}),n=e("#positionTest").offset({top:10,left:10}).offset(),equal(n.top,10,"Setting offset on element with position absolute but 'auto' values."),equal(n.left,10,"Setting offset on element with position absolute but 'auto' values."),t=[{id:"#absolute-2",top:30,left:30},{id:"#absolute-2",top:10,left:10},{id:"#absolute-2",top:-1,left:-1},{id:"#absolute-2",top:19,left:19},{id:"#absolute-1-1-1",top:15,left:15},{id:"#absolute-1-1-1",top:5,left:5},{id:"#absolute-1-1-1",top:-1,left:-1},{id:"#absolute-1-1-1",top:9,left:9},{id:"#absolute-1-1",top:10,left:10},{id:"#absolute-1-1",top:0,left:0},{id:"#absolute-1-1",top:-1,left:-1},{id:"#absolute-1-1",top:5,left:5},{id:"#absolute-1",top:2,left:2},{id:"#absolute-1",top:0,left:0},{id:"#absolute-1",top:-1,left:-1},{id:"#absolute-1",top:1,left:1}],jQuery.each(t,function(){e(this.id).offset({top:this.top,left:this.left}),equal(e(this.id).offset().top,this.top,"jQuery('"+this.id+"').offset({ top: "+this.top+" })"),equal(e(this.id).offset().left,this.left,"jQuery('"+this.id+"').offset({ left: "+this.left+" })");var t=this.top,n=this.left;e(this.id).offset(function(e,r){return equal(r.top,t,"Verify incoming top position."),equal(r.left,n,"Verify incoming top position."),{top:t+1,left:n+1}}),equal(e(this.id).offset().top,this.top+1,"jQuery('"+this.id+"').offset({ top: "+(this.top+1)+" })"),equal(e(this.id).offset().left,this.left+1,"jQuery('"+this.id+"').offset({ left: "+(this.left+1)+" })"),e(this.id).offset({left:this.left+2}).offset({top:this.top+2}),equal(e(this.id).offset().top,this.top+2,"Setting one property at a time."),equal(e(this.id).offset().left,this.left+2,"Setting one property at a time."),e(this.id).offset({top:this.top,left:this.left,using:function(t){e(this).css({top:t.top+1,left:t.left+1})}}),equal(e(this.id).offset().top,this.top+1,"jQuery('"+this.id+"').offset({ top: "+(this.top+1)+", using: fn })"),equal(e(this.id).offset().left,this.left+1,"jQuery('"+this.id+"').offset({ left: "+(this.left+1)+", using: fn })")})}),testIframe("offset/relative","relative",function(e){expect(60);var t,n;t=e("#relative-1").offset().top===6,n=[{id:"#relative-1",top:t?6:7,left:7},{id:"#relative-1-1",top:t?13:15,left:15},{id:"#relative-2",top:t?141:142,left:27}],jQuery.each(n,function(){equal(e(this.id).offset().top,this.top,"jQuery('"+this.id+"').offset().top"),equal(e(this.id).offset().left,this.left,"jQuery('"+this.id+"').offset().left")}),n=[{id:"#relative-1",top:t?5:6,left:6},{id:"#relative-1-1",top:t?4:5,left:5},{id:"#relative-2",top:t?140:141,left:26}],jQuery.each(n,function(){equal(e(this.id).position().top,this.top,"jQuery('"+this.id+"').position().top"),equal(e(this.id).position().left,this.left,"jQuery('"+this.id+"').position().left")}),n=[{id:"#relative-2",top:200,left:50},{id:"#relative-2",top:100,left:10},{id:"#relative-2",top:-5,left:-5},{id:"#relative-2",top:142,left:27},{id:"#relative-1-1",top:100,left:100},{id:"#relative-1-1",top:5,left:5},{id:"#relative-1-1",top:-1,left:-1},{id:"#relative-1-1",top:15,left:15},{id:"#relative-1",top:100,left:100},{id:"#relative-1",top:0,left:0},{id:"#relative-1",top:-1,left:-1},{id:"#relative-1",top:7,left:7}],jQuery.each(n,function(){e(this.id).offset({top:this.top,left:this.left}),equal(e(this.id).offset().top,this.top,"jQuery('"+this.id+"').offset({ top: "+this.top+" })"),equal(e(this.id).offset().left,this.left,"jQuery('"+this.id+"').offset({ left: "+this.left+" })"),e(this.id).offset({top:this.top,left:this.left,using:function(t){e(this).css({top:t.top+1,left:t.left+1})}}),equal(e(this.id).offset().top,this.top+1,"jQuery('"+this.id+"').offset({ top: "+(this.top+1)+", using: fn })"),equal(e(this.id).offset().left,this.left+1,"jQuery('"+this.id+"').offset({ left: "+(this.left+1)+", using: fn })")})}),testIframe("offset/static","static",function(e){expect(80);var t,n;t=e("#static-1").offset().top===6,n=[{id:"#static-1",top:t?6:7,left:7},{id:"#static-1-1",top:t?13:15,left:15},{id:"#static-1-1-1",top:t?20:23,left:23},{id:"#static-2",top:t?121:122,left:7}],jQuery.each(n,function(){equal(e(this.id).offset().top,this.top,"jQuery('"+this.id+"').offset().top"),equal(e(this.id).offset().left,this.left,"jQuery('"+this.id+"').offset().left")}),n=[{id:"#static-1",top:t?5:6,left:6},{id:"#static-1-1",top:t?12:14,left:14},{id:"#static-1-1-1",top:t?19:22,left:22},{id:"#static-2",top:t?120:121,left:6}],jQuery.each(n,function(){equal(e(this.id).position().top,this.top,"jQuery('"+this.top+"').position().top"),equal(e(this.id).position().left,this.left,"jQuery('"+this.left+"').position().left")}),n=[{id:"#static-2",top:200,left:200},{id:"#static-2",top:100,left:100},{id:"#static-2",top:-2,left:-2},{id:"#static-2",top:121,left:6},{id:"#static-1-1-1",top:50,left:50},{id:"#static-1-1-1",top:10,left:10},{id:"#static-1-1-1",top:-1,left:-1},{id:"#static-1-1-1",top:22,left:22},{id:"#static-1-1",top:25,left:25},{id:"#static-1-1",top:10,left:10},{id:"#static-1-1",top:-3,left:-3},{id:"#static-1-1",top:14,left:14},{id:"#static-1",top:30,left:30},{id:"#static-1",top:2,left:2},{id:"#static-1",top:-2,left:-2},{id:"#static-1",top:7,left:7}],jQuery.each(n,function(){e(this.id).offset({top:this.top,left:this.left}),equal(e(this.id).offset().top,this.top,"jQuery('"+this.id+"').offset({ top: "+this.top+" })"),equal(e(this.id).offset().left,this.left,"jQuery('"+this.id+"').offset({ left: "+this.left+" })"),e(this.id).offset({top:this.top,left:this.left,using:function(t){e(this).css({top:t.top+1,left:t.left+1})}}),equal(e(this.id).offset().top,this.top+1,"jQuery('"+this.id+"').offset({ top: "+(this.top+1)+", using: fn })"),equal(e(this.id).offset().left,this.left+1,"jQuery('"+this.id+"').offset({ left: "+(this.left+1)+", using: fn })")})}),testIframe("offset/fixed","fixed",function(e){expect(34);var t,n,r;t=e("#fixed-1").position().top===2,n=[{id:"#fixed-1",offsetTop:1001,offsetLeft:1001,positionTop:t?2:0,positionLeft:t?2:0},{id:"#fixed-2",offsetTop:1021,offsetLeft:1021,positionTop:t?22:20,positionLeft:t?22:20}],jQuery.each(n,function(){window.supportsScroll?window.supportsFixedPosition?(equal(e(this.id).offset().top,this.offsetTop,"jQuery('"+this.id+"').offset().top"),equal(e(this.id).position().top,this.positionTop,"jQuery('"+this.id+"').position().top"),equal(e(this.id).offset().left,this.offsetLeft,"jQuery('"+this.id+"').offset().left"),equal(e(this.id).position().left,this.positionLeft,"jQuery('"+this.id+"').position().left")):(ok(!0,"Fixed position is not supported"),ok(!0,"Fixed position is not supported"),ok(!0,"Fixed position is not supported"),ok(!0,"Fixed position is not supported")):(ok(!0,"Browser doesn't support scroll position."),ok(!0,"Browser doesn't support scroll position."),ok(!0,"Browser doesn't support scroll position."),ok(!0,"Browser doesn't support scroll position."))}),n=[{id:"#fixed-1",top:100,left:100},{id:"#fixed-1",top:0,left:0},{id:"#fixed-1",top:-4,left:-4},{id:"#fixed-2",top:200,left:200},{id:"#fixed-2",top:0,left:0},{id:"#fixed-2",top:-5,left:-5}],jQuery.each(n,function(){window.supportsFixedPosition?(e(this.id).offset({top:this.top,left:this.left}),equal(e(this.id).offset().top,this.top,"jQuery('"+this.id+"').offset({ top: "+this.top+" })"),equal(e(this.id).offset().left,this.left,"jQuery('"+this.id+"').offset({ left: "+this.left+" })"),e(this.id).offset({top:this.top,left:this.left,using:function(t){e(this).css({top:t.top+1,left:t.left+1})}}),equal(e(this.id).offset().top,this.top+1,"jQuery('"+this.id+"').offset({ top: "+(this.top+1)+", using: fn })"),equal(e(this.id).offset().left,this.left+1,"jQuery('"+this.id+"').offset({ left: "+(this.left+1)+", using: fn })")):(ok(!0,"Fixed position is not supported"),ok(!0,"Fixed position is not supported"),ok(!0,"Fixed position is not supported"),ok(!0,"Fixed position is not supported"))}),r=e("#fixed-no-top-left"),window.supportsFixedPosition?(equal(r.offset().top,1007,"Check offset top for fixed element with no top set"),equal(r.offset().left,1007,"Check offset left for fixed element with no left set")):(ok(!0,"Fixed position is not supported"),ok(!0,"Fixed position is not supported"))}),testIframe("offset/table","table",function(e){expect(4),equal(e("#table-1").offset().top,6,"jQuery('#table-1').offset().top"),equal(e("#table-1").offset().left,6,"jQuery('#table-1').offset().left"),equal(e("#th-1").offset().top,10,"jQuery('#th-1').offset().top"),equal(e("#th-1").offset().left,10,"jQuery('#th-1').offset().left")}),testIframe("offset/scroll","scroll",function(e,t){expect(24);var n=/msie [678]/i.test(navigator.userAgent);n?ok(!0,"TestSwarm's iframe has hosed this test in oldIE, we surrender"):equal(e("#scroll-1").offset().top,7,"jQuery('#scroll-1').offset().top"),equal(e("#scroll-1").offset().left,7,"jQuery('#scroll-1').offset().left"),n?ok(!0,"TestSwarm's iframe has hosed this test in oldIE, we surrender"):equal(e("#scroll-1-1").offset().top,11,"jQuery('#scroll-1-1').offset().top"),equal(e("#scroll-1-1").offset().left,11,"jQuery('#scroll-1-1').offset().left"),equal(e("#scroll-1").scrollTop(),5,"jQuery('#scroll-1').scrollTop()"),equal(e("#scroll-1").scrollLeft(),5,"jQuery('#scroll-1').scrollLeft()"),equal(e("#scroll-1-1").scrollTop(),0,"jQuery('#scroll-1-1').scrollTop()"),equal(e("#scroll-1-1").scrollLeft(),0,"jQuery('#scroll-1-1').scrollLeft()"),equal(e("#scroll-1").scrollTop(undefined).scrollTop(),5,".scrollTop(undefined) is chainable (#5571)"),equal(e("#scroll-1").scrollLeft(undefined).scrollLeft(),5,".scrollLeft(undefined) is chainable (#5571)"),t.name="test",window.supportsScroll?(equal(e(t).scrollTop(),1e3,"jQuery(window).scrollTop()"),equal(e(t).scrollLeft(),1e3,"jQuery(window).scrollLeft()"),equal(e(t.document).scrollTop(),1e3,"jQuery(document).scrollTop()"),equal(e(t.document).scrollLeft(),1e3,"jQuery(document).scrollLeft()")):(ok(!0,"Browser doesn't support scroll position."),ok(!0,"Browser doesn't support scroll position."),ok(!0,"Browser doesn't support scroll position."),ok(!0,"Browser doesn't support scroll position.")),window.scrollTo(0,0),equal(e(window).scrollTop(),0,"jQuery(window).scrollTop() other window"),equal(e(window).scrollLeft(),0,"jQuery(window).scrollLeft() other window"),equal(e(document).scrollTop(),0,"jQuery(window).scrollTop() other document"),equal(e(document).scrollLeft(),0,"jQuery(window).scrollLeft() other document"),notEqual(e().scrollTop(100),null,"jQuery().scrollTop(100) testing setter on empty jquery object"),notEqual(e().scrollLeft(100),null,"jQuery().scrollLeft(100) testing setter on empty jquery object"),notEqual(e().scrollTop(null),null,"jQuery().scrollTop(null) testing setter on empty jquery object"),notEqual(e().scrollLeft(null),null,"jQuery().scrollLeft(null) testing setter on empty jquery object"),strictEqual(e().scrollTop(),null,"jQuery().scrollTop(100) testing setter on empty jquery object"),strictEqual(e().scrollLeft(),null,"jQuery().scrollLeft(100) testing setter on empty jquery object")}),testIframe("offset/body","body",function(e){expect(4),equal(e("body").offset().top,1,"jQuery('#body').offset().top"),equal(e("body").offset().left,1,"jQuery('#body').offset().left"),equal(e("#firstElement").position().left,5,"$('#firstElement').position().left"),equal(e("#firstElement").position().top,5,"$('#firstElement').position().top")}),test("chaining",function(){expect(3);var e={top:1,left:1};equal(jQuery("#absolute-1").offset(e).selector,"#absolute-1","offset(coords) returns jQuery object"),equal(jQuery("#non-existent").offset(e).selector,"#non-existent","offset(coords) with empty jQuery set returns jQuery object"),equal(jQuery("#absolute-1").offset(undefined).selector,"#absolute-1","offset(undefined) returns jQuery object (#5571)")}),test("offsetParent",function(){expect(13);var e,t,n,r;e=jQuery("body").offsetParent(),equal(e.length,1,"Only one offsetParent found."),equal(e[0],document.documentElement,"The html element is the offsetParent of the body."),t=jQuery("#qunit").offsetParent(),equal(t.length,1,"Only one offsetParent found."),equal(t[0],document.documentElement,"The html element is the offsetParent of #qunit."),n=jQuery("#nothiddendivchild").offsetParent(),equal(n.length,1,"Only one offsetParent found."),equal(n[0],document.getElementById("qunit-fixture"),"The #qunit-fixture is the offsetParent of #nothiddendivchild."),jQuery("#nothiddendiv").css("position","relative"),n=jQuery("#nothiddendivchild").offsetParent(),equal(n.length,1,"Only one offsetParent found."),equal(n[0],jQuery("#nothiddendiv")[0],"The div is the offsetParent."),n=jQuery("body, #nothiddendivchild").offsetParent(),equal(n.length,2,"Two offsetParent found."),equal(n[0],document.documentElement,"The html element is the offsetParent of the body."),equal(n[1],jQuery("#nothiddendiv")[0],"The div is the offsetParent."),r=jQuery("#imgmap area").offsetParent(),equal(r[0],document.documentElement,"The html element is the offsetParent of the body."),n=jQuery("<div>").css({position:"absolute"}).appendTo("body"),equal(n.offsetParent()[0],document.documentElement,"Absolutely positioned div returns html as offset parent, see #12139"),n.remove()}),test("fractions (see #7730 and #7885)",function(){expect(2),jQuery("body").append("<div id='fractions'/>");var e,t={top:1e3,left:1e3},n=jQuery("#fractions");n.css({position:"absolute",left:"1000.7432222px",top:"1000.532325px",width:100,height:100}),n.offset(t),e=n.offset(),equal(e.top,t.top,"Check top"),equal(e.left,t.left,"Check left"),n.remove()})})();