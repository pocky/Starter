(function(){if(!jQuery.fx)return;var e=jQuery.fx.off;module("effects",{teardown:function(){return jQuery.fx.off=e,moduleTeardown.apply(this,arguments)}}),test("sanity check",function(){expect(1),ok(jQuery("#dl:visible, #qunit-fixture:visible, #foo:visible").length===3,"QUnit state is correct for testing effects")}),test("show() basic",2,function(){var e,t=jQuery("div.hidden");t.hide().show(),equal(t.css("display"),"block","Make sure a pre-hidden div is visible."),e=jQuery("<div>").hide().appendTo("#qunit-fixture").show(),equal(e.css("display"),"block","Make sure pre-hidden divs show"),e.remove(),QUnit.expectJqData(t,"olddisplay")}),test("show()",27,function(){var e,t,n,r,i=jQuery("div.hidden");equal(jQuery.css(i[0],"display"),"none","hiddendiv is display: none"),i.css("display","block"),equal(jQuery.css(i[0],"display"),"block","hiddendiv is display: block"),i.show(),equal(jQuery.css(i[0],"display"),"block","hiddendiv is display: block"),i.css("display",""),e=jQuery("#fx-queue div").slice(0,4),e.show().each(function(){notEqual(this.style.display,"none","don't change any <div> with display block")}),t={"null speed":null,"undefined speed":undefined,"false speed":!1},jQuery.each(t,function(t,n){var r=!0;e.hide().show(n).each(function(){this.style.display==="none"&&(r=!1)}),ok(r,"Show with "+t)}),jQuery.each(t,function(t,n){var r=!0;e.hide().show(n,function(){r=!1}),ok(r,"Show with "+t+" does not call animate callback")}),QUnit.expectJqData(e,"olddisplay"),jQuery("#qunit-fixture").append("<div id='show-tests'><div><p><a href='#'></a></p><code></code><pre></pre><span></span></div><table><thead><tr><th></th></tr></thead><tbody><tr><td></td></tr></tbody></table><ul><li></li></ul></div><table id='test-table'></table>"),n=jQuery("#test-table").show().css("display")!=="table",jQuery("#test-table").remove(),r={div:"block",p:"block",a:"inline",code:"inline",pre:"block",span:"inline",table:n?"block":"table",thead:n?"block":"table-header-group",tbody:n?"block":"table-row-group",tr:n?"block":"table-row",th:n?"block":"table-cell",td:n?"block":"table-cell",ul:"block",li:n?"block":"list-item"},jQuery.each(r,function(e,t){var n=jQuery(e,"#show-tests").show();equal(n.css("display"),t,"Show using correct display type for "+e)}),jQuery("#show-tests").remove(),jQuery("<div>test</div> text <span>test</span>").show().remove(),jQuery("<div>test</div> text <span>test</span>").hide().remove()}),test("show(Number) - other displays",function(){expect(15),QUnit.reset(),stop(),jQuery("#qunit-fixture").append("<div id='show-tests'><div><p><a href='#'></a></p><code></code><pre></pre><span></span></div><table><thead><tr><th></th></tr></thead><tbody><tr><td></td></tr></tbody></table><ul><li></li></ul></div><table id='test-table'></table>");var e,t=jQuery("#test-table").show().css("display")!=="table",n=0;jQuery("#test-table").remove(),e={div:"block",p:"block",a:"inline",code:"inline",pre:"block",span:"inline",table:t?"block":"table",thead:t?"block":"table-header-group",tbody:t?"block":"table-row-group",tr:t?"block":"table-row",th:t?"block":"table-cell",td:t?"block":"table-cell",ul:"block",li:t?"block":"list-item"},jQuery.each(e,function(e,t){var r=jQuery(e,"#show-tests").show(1,function(){equal(r.css("display"),t,"Show using correct display type for "+e),++n===15&&start()})}),jQuery("#show-tests").remove()}),test("Persist correct display value",function(){expect(3),QUnit.reset(),stop(),jQuery("#qunit-fixture").append("<div id='show-tests'><span style='position:absolute;'>foo</span></div>");var e=jQuery("#show-tests span"),t=e.css("display"),n="";e.show(),n=e.css("display"),e.hide(),e.fadeIn(100,function(){equal(e.css("display"),n,"Expecting display: "+n),e.fadeOut(100,function(){equal(e.css("display"),t,"Expecting display: "+t),e.fadeIn(100,function(){equal(e.css("display"),n,"Expecting display: "+n),start()})})}),QUnit.expectJqData(e,"olddisplay")}),test("animate(Hash, Object, Function)",function(){expect(1),stop();var e={opacity:"show"},t=jQuery.extend({},e);jQuery("#foo").animate(e,0,function(){equal(e.opacity,t.opacity,"Check if animate changed the hash parameter"),start()})}),test("animate relative values",function(){stop();var e=40,t=["%","px","em"],n=["px","em"],r=jQuery("<div></div>").css({position:"absolute",height:"50em",width:"50em"}),i=t.length*n.length;expect(2*i),jQuery.each(t,function(t,s){jQuery.each(n,function(t,n){var o=e+s,u={height:"+=2"+n,width:"-=2"+n},a=jQuery("<div></div>").appendTo(r.clone().appendTo("#qunit-fixture")).css({position:"absolute",height:o,width:e+n}),f=a[0].offsetHeight/e,l=a[0].offsetWidth/e;a.css("width",o).animate(u,100,function(){equal(this.offsetHeight,e*f+2*l,s+"+="+n),equal(this.offsetWidth,e*f-2*l,s+"-="+n),--i===0&&start()})})})}),test("animate negative height",function(){expect(1),stop(),jQuery("#foo").animate({height:-100},100,function(){equal(this.offsetHeight,0,"Verify height."),start()})}),test("animate negative margin",function(){expect(1),stop(),jQuery("#foo").animate({marginTop:-100},100,function(){equal(jQuery(this).css("marginTop"),"-100px","Verify margin."),start()})}),test("animate negative margin with px",function(){expect(1),stop(),jQuery("#foo").animate({marginTop:"-100px"},100,function(){equal(jQuery(this).css("marginTop"),"-100px","Verify margin."),start()})}),test("animate negative padding",function(){expect(1),stop(),jQuery("#foo").animate({paddingBottom:-100},100,function(){equal(jQuery(this).css("paddingBottom"),"0px","Verify paddingBottom."),start()})}),test("animate block as inline width/height",function(){expect(3),stop(),jQuery("#foo").css({display:"inline",width:"",height:""}).animate({width:42,height:42},100,function(){equal(jQuery(this).css("display"),"inline-block","inline-block was set on non-floated inline element when animating width/height"),equal(this.offsetWidth,42,"width was animated"),equal(this.offsetHeight,42,"height was animated"),start()})}),test("animate native inline width/height",function(){expect(3),stop(),jQuery("#foo").css({display:"",width:"",height:""}).append("<span>text</span>").children("span").animate({width:42,height:42},100,function(){equal(jQuery(this).css("display"),"inline-block","inline-block was set on non-floated inline element when animating width/height"),equal(this.offsetWidth,42,"width was animated"),equal(this.offsetHeight,42,"height was animated"),start()})}),test("animate block width/height",function(){expect(3),stop(),jQuery("<div>").appendTo("#qunit-fixture").css({display:"block",width:20,height:20,paddingLeft:60}).animate({width:42,height:42},{duration:100,step:function(){jQuery(this).width()>42&&ok(!1,"width was incorrectly augmented during animation")},complete:function(){equal(jQuery(this).css("display"),"block","inline-block was not set on block element when animating width/height"),equal(jQuery(this).width(),42,"width was animated"),equal(jQuery(this).height(),42,"height was animated"),start()}})}),test("animate table width/height",function(){expect(1),stop();var e=jQuery("#table").css("display")!=="table"?"block":"table";jQuery("#table").animate({width:42,height:42},100,function(){equal(jQuery(this).css("display"),e,"display mode is correct"),start()})}),test("animate table-row width/height",function(){expect(3),stop();var e,t=jQuery("#table").attr({cellspacing:0,cellpadding:0,border:0}).html("<tr style='height:42px;'><td style='padding:0;'><div style='width:20px;height:20px;'></div></td></tr>").find("tr");e=t.css("display")!=="table-row"?"block":"table-row",t.animate({width:10,height:10},100,function(){equal(jQuery(this).css("display"),e,"display mode is correct"),equal(this.offsetWidth,20,"width animated to shrink wrap point"),equal(this.offsetHeight,20,"height animated to shrink wrap point"),start()})}),test("animate table-cell width/height",function(){expect(3),stop();var e,t=jQuery("#table").attr({cellspacing:0,cellpadding:0,border:0}).html("<tr><td style='width:42px;height:42px;padding:0;'><div style='width:20px;height:20px;'></div></td></tr>").find("td");e=t.css("display")!=="table-cell"?"block":"table-cell",t.animate({width:10,height:10},100,function(){equal(jQuery(this).css("display"),e,"display mode is correct"),equal(this.offsetWidth,20,"width animated to shrink wrap point"),equal(this.offsetHeight,20,"height animated to shrink wrap point"),start()})}),test("animate percentage(%) on width/height",function(){expect(2);var e=jQuery("<div style='position:absolute;top:-999px;left:-999px;width:60px;height:60px;'><div style='width:50%;height:50%;'></div></div>").appendTo("#qunit-fixture").children("div");stop(),e.animate({width:"25%",height:"25%"},13,function(){var e=jQuery(this);equal(e.css("width"),"15px","Width was animated to 15px rather than 25px"),equal(e.css("height"),"15px","Height was animated to 15px rather than 25px"),start()})}),test("animate resets overflow-x and overflow-y when finished",function(){expect(2),stop(),jQuery("#foo").css({display:"block",width:20,height:20,overflowX:"visible",overflowY:"auto"}).animate({width:42,height:42},100,function(){equal(this.style.overflowX,"visible","overflow-x is visible"),equal(this.style.overflowY,"auto","overflow-y is auto"),start()})}),asyncTest("animate option { queue: false }",function(){expect(2);var e=jQuery("#foo");e.animate({fontSize:"2em"},{queue:!1,duration:10,complete:function(){ok(!0,"Animation Completed"),start()}}),equal(e.queue().length,0,"Queue is empty")}),asyncTest("animate option { queue: true }",function(){expect(2);var e=jQuery("#foo");e.animate({fontSize:"2em"},{queue:!0,duration:10,complete:function(){ok(!0,"Animation Completed"),start()}}),notEqual(e.queue().length,0,"Default queue is not empty")}),asyncTest("animate option { queue: 'name' }",function(){expect(5);var e=jQuery("#foo"),t=parseFloat(e.css("width")),n=[];e.animate({width:t+100},{queue:"name",duration:1,complete:function(){n.push(2),equal(parseFloat(e.css("width")),t+100,"Animation ended"),equal(e.queue("name").length,1,"Queue length of 'name' queue")}}).queue("name",function(){deepEqual(n,[1,2],"Callbacks in expected order"),start()}),setTimeout(function(){n.push(1),equal(parseFloat(e.css("width")),t,"Animation does not start on its own."),equal(e.queue("name").length,2,"Queue length of 'name' queue"),e.dequeue("name")},100)}),test("animate with no properties",function(){expect(2);var e,t=jQuery("div"),n=0;t.animate({},function(){n++}),equal(t.length,n,"Make sure that callback is called for each element in the set."),stop(),e=jQuery("#foo"),e.animate({}),e.animate({top:10},100,function(){ok(!0,"Animation was properly dequeued."),start()})}),test("animate duration 0",function(){expect(11),stop();var e,t=jQuery([{a:0},{a:0}]),n=0;equal(jQuery.timers.length,0,"Make sure no animation was running from another test"),t.eq(0).animate({a:1},0,function(){ok(!0,"Animate a simple property."),n++}),equal(jQuery.timers.length,0,"Make sure synchronic animations are not left on jQuery.timers"),equal(n,1,"One synchronic animations"),t.animate({a:2},0,function(){ok(!0,"Animate a second simple property."),n++}),equal(n,3,"Multiple synchronic animations"),t.eq(0).animate({a:3},0,function(){ok(!0,"Animate a third simple property."),n++}),t.eq(1).animate({a:3},200,function(){n++,equal(n,5,"One synchronic and one asynchronic"),start()}),e=jQuery("<div />"),e.show(0,function(){ok(!0,"Show callback with no duration")}),e.hide(0,function(){ok(!0,"Hide callback with no duration")}),e.remove()}),test("animate hyphenated properties",function(){expect(1),stop(),jQuery("#foo").css("font-size",10).animate({"font-size":20},200,function(){equal(this.style.fontSize,"20px","The font-size property was animated."),start()})}),test("animate non-element",function(){expect(1),stop();var e={test:0};jQuery(e).animate({test:200},200,function(){equal(e.test,200,"The custom property should be modified."),start()})}),test("stop()",function(){expect(4),stop();var e,t,n=jQuery("#foo"),r=2,i=0;n.hide().css("width",200).animate({width:"show"},1500),setTimeout(function(){var e=n.css("width");notEqual(parseFloat(e),i,"An animation occurred "+e+" "+i+"px"),n.stop(),e=n.css("width"),notEqual(parseFloat(e),i,"Stop didn't reset the animation "+e+" "+i+"px"),setTimeout(function(){n.removeData(),n.removeData(undefined,!0),equal(e,n.css("width"),"The animation didn't continue"),--r===0&&start()},100)},100),e=jQuery("#fadein"),t=jQuery("#show"),e.fadeTo(100,0,function(){e.stop()}),setTimeout(function(){t.fadeTo(100,0,function(){equal(t.css("opacity"),"0","Stop does not interfere with animations on other elements (#6641)"),e.add(t).css("opacity",""),--r===0&&start()})},50)}),test("stop() - several in queue",function(){expect(5);var e,t,n=jQuery("#foo");n.hide().css("width",800),n.animate({width:"show"},400,"linear"),n.animate({width:"hide"}),n.animate({width:"show"}),t=jQuery.now();while(t===jQuery.now());jQuery.fx.tick(),equal(n.queue().length,3,"3 in the queue"),e=n.css("width"),notEqual(parseFloat(e),1,"An animation occurred "+e),n.stop(),equal(n.queue().length,2,"2 in the queue"),e=n.css("width"),notEqual(parseFloat(e),1,"Stop didn't reset the animation "+e),n.stop(!0),equal(n.queue().length,0,"0 in the queue")}),test("stop(clearQueue)",function(){expect(4),stop();var e=jQuery("#foo"),t=0;e.hide().css("width",200).css("width"),e.animate({width:"show"},1e3),e.animate({width:"hide"},1e3),e.animate({width:"show"},1e3),setTimeout(function(){var n=e.css("width");ok(parseFloat(n)!==t,"An animation occurred "+n+" "+t+"px"),e.stop(!0),n=e.css("width"),ok(parseFloat(n)!==t,"Stop didn't reset the animation "+n+" "+t+"px"),equal(e.queue().length,0,"The animation queue was cleared"),setTimeout(function(){equal(n,e.css("width"),"The animation didn't continue"),start()},100)},100)}),test("stop(clearQueue, gotoEnd)",function(){expect(1),stop();var e=jQuery("#foo"),t=0;e.hide().css("width",200).css("width"),e.animate({width:"show"},1e3),e.animate({width:"hide"},1e3),e.animate({width:"show"},1e3),e.animate({width:"hide"},1e3),setTimeout(function(){var n=e.css("width");ok(parseFloat(n)!==t,"An animation occurred "+n+" "+t+"px"),e.stop(!1,!0),n=e.css("width"),setTimeout(function(){e.stop(!0),start()},100)},100)}),asyncTest("stop( queue, ..., ... ) - Stop single queues",function(){expect(3);var e,t=jQuery("#foo").css({width:200,height:200});t.animate({width:400},{duration:500,complete:function(){equal(parseFloat(t.css("width")),400,"Animation completed for standard queue"),equal(parseFloat(t.css("height")),e,"Height was not changed after the second stop"),start()}}),t.animate({height:400},{duration:1e3,queue:"height"}).dequeue("height").stop("height",!1,!0),equal(parseFloat(t.css("height")),400,"Height was stopped with gotoEnd"),t.animate({height:200},{duration:1e3,queue:"height"}).dequeue("height").stop("height",!1,!1),e=parseFloat(t.css("height"))}),test("toggle()",function(){expect(6);var e=jQuery("#foo");ok(e.is(":visible"),"is visible"),e.toggle(),ok(e.is(":hidden"),"is hidden"),e.toggle(),ok(e.is(":visible"),"is visible again"),e.toggle(!0),ok(e.is(":visible"),"is visible"),e.toggle(!1),ok(e.is(":hidden"),"is hidden"),e.toggle(!0),ok(e.is(":visible"),"is visible again")}),test("jQuery.fx.prototype.cur() - <1.8 Back Compat",7,function(){var e=jQuery("<div></div>").appendTo("#qunit-fixture").css({color:"#ABC",border:"5px solid black",left:"auto",marginBottom:"-11000px"})[0];equal((new jQuery.fx(e,{},"color")).cur(),jQuery.css(e,"color"),"Return the same value as jQuery.css for complex properties (bug #7912)"),strictEqual((new jQuery.fx(e,{},"borderLeftWidth")).cur(),5,"Return simple values parsed as Float"),jQuery.cssHooks.backgroundPosition={get:function(){return ok(!0,"hook used"),""}},strictEqual((new jQuery.fx(e,{},"backgroundPosition")).cur(),0,"Return 0 when jQuery.css returns an empty string"),delete jQuery.cssHooks.backgroundPosition,strictEqual((new jQuery.fx(e,{},"left")).cur(),0,"Return 0 when jQuery.css returns 'auto'"),equal((new jQuery.fx(e,{},"marginBottom")).cur(),-11e3,"support negative values < -10000 (bug #7193)"),jQuery(e).remove()}),test("Overflow and Display",function(){expect(4),stop();var e=jQuery.makeTest("Overflow and Display").addClass("overflow inline"),t=jQuery.makeTest("Overflow and Display (inline style)").css({overflow:"visible",display:"inline"}),n=2,r=function(){equal(jQuery.css(this,"overflow"),"visible","Overflow should be 'visible'"),equal(jQuery.css(this,"display"),"inline","Display should be 'inline'"),--n===0&&start()};e.add(t).addClass("widewidth").text("Some sample text.").before("text before").after("text after").animate({opacity:.5},"slow",r)}),jQuery.each({"CSS Auto":function(e,t){return jQuery(e).addClass("auto"+t).text("This is a long string of text."),""},"JS Auto":function(e,t){return jQuery(e).css(t,"").text("This is a long string of text."),""},"CSS 100":function(e,t){return jQuery(e).addClass("large"+t),""},"JS 100":function(e,t){return jQuery(e).css(t,t==="opacity"?1:"100px"),t==="opacity"?1:100},"CSS 50":function(e,t){return jQuery(e).addClass("med"+t),""},"JS 50":function(e,t){return jQuery(e).css(t,t==="opacity"?.5:"50px"),t==="opacity"?.5:50},"CSS 0":function(e,t){return jQuery(e).addClass("no"+t),""},"JS 0":function(e,t){return jQuery(e).css(t,t==="opacity"?0:"0px"),0}},function(e,t){jQuery.each({show:function(e,t){return jQuery(e).hide().addClass("wide"+t),"show"},hide:function(e,t){return jQuery(e).addClass("wide"+t),"hide"},100:function(e,t){return jQuery(e).addClass("wide"+t),t==="opacity"?1:100},50:function(e,t){return t==="opacity"?.5:50},0:function(e){return jQuery(e).addClass("noback"),0}},function(n,r){test(e+" to "+n,function(){var i,s,o=jQuery.makeTest(e+" to "+n),u=r(o,"width"),a=t(o,"width"),l=r(o,"height"),c=t(o,"height"),h=r(o,"opacity"),p=t(o,"opacity");p===""&&(p=1),i=0,l==="show"&&i++,u==="show"&&i++,(u==="hide"||u==="show")&&i++,(l==="hide"||l==="show")&&i++,(h==="hide"||h==="show")&&i++,u==="hide"&&i++,h.constructor===Number&&(i+=2),u.constructor===Number&&(i+=2),l.constructor===Number&&(i+=2),expect(i),stop(),s={width:u,height:l,opacity:h},o.animate(s,50),jQuery.when(o).done(function(n){var r,i,s,o;n=n[0],u==="show"&&equal(n.style.display,"block","Showing, display should block: "+n.style.display),(u==="hide"||u==="show")&&ok(a===""?n.style.width===a:n.style.width.indexOf(a)===0,"Width must be reset to "+a+": "+n.style.width),(l==="hide"||l==="show")&&ok(c===""?n.style.height===c:n.style.height.indexOf(c)===0,"Height must be reset to "+c+": "+n.style.height),r=jQuery.style(n,"opacity"),p!==jQuery.css(n,"opacity")&&(p=t(n,"opacity")),p===""&&(p=1),r===""&&(r=1),(h==="hide"||h==="show")&&equal(r,p,"Opacity must be reset to "+p+": "+r),u==="hide"&&equal(n.style.display,"none","Hiding, display should be none: "+n.style.display),h.constructor===Number&&(equal(r,h,"Final opacity should be "+h+": "+r),ok(jQuery.css(n,"opacity")!==""||r===h,"Opacity should be explicitly set to "+h+", is instead: "+r)),u.constructor===Number&&(equal(n.style.width,u+"px","Final width should be "+u+": "+n.style.width),i=jQuery.css(n,"width"),ok(n.style.width!==""||i===u,"Width should be explicitly set to "+u+", is instead: "+i)),l.constructor===Number&&(equal(n.style.height,l+"px","Final height should be "+l+": "+n.style.height),s=jQuery.css(n,"height"),ok(n.style.height!==""||s===l,"Height should be explicitly set to "+l+", is instead: "+s)),l==="show"&&(o=jQuery.css(n,"height"),jQuery(n).append("<br/>Some more text<br/>and some more..."),/Auto/.test(e)?notEqual(jQuery.css(n,"height"),o,"Make sure height is auto."):equal(jQuery.css(n,"height"),o,"Make sure height is not auto.")),jQuery(n).remove(),start()})})})}),asyncTest("Effects chaining",function(){var e=16,t=["opacity","height","width","display","overflow"],n=function(e,t){var n=jQuery(t);return n.data(i(n[0])).data("name",e)},r=function(){var t=jQuery.data(this),n=t.name;delete t.name,deepEqual(i(this),t,n),jQuery.removeData(this),--e===0&&start()},i=function(e){var n={};return jQuery.each(t,function(t,r){n[r]=r==="overflow"&&e.style[r]||jQuery.css(e,r)}),n};expect(e),n(".fadeOut().fadeIn()","#fadein div").fadeOut("fast").fadeIn("fast",r),n(".fadeIn().fadeOut()","#fadeout div").fadeIn("fast").fadeOut("fast",r),n(".hide().show()","#show div").hide("fast").show("fast",r),n(".show().hide()","#hide div").show("fast").hide("fast",r),n(".show().hide(easing)","#easehide div").show("fast").hide("fast","linear",r),n(".toggle().toggle() - in","#togglein div").toggle("fast").toggle("fast",r),n(".toggle().toggle() - out","#toggleout div").toggle("fast").toggle("fast",r),n(".toggle().toggle(easing) - out","#easetoggleout div").toggle("fast").toggle("fast","linear",r),n(".slideDown().slideUp()","#slidedown div").slideDown("fast").slideUp("fast",r),n(".slideUp().slideDown()","#slideup div").slideUp("fast").slideDown("fast",r),n(".slideUp().slideDown(easing)","#easeslideup div").slideUp("fast").slideDown("fast","linear",r),n(".slideToggle().slideToggle() - in","#slidetogglein div").slideToggle("fast").slideToggle("fast",r),n(".slideToggle().slideToggle() - out","#slidetoggleout div").slideToggle("fast").slideToggle("fast",r),n(".fadeToggle().fadeToggle() - in","#fadetogglein div").fadeToggle("fast").fadeToggle("fast",r),n(".fadeToggle().fadeToggle() - out","#fadetoggleout div").fadeToggle("fast").fadeToggle("fast",r),n(".fadeTo(0.5).fadeTo(1.0, easing)","#fadeto div").fadeTo("fast",.5).fadeTo("fast",1,"linear",r)}),jQuery.makeTest=function(e){var t=jQuery("<div></div>").attr("id","test"+jQuery.makeTest.id++).addClass("box");return jQuery("<h4></h4>").text(e).appendTo("#fx-tests").after(t),t},jQuery.makeTest.id=1,test("jQuery.show('fast') doesn't clear radio buttons (bug #1095)",function(){expect(4),stop();var e=jQuery("#checkedtest");e.hide().show("fast",function(){ok(jQuery("input[type='radio']",e).first().attr("checked"),"Check first radio still checked."),ok(!jQuery("input[type='radio']",e).last().attr("checked"),"Check last radio still NOT checked."),ok(jQuery("input[type='checkbox']",e).first().attr("checked"),"Check first checkbox still checked."),ok(!jQuery("input[type='checkbox']",e).last().attr("checked"),"Check last checkbox still NOT checked."),start()})}),test("interrupt toggle",function(){expect(24),stop();var e=2e3,t=500,n=0,r=jQuery(".chain-test"),i=function(){--n||start()};jQuery.each({slideToggle:"height",fadeToggle:"opacity",toggle:"width"},function(s,o){var u=r.filter("[id^='"+s.toLowerCase()+"']").each(function(){n++,jQuery.data(this,"startVal",jQuery(this).css(o)),QUnit.expectJqData(this,"olddisplay")});u[s](e),setTimeout(function(){u.stop().each(function(){notEqual(jQuery(this).css(o),jQuery.data(this,"startVal"),".stop() before completion of hiding ."+s+"() - #"+this.id)}),u[s](t,function(){var n=this.id,r=jQuery(this),u=r.data("startVal");r.removeData("startVal"),equal(r.css(o),u,"original value restored by ."+s+"() - #"+n),r.hide()[s](e),setTimeout(function(){r.stop(),notEqual(r.css(o),u,".stop() before completion of showing ."+s+"() - #"+n),r[s](t,function(){equal(r.css(o),u,"original value restored by ."+s+"() - #"+n),i()})},t)})},t)})}),test("animate with per-property easing",function(){expect(5),stop();var e={a:0,b:0,c:0},t=!1,n=!1,r=!1,i={a:[100,"_test1"],b:[100,"_test2"],c:100};jQuery.easing._test1=function(e){return t=!0,e},jQuery.easing._test2=function(e){return n=!0,e},jQuery.easing._default_test=function(e){return r=!0,e},jQuery(e).animate(i,400,"_default_test",function(){start(),ok(t,"Easing function (_test1) called"),ok(n,"Easing function (_test2) called"),ok(r,"Easing function (_default) called"),equal(i.a[1],"_test1","animate does not change original props (per-property easing would be lost)"),equal(i.b[1],"_test2","animate does not change original props (per-property easing would be lost)")})}),test("animate with CSS shorthand properties",function(){expect(11),stop();var e=0,t=0,n={padding:"10 20 30"},r={padding:["1 2 3","_special"]};jQuery.easing._default=function(t){return t>=1&&e++,t},jQuery.easing._special=function(e){return e>=1&&t++,e},jQuery("#foo").animate(n,200,"_default",function(){equal(this.style.paddingTop,"10px","padding-top was animated"),equal(this.style.paddingLeft,"20px","padding-left was animated"),equal(this.style.paddingRight,"20px","padding-right was animated"),equal(this.style.paddingBottom,"30px","padding-bottom was animated"),equal(e,4,"per-animation default easing called for each property"),e=0}).animate(r,200,"_default",function(){equal(this.style.paddingTop,"1px","padding-top was animated again"),equal(this.style.paddingLeft,"2px","padding-left was animated again"),equal(this.style.paddingRight,"2px","padding-right was animated again"),equal(this.style.paddingBottom,"3px","padding-bottom was animated again"),equal(e,0,"per-animation default easing not called"),equal(t,4,"special easing called for each property"),jQuery(this).css("padding","0"),delete jQuery.easing._default,delete jQuery.easing._special,start()})}),test("hide hidden elements, with animation (bug #7141)",function(){expect(3),QUnit.reset(),stop();var e=jQuery("<div style='display:none'></div>").appendTo("#qunit-fixture");equal(e.css("display"),"none","Element is hidden by default"),e.hide(1,function(){ok(!jQuery._data(e,"olddisplay"),"olddisplay is undefined after hiding an already-hidden element"),e.show(1,function(){equal(e.css("display"),"block","Show a double-hidden element"),start()})})}),test("animate unit-less properties (#4966)",2,function(){stop();var e=jQuery("<div style='z-index: 0; position: absolute;'></div>").appendTo("#qunit-fixture");equal(e.css("z-index"),"0","z-index is 0"),e.animate({zIndex:2},function(){equal(e.css("z-index"),"2","z-index is 2"),start()})}),test("animate properties missing px w/ opacity as last (#9074)",2,function(){function t(t){return parseInt(e.css(t),10)}expect(6),stop();var e=jQuery("<div style='position: absolute; margin-left: 0; left: 0px;'></div>").appendTo("#qunit-fixture");equal(t("marginLeft"),0,"Margin left is 0"),equal(t("left"),0,"Left is 0"),e.animate({left:200,marginLeft:200,opacity:0},2e3),setTimeout(function(){var n=t("marginLeft"),r=t("left");notEqual(n,0,"Margin left is not 0 after partial animate"),notEqual(n,200,"Margin left is not 200 after partial animate"),notEqual(r,0,"Left is not 0 after partial animate"),notEqual(r,200,"Left is not 200 after partial animate"),e.stop().remove(),start()},500)}),test("callbacks should fire in correct order (#9100)",function(){expect(1),stop();var e=1,t=0;jQuery("<p data-operation='*2'></p><p data-operation='^2'></p>").appendTo("#qunit-fixture").animate({fontSize:12},13,function(){e*=jQuery(this).data("operation")==="*2"?2:e,t++,t===2&&(equal(e,4,"test value has been *2 and _then_ ^2"),start())})}),asyncTest("callbacks that throw exceptions will be removed (#5684)",function(){function t(){}expect(2);var e=jQuery("#foo");e.animate({height:1},1,function(){throw new t}),jQuery.fx.stop(),setTimeout(function(){raises(jQuery.fx.tick,t,"Exception was thrown"),jQuery.fx.tick(),ok(!0,"Test completed without throwing a second exception"),start()},1)}),test("animate will scale margin properties individually",function(){expect(2),stop();var e=jQuery("#foo").css({margin:0,marginLeft:100});ok(e.css("marginLeft")!==e.css("marginRight"),"Sanity Check"),e.animate({margin:200}).stop(),ok(e.css("marginLeft")!==e.css("marginRight"),"The margin properties are different"),e.css({marginLeft:"",marginRight:"",marginTop:"",marginBottom:""}),start()}),test("Do not append px to 'fill-opacity' #9548",1,function(){var e=jQuery("<div>").appendTo("#qunit-fixture");e.css("fill-opacity",0).animate({"fill-opacity":1},0,function(){equal(jQuery(this).css("fill-opacity"),1,"Do not append px to 'fill-opacity'"),e.remove()})}),test("line-height animates correctly (#13855)",function(){expect(12),stop();var e=jQuery("<p style='line-height: 4;'>unitless</p><p style='line-height: 50px;'>px</p><p style='line-height: 420%;'>percent</p><p style='line-height: 2.5em;'>em</p>").appendTo("#qunit-fixture"),t=jQuery.map(e,function(e){return jQuery(e).height()});e.animate({"line-height":"hide"},1500),setTimeout(function(){e.each(function(e){var n=jQuery.text(this),r=t[e],i=jQuery(this).height();ok(i<r,"hide "+n+": upper bound"),ok(i>r/2,"hide "+n+": lower bound")}),e.stop(!0,!0).hide().animate({"line-height":"show"},1500),setTimeout(function(){e.each(function(e){var n=jQuery.text(this),r=t[e],i=jQuery(this).height();ok(i<r/2,"show "+n+": upper bound")}),e.stop(!0,!0),start()},400)},400)}),asyncTest("jQuery.Animation( object, props, opts )",4,function(){var e,t={foo:0,bar:1,width:100},n={foo:1,bar:0,width:200};e=jQuery.Animation(t,n,{duration:1}),e.done(function(){for(var r in n)equal(t[r],n[r],"Animated: "+r);e.done(function(){deepEqual(t,n,"No unexpected properties"),start()})})}),asyncTest("Animate Option: step: function( percent, tween )",1,function(){var e={};jQuery("#foo").animate({prop1:1,prop2:2,prop3:3},{duration:1,step:function(t,n){var r=e[n.prop]=e[n.prop]||[];r[t===0?0:1]=t}}).queue(function(t){deepEqual(e,{prop1:[0,1],prop2:[0,2],prop3:[0,3]},"Step function was called once at 0% and once at 100% for each property"),t(),start()})}),asyncTest("Animate callbacks have correct context",2,function(){var e=jQuery("#foo");e.animate({height:10},10,function(){equal(e[0],this,"Complete callback after stop(true) `this` is element")}).stop(!0,!0),e.animate({height:100},10,function(){equal(e[0],this,"Complete callback `this` is element"),start()})}),asyncTest("User supplied callback called after show when fx off (#8892)",2,function(){var e=jQuery("#foo");jQuery.fx.off=!0,e.hide(),e.fadeIn(500,function(){ok(jQuery(this).is(":visible"),"Element is visible in callback"),e.fadeOut(500,function(){ok(jQuery(this).is(":hidden"),"Element is hidden in callback"),jQuery.fx.off=!1,start()})})}),test("animate should set display for disconnected nodes",function(){expect(18);var e=0,t={toggle:[1],slideToggle:[],fadeIn:[],fadeTo:["fast",.5],slideDown:["fast"],show:[1],animate:[{width:"show"}]},n=jQuery("<div>test</div>"),r=jQuery("<div/>"),i=jQuery("<div style='display: none;'/>"),s=jQuery("<div style='display: inline;'/>");strictEqual(n.show()[0].style.display,"block","set display with show() for element with parentNode = document fragment"),strictEqual(r.show()[0].style.display,"block","set display with show() for element with parentNode = null"),strictEqual(i.show()[0].style.display,"block","show() should change display if it already set to none"),strictEqual(s.show()[0].style.display,"inline","show() should not change display if it already set"),QUnit.expectJqData(n[0],"olddisplay"),QUnit.expectJqData(r[0],"olddisplay"),QUnit.expectJqData(i[0],"olddisplay"),stop(),jQuery.each(t,function(t,n){jQuery.each([jQuery("<div>test</div>"),jQuery("<div/>")],function(){var r=[function(){strictEqual(this.style.display,"block","set display to block with "+t),QUnit.expectJqData(this,"olddisplay"),++e===14&&start()}];jQuery.fn[t].apply(this,n.concat(r))})})}),asyncTest("Animation callback should not show animated element as :animated (#7157)",1,function(){var e=jQuery("#foo");e.animate({opacity:0},100,function(){ok(!e.is(":animated"),"The element is not animated"),start()})}),asyncTest("hide called on element within hidden parent should set display to none (#10045)",3,function(){var e=jQuery(".hidden"),t=jQuery("<div>hide</div><div>hide0</div><div>hide1</div>");e.append(t),jQuery.when(t.eq(0).hide(),t.eq(1).hide(0),t.eq(2).hide(1)).done(function(){strictEqual(t.get(0).style.display,"none","hide() called on element within hidden parent should set display to none"),strictEqual(t.get(1).style.display,"none","hide( 0 ) called on element within hidden parent should set display to none"),strictEqual(t.get(2).style.display,"none","hide( 1 ) called on element within hidden parent should set display to none"),t.remove(),start()})}),asyncTest("hide, fadeOut and slideUp called on element width height and width = 0 should set display to none",5,function(){var e=jQuery("#foo"),t=0,n=jQuery();for(;t<5;t++)n=n.add("<div style='width:0;height:0;'></div>");e.append(n),jQuery.when(n.eq(0).hide(),n.eq(1).hide(jQuery.noop),n.eq(2).hide(1),n.eq(3).fadeOut(),n.eq(4).slideUp()).done(function(){strictEqual(n.get(0).style.display,"none","hide() called on element width height and width = 0 should set display to none"),strictEqual(n.get(1).style.display,"none","hide( jQuery.noop ) called on element width height and width = 0 should set display to none"),strictEqual(n.get(2).style.display,"none","hide( 1 ) called on element width height and width = 0 should set display to none"),strictEqual(n.get(3).style.display,"none","fadeOut() called on element width height and width = 0 should set display to none"),strictEqual(n.get(4).style.display,"none","slideUp() called on element width height and width = 0 should set display to none"),start()})}),asyncTest("Handle queue:false promises",10,function(){var e=jQuery("#foo").clone().addBack(),t=1;e.animate({top:1},{duration:10,queue:!1,complete:function(){ok(t++<=2,"Step one or two")}}).animate({bottom:1},{duration:10,complete:function(){ok(t>2&&t<5,"Step three or four"),t++}}),e.promise().done(function(){equal(t++,5,"steps 1-5: queue:false then queue:fx done"),e.animate({top:10},{duration:10,complete:function(){ok(t>5&&t<8,"Step six or seven"),t++}}).animate({bottom:10},{duration:10,queue:!1,complete:function(){ok(t>7&&t<10,"Step eight or nine"),t++}}).promise().done(function(){equal(t++,10,"steps 6-10: queue:fx then queue:false"),start()})})}),asyncTest("multiple unqueued and promise",4,function(){var e=jQuery("#foo"),t=1;e.animate({marginLeft:300},{duration:500,queue:!1,complete:function(){strictEqual(t++,2,"Step 2")}}).animate({top:100},{duration:1e3,queue:!1,complete:function(){strictEqual(t++,3,"Step 3")}}).animate({},{duration:2e3,queue:!1,complete:function(){strictEqual(t++,1,"Step 1")}}).promise().done(function(){strictEqual(t++,4,"Step 4"),start()})}),asyncTest("animate does not change start value for non-px animation (#7109)",1,function(){var e=jQuery("<div><div></div></div>").css({width:284,height:1}).appendTo("#qunit-fixture"),t=e.children().css({fontSize:"98.6in",width:"0.01em",height:1}),n=parseFloat(t.css("width")),r=[];t.animate({width:"0%"},{duration:1,step:function(){r.push(parseFloat(t.css("width")))}}).queue(function(t){var i=r[0]/n;ok(i>.9&&i<1.1,"Starting width was close enough"),t(),e.remove(),start()})}),asyncTest("non-px animation handles non-numeric start (#11971)",2,function(){var e=jQuery("#foo"),t=e.css("backgroundPositionX");if(!t){expect(1),ok(!0,"Style property not understood"),start();return}e.animate({backgroundPositionX:"42%"},{duration:1,progress:function(e,n){if(n)return;parseFloat(t)?equal(jQuery.style(this,"backgroundPositionX"),t,"Numeric start preserved"):equal(jQuery.style(this,"backgroundPositionX"),"0%","Non-numeric start zeroed")},done:function(){equal(jQuery.style(this,"backgroundPositionX"),"42%","End reached"),start()}})}),asyncTest("Animation callbacks (#11797)",15,function(){var e=jQuery("#foo").children(),t=!1,n=0;e.eq(0).animate({},{duration:1,start:function(){ok(!0,"empty: start")},progress:function(e,t){equal(t,0,"empty: progress 0")},done:function(){ok(!0,"empty: done")},fail:function(){ok(!1,"empty: fail")},always:function(){ok(!0,"empty: always"),t=!0}}),ok(t,"empty: done immediately"),t=!1,e.eq(1).animate({opacity:0},{duration:1,start:function(){ok(!0,"stopped: start")},progress:function(e,t){equal(t,0,"stopped: progress 0")},done:function(){ok(!1,"stopped: done")},fail:function(){ok(!0,"stopped: fail")},always:function(){ok(!0,"stopped: always"),t=!0}}).stop(),ok(t,"stopped: stopped immediately"),e.eq(2).animate({opacity:0},{duration:1,start:function(){ok(!0,"async: start")},progress:function(e,t){if(t===0&&n===1)return;equal(t,n,"async: progress "+n),n++},done:function(){ok(!0,"async: done")},fail:function(){ok(!1,"async: fail")},always:function(){ok(!0,"async: always"),start()}})}),test("Animate properly sets overflow hidden when animating width/height (#12117)",8,function(){jQuery.each(["height","width"],function(e,t){jQuery.each([100,0],function(e,n){var r=jQuery("<div>").css("overflow","auto"),i={};i[t]=n,r.animate(i,1),equal(r.css("overflow"),"hidden","overflow: hidden set when animating "+t+" to "+n),r.stop(),equal(r.css("overflow"),"auto","overflow: auto restored after animating "+t+" to "+n)})})}),test("Each tick of the timer loop uses a fresh time (#12837)",function(){var e,t,n=jQuery({test:0});expect(3),n.animate({test:100},{step:function(t,n){ok(n.now!==e,"Current value is not the last value: "+e+" - "+n.now),e=n.now}}),t=jQuery.now();while(t===jQuery.now());jQuery.fx.tick(),t=jQuery.now();while(t===jQuery.now());jQuery.fx.tick(),n.stop()}),test("Animations with 0 duration don't ease (#12273)",1,function(){jQuery.easing.test=function(){ok(!1,"Called easing")},jQuery("#foo").animate({height:100},{duration:0,easing:"test",complete:function(){equal(jQuery(this).height(),100,"Height is 100")}}),delete jQuery.easing.test}),jQuery.map(["toggle","slideToggle","fadeToggle"],function(e){var t=1500;asyncTest("toggle state tests: "+e+" (#8685)",function(){function n(){var n=parseFloat(o.css(s));r=!1,o[e]({duration:t,step:function(e,t){t.pos>.1&&t.prop===s&&!r&&(r=!0,equal(t.start,n,s+" starts at "+n+" where it stopped"),equal(t.end,i,s+" ending value is "+i),o.stop())},always:start})}var r,i,s=e==="slideToggle"?"height":"opacity",o=jQuery("#foo").height(200);expect(4),o[e]({duration:t,easing:"linear",step:function(e,t){t.pos>.1&&t.prop===s&&!r&&(r=!0,i=t.start,ok(t.start!==0,s+" is starting at "+i+" on first toggle (non-zero)"),equal(t.end,0,s+" is ending at 0 on first toggle"),o.stop())},always:n})})}),test("jQuery.fx.start & jQuery.fx.stop hook points",function(){var e=jQuery.fx.start,t=jQuery.fx.stop,n=jQuery({foo:0});expect(3),jQuery.fx.start=function(){ok(!0,"start called")},jQuery.fx.stop=function(){ok(!0,"stop called")},n.animate({foo:1},{queue:!1}),n.animate({foo:2},{queue:!1}),n.stop(),jQuery.fx.tick(),jQuery.fx.start=e,jQuery.fx.stop=t}),test(".finish() completes all queued animations",function(){var e={top:100,left:100,height:100,width:100},t=jQuery("<div>");expect(11),jQuery.each(e,function(e,n){var r={};r[e]=n,t.css(e,1).animate(r,function(){ok(!0,"Called animation callback for "+e)}).delay(100)}),equal(t.queue().length,8,"8 animations in the queue"),t.finish(),jQuery.each(e,function(e,n){equal(parseFloat(t.css(e)),n,e+" finished at correct value")}),equal(t.queue().length,0,"empty queue when done"),equal(t.is(":animated"),!1,":animated doesn't match"),t.remove(),jQuery.fx.tick()}),test(".finish( false ) - unqueued animations",function(){var e={top:100,left:100,height:100,width:100},t=jQuery("<div>");expect(10),jQuery.each(e,function(e,n){var r={};r[e]=n,t.css(e,1).animate(r,{queue:!1,complete:function(){ok(!0,"Called animation callback for "+e)}})}),equal(t.queue().length,0,"0 animations in the queue"),t.finish(!1),jQuery.each(e,function(e,n){equal(parseFloat(t.css(e)),n,e+" finished at correct value")}),equal(t.is(":animated"),!1,":animated doesn't match"),t.remove(),jQuery.fx.tick()}),test('.finish( "custom" ) - custom queue animations',function(){var e={top:100,left:100,height:100,width:100},t=jQuery("<div>");expect(11),jQuery.each(e,function(e,n){var r={};r[e]=n,t.css(e,1).animate(r,{queue:"custom",complete:function(){ok(!0,"Called animation callback for "+e)}})}),equal(t.queue("custom").length,4,"4 animations in the queue"),t.dequeue("custom"),equal(t.is(":animated"),!0,":animated matches"),t.finish("custom"),jQuery.each(e,function(e,n){equal(parseFloat(t.css(e)),n,e+" finished at correct value")}),equal(t.is(":animated"),!1,":animated doesn't match"),t.remove(),jQuery.fx.tick()}),test(".finish() calls finish of custom queue functions",function(){function e(e,r){r.stop=function(e){n++,equal(this,t[0]),ok(e,"hooks.stop(true) called")}}var t=jQuery("<div>"),n=0,r=0;expect(6),e.finish=function(){r++,ok(!0,"Finish called on custom queue function")},t.queue(e).queue(e).queue(e).finish(),equal(n,1,"1 stop(true) callback"),equal(r,2,"2 finish callbacks"),t.remove()}),asyncTest(".finish() is applied correctly when multiple elements were animated (#13937)",function(){expect(3);var e=jQuery("<a>0</a><a>1</a><a>2</a>");e.animate({opacity:0},1500).animate({opacity:1},1500),setTimeout(function(){e.eq(1).finish(),ok(!e.eq(1).queue().length,"empty queue for .finish()ed element"),ok(e.eq(0).queue().length,"non-empty queue for preceding element"),ok(e.eq(2).queue().length,"non-empty queue for following element"),e.stop(!0),start()},100)}),asyncTest("slideDown() after stop() (#13483)",2,function(){var e=jQuery("<ul style='height: 100px;display: block'></ul>"),t=e.height();e.slideUp(1e3),setTimeout(function(){e.stop(!0),e.slideDown(1,function(){equal(e.height(),t,"slideDown() after interrupting slideUp() with stop(). Height must be in original value"),e.slideUp(1,function(){e.slideDown(1e3),setTimeout(function(){e.stop(!0),e.slideDown(1,function(){equal(e.height(),t,"slideDown() after interrupting slideDown() with stop(). Height must be in original value"),e.remove(),start()})},500)})})},500)}),asyncTest("fadeIn() after stop() (related to #13483)",2,function(){var e=jQuery("<ul style='height: 100px;display: block; opacity: 1'></ul>"),t=e.css("opacity");e.fadeOut(1e3),setTimeout(function(){e.stop(!0),e.fadeIn(1,function(){equal(e.css("opacity"),t,"fadeIn() after interrupting fadeOut() with stop(). Opacity must be in original value"),e.fadeOut(1,function(){e.fadeIn(1e3),setTimeout(function(){e.stop(!0),e.fadeIn(1,function(){equal(e.css("opacity"),t,"fadeIn() after interrupting fadeIn() with stop(). Opacity must be in original value"),e.remove(),start()})},500)})})},500)})})();