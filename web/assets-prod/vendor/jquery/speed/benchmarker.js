function benchmarkList(e,t,n){return function(){benchmark(e.slice(1),t,n)}}function count(){for(i=3;i<=jQuery.benchmarker.libraries.length+2;i++){var e=jQuery("td:nth-child("+i+").fail").length,t=jQuery("td:nth-child("+i+").winner").length;jQuery("tfoot tr:first th:eq("+(i-1)+")").html("<span class='wins'>"+t+"</span> / <span class='fails'>"+e+"</span>")}}function withinTolerance(e,t,n,r){if(r)var i=t+n/100*t,s=t-n/100*t;else var i=t+n,s=t-n;if(e>=s&&e<=i)return!0}jQuery.benchmarker.tests=["#page","#masthead","#mastheadhd",".mastheadbd",".first",".on","div","li","a","div.mastheadbd","li.first","li.on","#page div","#dtba span","div#page","div#masthead","#page .mastheadbd","#page .first",".outer_search_container .search_container",".searchbox_container .inputtext","*","#page div.mastheadbd","#page li.first","input[name=p]","a[name=marketplace]",".outer_search_container div",".searchbox_container span","[name=p]","[name=marketplace]","ul li","form input","#page #e2econtent","#page #e2e"],jQuery.fn.benchmark=function(){this.each(function(){try{jQuery(this).parent().children("*:gt(1)").remove()}catch(e){}});var e=parseInt(jQuery("#times").val());jQuery.benchmarker.startingList=this.get(),benchmark(this.get(),e,jQuery.benchmarker.libraries)},jQuery(function(){for(i=0;i<jQuery.benchmarker.tests.length;i++)jQuery("tbody").append("<tr><td class='test'>"+jQuery.benchmarker.tests[i]+"</td></tr>");jQuery("tbody tr:first-child").remove(),jQuery("td.test").before("<td><input type='checkbox' checked='checked' /></td>"),jQuery("button.runTests").bind("click",function(){jQuery("td:has(input:checked) + td.test").benchmark()}),jQuery("button.retryTies").bind("click",function(){jQuery("tr:has(td.tie) td.test").benchmark()}),jQuery("button.selectAll").bind("click",function(){jQuery("input[type=checkbox]").each(function(){this.checked=!0})}),jQuery("button.deselectAll").bind("click",function(){jQuery("input[type=checkbox]").each(function(){this.checked=!1})}),jQuery("#addTest").bind("click",function(){jQuery("table").append("<tr><td><input type='checkbox' /></td><td><input type='text' /><button>Add</button></td></tr>"),jQuery("div#time-test > button").each(function(){this.disabled=!0}),jQuery("tbody tr:last button").bind("click",function(){var e=jQuery(this).parent();e.html("<button>-</button>"+jQuery(this).prev().val()).addClass("test"),jQuery("div#time-test > button").each(function(){this.disabled=!1}),jQuery("button",e).bind("click",function(){jQuery(this).parents("tr").remove()})})});var e=jQuery.map(jQuery.benchmarker.libraries,function(e,t){var n=t==0?"basis - ":"";return"<th>"+n+e+"</th>"}).join("");jQuery("thead tr").append(e);var t="";for(i=0;i<jQuery.benchmarker.libraries.length;i++)t+="<th></th>";var n="";for(i=0;i<jQuery.benchmarker.libraries.length;i++)n+="<td><span class='wins'>W</span> / <span class='fails'>F</span></th>";jQuery("tfoot tr:first").append(t),jQuery("tfoot tr:last").append(n)}),benchmark=function(e,t,n){if(e[0]){var t=t||50,r=e[0],s=jQuery(r).text().replace(/^-/,""),o=[];for(i=0;i<t+2;i++){var u=new Date;try{window[n[0]](s)}catch(a){}o.push(new Date-u)}var f=Math.sum(o)-Math.max.apply(Math,o)-Math.min.apply(Math,o);try{var l=window[n[0]](s),c=jQuery(s);c.length==0&&l.length!=0||l.length>0&&c.length==l.length||(n[0]=="cssQuery"||n[0]=="jQuery")&&s.match(/nth\-child/)&&l.length>0||n[0]=="jQold"&&c.length>0?jQuery(r).parent().append("<td>"+Math.round(f/t*100)/100+"ms</td>"):jQuery(r).parent().append("<td class='fail'>FAIL</td>")}catch(a){jQuery(r).parent().append("<td class='fail'>FAIL</td>")}setTimeout(benchmarkList(e,t,n),100)}else n[1]?benchmark(jQuery.benchmarker.startingList,t,n.slice(1)):(jQuery("tbody tr").each(function(){var e=jQuery("td:gt(1)",this).min(2);e.length==1?e.addClass("winner"):e.addClass("tie")}),setTimeout(count,100))},jQuery.fn.maxmin=function(e,t,n){e=e||0;var r=Math[t].apply(Math,jQuery.map(this,function(e){var t=parseFloat(e.innerHTML.replace(/[^\.\d]/g,""));if(t||t==0)return t}));return this.filter(function(){if(withinTolerance(parseFloat(this.innerHTML.replace(/[^\.\d]/g,"")),r,e,n))return!0})},jQuery.fn.max=function(e,t){return this.maxmin(e,"max",t)},jQuery.fn.min=function(e,t){return this.maxmin(e,"min",t)},Math.sum=function(e){var t=0;for(i=0;i<e.length;i++)t+=e[i];return t};