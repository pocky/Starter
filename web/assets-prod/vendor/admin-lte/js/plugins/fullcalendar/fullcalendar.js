/*!
 * FullCalendar v1.6.4
 * Docs & License: http://arshaw.com/fullcalendar/
 * (c) 2013 Adam Shaw
 */

(function(e,t){function o(t){e.extend(!0,n,t)}function u(n,r,i){function M(e){d?H()&&(z(),q(e)):_()}function _(){v=r.theme?"ui":"fc",n.addClass("fc"),r.isRTL?n.addClass("fc-rtl"):n.addClass("fc-ltr"),r.theme&&n.addClass("ui-widget"),d=e("<div class='fc-content' style='position:relative'/>").prependTo(n),h=new a(o,r),p=h.render(),p&&n.prepend(p),j(r.defaultView),r.handleWindowResize&&e(window).resize(X),B()||D()}function D(){setTimeout(function(){!b.start&&B()&&I()},0)}function P(){b&&(gt("viewDestroy",b,b,b.element),b.triggerEventDestroy()),e(window).unbind("resize",X),h.destroy(),d.remove(),n.removeClass("fc fc-rtl ui-widget")}function H(){return n.is(":visible")}function B(){return e("body").is(":visible")}function j(e){(!b||e!=b.name)&&F(e)}function F(t){T++,b&&(gt("viewDestroy",b,b,b.element),it(),b.triggerEventDestroy(),pt(),b.element.remove(),h.deactivateButton(b.name)),h.activateButton(t),b=new s[t](e("<div class='fc-view fc-view-"+t+"' style='position:relative'/>").appendTo(d),o),I(),dt(),T--}function I(e){(!b.start||e||C<b.start||C>=b.end)&&H()&&q(e)}function q(e){T++,b.start&&(gt("viewDestroy",b,b,b.element),it(),Q()),pt(),b.render(C,e||0),W(),dt(),(b.afterRender||V)(),tt(),nt(),gt("viewRender",b,b,b.element),b.trigger("viewDisplay",l),T--,G()}function R(){H()&&(it(),Q(),z(),W(),K())}function z(){r.contentHeight?E=r.contentHeight:r.height?E=r.height-(p?p.height():0)-U(d):E=Math.round(d.width()/Math.max(r.aspectRatio,.5))}function W(){E===t&&z(),T++,b.setHeight(E),b.setWidth(d.width()),T--,w=n.outerWidth()}function X(){if(!T)if(b.start){var e=++x;setTimeout(function(){e==x&&!T&&H()&&w!=(w=n.outerWidth())&&(T++,R(),b.trigger("windowResize",l),T--)},200)}else D()}function $(){Q(),Y()}function J(e){Q(),K(e)}function K(e){H()&&(b.setEventData(k),b.renderEvents(k,e),b.trigger("eventAfterAllRender"))}function Q(){b.triggerEventDestroy(),b.clearEvents(),b.clearEventData()}function G(){!r.lazyFetching||u(b.visStart,b.visEnd)?Y():K()}function Y(){f(b.visStart,b.visEnd)}function Z(e){k=e,K()}function et(e){J(e)}function tt(){h.updateTitle(b.title)}function nt(){var e=new Date;e>=b.start&&e<b.end?h.disableButton("today"):h.enableButton("today")}function rt(e,n,r){b.select(e,n,r===t?!0:r)}function it(){b&&b.unselect()}function st(){I(-1)}function ot(){I(1)}function ut(){m(C,-1),I()}function at(){m(C,1),I()}function ft(){C=new Date,I()}function lt(e,t,n){e instanceof Date?C=S(e):N(C,e,t,n),I()}function ct(e,n,r){e!==t&&m(C,e),n!==t&&g(C,n),r!==t&&y(C,r),I()}function ht(){return S(C)}function pt(){d.css({width:"100%",height:d.height(),overflow:"hidden"})}function dt(){d.css({width:"",height:"",overflow:""})}function vt(){return b}function mt(e,n){if(n===t)return r[e];if(e=="height"||e=="contentHeight"||e=="aspectRatio")r[e]=n,R()}function gt(e,t){if(r[e])return r[e].apply(t||l,Array.prototype.slice.call(arguments,2))}var o=this;o.options=r,o.render=M,o.destroy=P,o.refetchEvents=$,o.reportEvents=Z,o.reportEventChange=et,o.rerenderEvents=J,o.changeView=j,o.select=rt,o.unselect=it,o.prev=st,o.next=ot,o.prevYear=ut,o.nextYear=at,o.today=ft,o.gotoDate=lt,o.incrementDate=ct,o.formatDate=function(e,t){return A(e,t,r)},o.formatDates=function(e,t,n){return O(e,t,n,r)},o.getDate=ht,o.getView=vt,o.option=mt,o.trigger=gt,c.call(o,r,i);var u=o.isFetchNeeded,f=o.fetchEvents,l=n[0],h,p,d,v,b,w,E,x=0,T=0,C=new Date,k=[],L;N(C,r.year,r.month,r.date),r.droppable&&e(document).bind("dragstart",function(t,n){var i=t.target,s=e(i);if(!s.parents(".fc").length){var o=r.dropAccept;if(e.isFunction(o)?o.call(i,s):s.is(o))L=i,b.dragStart(L,t,n)}}).bind("dragstop",function(e,t){L&&(b.dragStop(L,e,t),L=null)})}function a(t,n){function u(){o=n.theme?"ui":"fc";var t=n.header;if(t)return i=e("<table class='fc-header' style='width:100%'/>").append(e("<tr/>").append(f("left")).append(f("center")).append(f("right"))),i}function a(){i.remove()}function f(r){var i=e("<td class='fc-header-"+r+"'/>"),u=n.header[r];return u&&e.each(u.split(" "),function(r){r>0&&i.append("<span class='fc-header-space'/>");var u;e.each(this.split(","),function(r,a){if(a=="title")i.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),u&&u.addClass(o+"-corner-right"),u=null;else{var f;t[a]?f=t[a]:s[a]&&(f=function(){h.removeClass(o+"-state-hover"),t.changeView(a)});if(f){var l=n.theme?Q(n.buttonIcons,a):null,c=Q(n.buttonText,a),h=e("<span class='fc-button fc-button-"+a+" "+o+"-state-default'>"+(l?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+l+"'/>"+"</span>":c)+"</span>").click(function(){h.hasClass(o+"-state-disabled")||f()}).mousedown(function(){h.not("."+o+"-state-active").not("."+o+"-state-disabled").addClass(o+"-state-down")}).mouseup(function(){h.removeClass(o+"-state-down")}).hover(function(){h.not("."+o+"-state-active").not("."+o+"-state-disabled").addClass(o+"-state-hover")},function(){h.removeClass(o+"-state-hover").removeClass(o+"-state-down")}).appendTo(i);Y(h),u||h.addClass(o+"-corner-left"),u=h}}}),u&&u.addClass(o+"-corner-right")}),i}function l(e){i.find("h2").html(e)}function c(e){i.find("span.fc-button-"+e).addClass(o+"-state-active")}function h(e){i.find("span.fc-button-"+e).removeClass(o+"-state-active")}function p(e){i.find("span.fc-button-"+e).addClass(o+"-state-disabled")}function d(e){i.find("span.fc-button-"+e).removeClass(o+"-state-disabled")}var r=this;r.render=u,r.destroy=a,r.updateTitle=l,r.activateButton=c,r.deactivateButton=h,r.disableButton=p,r.enableButton=d;var i=e([]),o}function c(n,r){function w(e,t){return!p||e<p||t>d}function E(e,t){p=e,d=t,y=[];var n=++v,r=h.length;m=r;for(var i=0;i<r;i++)x(h[i],n)}function x(t,r){T(t,function(i){if(r==v){if(i){n.eventDataTransform&&(i=e.map(i,n.eventDataTransform)),t.eventDataTransform&&(i=e.map(i,t.eventDataTransform));for(var s=0;s<i.length;s++)i[s].source=t,H(i[s]);y=y.concat(i)}m--,m||a(y)}})}function T(t,r){var s,o=i.sourceFetchers,u;for(s=0;s<o.length;s++){u=o[s](t,p,d,r);if(u===!0)return;if(typeof u=="object"){T(u,r);return}}var a=t.events;if(a)e.isFunction(a)?(D(),a(S(p),S(d),function(e){r(e),P()})):e.isArray(a)?r(a):r();else{var l=t.url;if(l){var c=t.success,h=t.error,v=t.complete,m;e.isFunction(t.data)?m=t.data():m=t.data;var g=e.extend({},m||{}),y=rt(t.startParam,n.startParam),b=rt(t.endParam,n.endParam);y&&(g[y]=Math.round(+p/1e3)),b&&(g[b]=Math.round(+d/1e3)),D(),e.ajax(e.extend({},f,t,{data:g,success:function(t){t=t||[];var n=nt(c,this,arguments);e.isArray(n)&&(t=n),r(t)},error:function(){nt(h,this,arguments),r()},complete:function(){nt(v,this,arguments),P()}}))}else r()}}function N(e){e=k(e),e&&(m++,x(e,v))}function k(t){e.isFunction(t)||e.isArray(t)?t={events:t}:typeof t=="string"&&(t={url:t});if(typeof t=="object")return B(t),h.push(t),t}function L(t){h=e.grep(h,function(e){return!j(e,t)}),y=e.grep(y,function(e){return!j(e.source,t)}),a(y)}function A(e){var t,n=y.length,r,i=u().defaultEventEnd,s=e.start-e._start,o=e.end?e.end-(e._end||i(e)):0;for(t=0;t<n;t++)r=y[t],r._id==e._id&&r!=e&&(r.start=new Date(+r.start+s),e.end?r.end?r.end=new Date(+r.end+o):r.end=new Date(+i(r)+o):r.end=null,r.title=e.title,r.url=e.url,r.allDay=e.allDay,r.className=e.className,r.editable=e.editable,r.color=e.color,r.backgroundColor=e.backgroundColor,r.borderColor=e.borderColor,r.textColor=e.textColor,H(r));H(e),a(y)}function O(e,t){H(e),e.source||(t&&(c.events.push(e),e.source=c),y.push(e)),a(y)}function M(t){if(!t){y=[];for(var n=0;n<h.length;n++)e.isArray(h[n].events)&&(h[n].events=[])}else{if(!e.isFunction(t)){var r=t+"";t=function(e){return e._id==r}}y=e.grep(y,t,!0);for(var n=0;n<h.length;n++)e.isArray(h[n].events)&&(h[n].events=e.grep(h[n].events,t,!0))}a(y)}function _(t){return e.isFunction(t)?e.grep(y,t):t?(t+="",e.grep(y,function(e){return e._id==t})):y}function D(){g++||o("loading",null,!0,u())}function P(){--g||o("loading",null,!1,u())}function H(e){var r=e.source||{},i=rt(r.ignoreTimezone,n.ignoreTimezone);e._id=e._id||(e.id===t?"_fc"+l++:e.id+""),e.date&&(e.start||(e.start=e.date),delete e.date),e._start=S(e.start=C(e.start,i)),e.end=C(e.end,i),e.end&&e.end<=e.start&&(e.end=null),e._end=e.end?S(e.end):null,e.allDay===t&&(e.allDay=rt(r.allDayDefault,n.allDayDefault)),e.className?typeof e.className=="string"&&(e.className=e.className.split(/\s+/)):e.className=[]}function B(e){e.className?typeof e.className=="string"&&(e.className=e.className.split(/\s+/)):e.className=[];var t=i.sourceNormalizers;for(var n=0;n<t.length;n++)t[n](e)}function j(e,t){return e&&t&&F(e)==F(t)}function F(e){return(typeof e=="object"?e.events||e.url:"")||e}var s=this;s.isFetchNeeded=w,s.fetchEvents=E,s.addEventSource=N,s.removeEventSource=L,s.updateEvent=A,s.renderEvent=O,s.removeEvents=M,s.clientEvents=_,s.normalizeEvent=H;var o=s.trigger,u=s.getView,a=s.reportEvents,c={events:[]},h=[c],p,d,v=0,m=0,g=0,y=[];for(var b=0;b<r.length;b++)k(r[b])}function m(e,t,n){return e.setFullYear(e.getFullYear()+t),n||E(e),e}function g(e,t,n){if(+e){var r=e.getMonth()+t,i=S(e);i.setDate(1),i.setMonth(r),e.setMonth(r),n||E(e);while(e.getMonth()!=i.getMonth())e.setDate(e.getDate()+(e<i?1:-1))}return e}function y(e,t,n){if(+e){var r=e.getDate()+t,i=S(e);i.setHours(9),i.setDate(r),e.setDate(r),n||E(e),b(e,i)}return e}function b(e,t){if(+e)while(e.getDate()!=t.getDate())e.setTime(+e+(e<t?1:-1)*d)}function w(e,t){return e.setMinutes(e.getMinutes()+t),e}function E(e){return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e}function S(e,t){return t?E(new Date(+e)):new Date(+e)}function x(){var e=0,t;do t=new Date(1970,e++,1);while(t.getHours());return t}function T(e,t){return Math.round((S(e,!0)-S(t,!0))/p)}function N(e,n,r,i){n!==t&&n!=e.getFullYear()&&(e.setDate(1),e.setMonth(0),e.setFullYear(n)),r!==t&&r!=e.getMonth()&&(e.setDate(1),e.setMonth(r)),i!==t&&e.setDate(i)}function C(e,n){return typeof e=="object"?e:typeof e=="number"?new Date(e*1e3):typeof e=="string"?e.match(/^\d+(\.\d+)?$/)?new Date(parseFloat(e)*1e3):(n===t&&(n=!0),k(e,n)||(e?new Date(e):null)):null}function k(e,t){var n=e.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!n)return null;var r=new Date(n[1],0,1);if(t||!n[13]){var i=new Date(n[1],0,1,9,0);n[3]&&(r.setMonth(n[3]-1),i.setMonth(n[3]-1)),n[5]&&(r.setDate(n[5]),i.setDate(n[5])),b(r,i),n[7]&&r.setHours(n[7]),n[8]&&r.setMinutes(n[8]),n[10]&&r.setSeconds(n[10]),n[12]&&r.setMilliseconds(Number("0."+n[12])*1e3),b(r,i)}else{r.setUTCFullYear(n[1],n[3]?n[3]-1:0,n[5]||1),r.setUTCHours(n[7]||0,n[8]||0,n[10]||0,n[12]?Number("0."+n[12])*1e3:0);if(n[14]){var s=Number(n[16])*60+(n[18]?Number(n[18]):0);s*=n[15]=="-"?1:-1,r=new Date(+r+s*60*1e3)}}return r}function L(e){if(typeof e=="number")return e*60;if(typeof e=="object")return e.getHours()*60+e.getMinutes();var t=e.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(t){var n=parseInt(t[1],10);return t[3]&&(n%=12,t[3].toLowerCase().charAt(0)=="p"&&(n+=12)),n*60+(t[2]?parseInt(t[2],10):0)}}function A(e,t,n){return O(e,null,t,n)}function O(e,t,r,i){i=i||n;var s=e,o=t,u,a=r.length,f,l,c,h="";for(u=0;u<a;u++){f=r.charAt(u);if(f=="'"){for(l=u+1;l<a;l++)if(r.charAt(l)=="'"){s&&(l==u+1?h+="'":h+=r.substring(u+1,l),u=l);break}}else if(f=="("){for(l=u+1;l<a;l++)if(r.charAt(l)==")"){var p=A(s,r.substring(u+1,l),i);parseInt(p.replace(/\D/,""),10)&&(h+=p),u=l;break}}else if(f=="["){for(l=u+1;l<a;l++)if(r.charAt(l)=="]"){var d=r.substring(u+1,l),p=A(s,d,i);p!=A(o,d,i)&&(h+=p),u=l;break}}else if(f=="{")s=t,o=e;else if(f=="}")s=e,o=t;else{for(l=a;l>u;l--)if(c=M[r.substring(u,l)]){s&&(h+=c(s,i)),u=l-1;break}l==u&&s&&(h+=f)}}return h}function _(e){var t,n=new Date(e.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),t=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((t-n)/864e5)/7)+1}function D(e){return e.end?P(e.end,e.allDay):y(S(e.start),1)}function P(e,t){return e=S(e),t||e.getHours()||e.getMinutes()?y(e,1):E(e)}function H(n,r,i){n.unbind("mouseover").mouseover(function(n){var s=n.target,o,u,a;while(s!=this)o=s,s=s.parentNode;(u=o._fci)!==t&&(o._fci=t,a=r[u],i(a.event,a.element,a),e(n.target).trigger(n)),n.stopPropagation()})}function B(t,n,r){for(var i=0,s;i<t.length;i++)s=e(t[i]),s.width(Math.max(0,n-F(s,r)))}function j(t,n,r){for(var i=0,s;i<t.length;i++)s=e(t[i]),s.height(Math.max(0,n-U(s,r)))}function F(e,t){return I(e)+R(e)+(t?q(e):0)}function I(t){return(parseFloat(e.css(t[0],"paddingLeft",!0))||0)+(parseFloat(e.css(t[0],"paddingRight",!0))||0)}function q(t){return(parseFloat(e.css(t[0],"marginLeft",!0))||0)+(parseFloat(e.css(t[0],"marginRight",!0))||0)}function R(t){return(parseFloat(e.css(t[0],"borderLeftWidth",!0))||0)+(parseFloat(e.css(t[0],"borderRightWidth",!0))||0)}function U(e,t){return z(e)+X(e)+(t?W(e):0)}function z(t){return(parseFloat(e.css(t[0],"paddingTop",!0))||0)+(parseFloat(e.css(t[0],"paddingBottom",!0))||0)}function W(t){return(parseFloat(e.css(t[0],"marginTop",!0))||0)+(parseFloat(e.css(t[0],"marginBottom",!0))||0)}function X(t){return(parseFloat(e.css(t[0],"borderTopWidth",!0))||0)+(parseFloat(e.css(t[0],"borderBottomWidth",!0))||0)}function V(){}function $(e,t){return e-t}function J(e){return Math.max.apply(Math,e)}function K(e){return(e<10?"0":"")+e}function Q(e,n){if(e[n]!==t)return e[n];var r=n.split(/(?=[A-Z])/),i=r.length-1,s;for(;i>=0;i--){s=e[r[i].toLowerCase()];if(s!==t)return s}return e[""]}function G(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function Y(e){e.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function Z(e){e.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function et(e,t){e.each(function(e,n){n.className=n.className.replace(/^fc-\w*/,"fc-"+h[t.getDay()])})}function tt(e,t){var n=e.source||{},r=e.color,i=n.color,s=t("eventColor"),o=e.backgroundColor||r||n.backgroundColor||i||t("eventBackgroundColor")||s,u=e.borderColor||r||n.borderColor||i||t("eventBorderColor")||s,a=e.textColor||n.textColor||t("eventTextColor"),f=[];return o&&f.push("background-color:"+o),u&&f.push("border-color:"+u),a&&f.push("color:"+a),f.join(";")}function nt(t,n,r){e.isFunction(t)&&(t=[t]);if(t){var i,s;for(i=0;i<t.length;i++)s=t[i].apply(n,r)||s;return s}}function rt(){for(var e=0;e<arguments.length;e++)if(arguments[e]!==t)return arguments[e]}function it(e,t){function a(e,t){t&&(g(e,t),e.setDate(1));var a=r("firstDay"),f=S(e,!0);f.setDate(1);var l=g(S(f),1),c=S(f);y(c,-((c.getDay()-a+7)%7)),s(c);var h=S(l);y(h,(7-h.getDay()+a)%7),s(h,-1,!0);var p=o(),d=Math.round(T(h,c)/7);r("weekMode")=="fixed"&&(y(h,(6-d)*7),d=6),n.title=u(f,r("titleFormat")),n.start=f,n.end=l,n.visStart=c,n.visEnd=h,i(d,p,!0)}var n=this;n.render=a,ut.call(n,e,t,"month");var r=n.opt,i=n.renderBasic,s=n.skipHiddenDays,o=n.getCellsPerWeek,u=t.formatDate}function st(e,t){function a(e,t){t&&y(e,t*7);var a=y(S(e),-((e.getDay()-r("firstDay")+7)%7)),f=y(S(a),7),l=S(a);s(l);var c=S(f);s(c,-1,!0);var h=o();n.start=a,n.end=f,n.visStart=l,n.visEnd=c,n.title=u(l,y(S(c),-1),r("titleFormat")),i(1,h,!1)}var n=this;n.render=a,ut.call(n,e,t,"basicWeek");var r=n.opt,i=n.renderBasic,s=n.skipHiddenDays,o=n.getCellsPerWeek,u=t.formatDates}function ot(e,t){function u(e,t){t&&y(e,t),s(e,t<0?-1:1);var u=S(e,!0),a=y(S(u),1);n.title=o(e,r("titleFormat")),n.start=n.visStart=u,n.end=n.visEnd=a,i(1,1,!1)}var n=this;n.render=u,ut.call(n,e,t,"basicDay");var r=n.opt,i=n.renderBasic,s=n.skipHiddenDays,o=t.formatDate}function ut(t,n,r){function $(e,t,n){D=e,P=t,H=n,J(),b||K(),Q()}function J(){R=s("theme")?"ui":"fc",z=s("columnFormat"),W=s("weekNumbers"),X=s("weekNumberTitle"),s("weekNumberCalculation")!="iso"?V="w":V="W"}function K(){L=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(t)}function Q(){var n=et();v&&v.remove(),v=e(n).appendTo(t),m=v.find("thead"),g=m.find(".fc-day-header"),b=v.find("tbody"),w=b.find("tr"),x=b.find(".fc-day"),T=w.find("td:first-child"),N=w.eq(0).find(".fc-day > div"),C=w.eq(0).find(".fc-day-content > div"),Z(m.add(m.find("tr"))),Z(w),w.eq(0).addClass("fc-first"),w.filter(":last").addClass("fc-last"),x.each(function(t,n){var r=l(Math.floor(t/P),t%P);o("dayRender",i,r,e(n))}),ot(x)}function et(){var e="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+tt()+nt()+"</table>";return e}function tt(){var e=R+"-widget-header",t="",n,r;t+="<thead><tr>",W&&(t+="<th class='fc-week-number "+e+"'>"+G(X)+"</th>");for(n=0;n<P;n++)r=l(0,n),t+="<th class='fc-day-header fc-"+h[r.getDay()]+" "+e+"'>"+G(d(r,z))+"</th>";return t+="</tr></thead>",t}function nt(){var e=R+"-widget-content",t="",n,r,i;t+="<tbody>";for(n=0;n<D;n++){t+="<tr class='fc-week'>",W&&(i=l(n,0),t+="<td class='fc-week-number "+e+"'>"+"<div>"+G(d(i,V))+"</div>"+"</td>");for(r=0;r<P;r++)i=l(n,r),t+=rt(i);t+="</tr>"}return t+="</tbody>",t}function rt(e){var t=R+"-widget-content",n=i.start.getMonth(),r=E(new Date),s="",o=["fc-day","fc-"+h[e.getDay()],t];return e.getMonth()!=n&&o.push("fc-other-month"),+e==+r?o.push("fc-today",R+"-state-highlight"):e<r?o.push("fc-past"):o.push("fc-future"),s+="<td class='"+o.join(" ")+"'"+" data-date='"+d(e,"yyyy-MM-dd")+"'"+">"+"<div>",H&&(s+="<div class='fc-day-number'>"+e.getDate()+"</div>"),s+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>",s}function it(t){O=t;var n=O-m.height(),r,i,o;s("weekMode")=="variable"?r=i=Math.floor(n/(D==1?2:6)):(r=Math.floor(n/D),i=n-r*(D-1)),T.each(function(t,n){t<D&&(o=e(n),o.find("> div").css("min-height",(t==D-1?i:r)-U(o)))})}function st(e){A=e,I.clear(),q.clear(),_=0,W&&(_=m.find("th.fc-week-number").outerWidth()),M=Math.floor((A-_)/P),B(g.slice(0,-1),M)}function ot(e){e.click(ut).mousedown(f)}function ut(t){if(!s("selectable")){var n=k(e(this).data("date"));o("dayClick",this,n,!0,t)}}function ft(e,t,n){n&&j.build();var r=p(e,t);for(var i=0;i<r.length;i++){var s=r[i];ot(lt(s.row,s.leftCol,s.row,s.rightCol))}}function lt(e,n,r,i){var s=j.rect(e,n,r,i,t);return u(s,t)}function ct(e,t){return S(e)}function ht(e,t,n){ft(e,y(S(t),1),!0)}function pt(){a()}function dt(e,t,n){var r=c(e),i=x[r.row*P+r.col];o("dayClick",i,e,t,n)}function vt(e,t,n){F.start(function(e){a(),e&&lt(e.row,e.col,e.row,e.col)},t)}function mt(e,t,n){var r=F.stop();a();if(r){var i=l(r);o("drop",e,i,!0,t,n)}}function gt(e){return S(e.start)}function yt(e){return I.left(e)}function bt(e){return I.right(e)}function wt(e){return q.left(e)}function Et(e){return q.right(e)}function St(e){return w.eq(e)}var i=this;i.renderBasic=$,i.setHeight=it,i.setWidth=st,i.renderDayOverlay=ft,i.defaultSelectionEnd=ct,i.renderSelection=ht,i.clearSelection=pt,i.reportDayClick=dt,i.dragStart=vt,i.dragStop=mt,i.defaultEventEnd=gt,i.getHoverListener=function(){return F},i.colLeft=yt,i.colRight=bt,i.colContentLeft=wt,i.colContentRight=Et,i.getIsCellAllDay=function(){return!0},i.allDayRow=St,i.getRowCnt=function(){return D},i.getColCnt=function(){return P},i.getColWidth=function(){return M},i.getDaySegmentContainer=function(){return L},xt.call(i,t,n,r),At.call(i),Lt.call(i),at.call(i);var s=i.opt,o=i.trigger,u=i.renderOverlay,a=i.clearOverlays,f=i.daySelectionMousedown,l=i.cellToDate,c=i.dateToCell,p=i.rangeToSegments,d=n.formatDate,v,m,g,b,w,x,T,N,C,L,A,O,M,_,D,P,H,j,F,I,q,R,z,W,X,V;Y(t.addClass("fc-grid")),j=new Ot(function(t,n){var r,i,s;g.each(function(t,o){r=e(o),i=r.offset().left,t&&(s[1]=i),s=[i],n[t]=s}),s[1]=i+r.outerWidth(),w.each(function(n,o){n<D&&(r=e(o),i=r.offset().top,n&&(s[1]=i),s=[i],t[n]=s)}),s[1]=i+r.outerHeight()}),F=new Mt(j),I=new Dt(function(e){return N.eq(e)}),q=new Dt(function(e){return C.eq(e)})}function at(){function t(t,n){e.renderDayEvents(t,n)}function n(){e.getDaySegmentContainer().empty()}var e=this;e.renderEvents=t,e.clearEvents=n,Tt.call(e)}function ft(e,t){function a(e,t){t&&y(e,t*7);var a=y(S(e),-((e.getDay()-r("firstDay")+7)%7)),f=y(S(a),7),l=S(a);s(l);var c=S(f);s(c,-1,!0);var h=o();n.title=u(l,y(S(c),-1),r("titleFormat")),n.start=a,n.end=f,n.visStart=l,n.visEnd=c,i(h)}var n=this;n.render=a,ct.call(n,e,t,"agendaWeek");var r=n.opt,i=n.renderAgenda,s=n.skipHiddenDays,o=n.getCellsPerWeek,u=t.formatDates}function lt(e,t){function u(e,t){t&&y(e,t),s(e,t<0?-1:1);var u=S(e,!0),a=y(S(u),1);n.title=o(e,r("titleFormat")),n.start=n.visStart=u,n.end=n.visEnd=a,i(1)}var n=this;n.render=u,ct.call(n,e,t,"agendaDay");var r=n.opt,i=n.renderAgenda,s=n.skipHiddenDays,o=t.formatDate}function ct(n,r,i){function Et(e){st=e,St(),T?Nt():Tt()}function St(){pt=o("theme")?"ui":"fc",dt=o("isRTL"),vt=L(o("minTime")),mt=L(o("maxTime")),gt=o("columnFormat"),yt=o("weekNumbers"),bt=o("weekNumberTitle"),o("weekNumberCalculation")!="iso"?wt="w":wt="W",nt=o("snapMinutes")||o("slotMinutes")}function Tt(){var t=pt+"-widget-header",r=pt+"-widget-content",i,s,u,a,f,l=o("slotMinutes")%15==0;Nt(),P=e("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(n),o("allDaySlot")?(H=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(P),i="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+t+" fc-agenda-axis'>"+o("allDayText")+"</th>"+"<td>"+"<div class='fc-day-content'><div style='position:relative'/></div>"+"</td>"+"<th class='"+t+" fc-agenda-gutter'>&nbsp;</th>"+"</tr>"+"</table>",F=e(i).appendTo(P),I=F.find("tr"),Ft(I.find("td")),P.append("<div class='fc-agenda-divider "+t+"'>"+"<div class='fc-agenda-divider-inner'/>"+"</div>")):H=e([]),q=e("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(P),R=e("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(q),z=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(R),i="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",s=x(),a=w(S(s),mt),w(s,vt),ot=0;for(u=0;s<a;u++)f=s.getMinutes(),i+="<tr class='fc-slot"+u+" "+(f?"fc-minor":"")+"'>"+"<th class='fc-agenda-axis "+t+"'>"+(!l||!f?b(s,o("axisFormat")):"&nbsp;")+"</th>"+"<td class='"+r+"'>"+"<div style='position:relative'>&nbsp;</div>"+"</td>"+"</tr>",w(s,o("slotMinutes")),ot++;i+="</tbody></table>",W=e(i).appendTo(R),It(W.find("td"))}function Nt(){var t=Ct();T&&T.remove(),T=e(t).appendTo(n),N=T.find("thead"),C=N.find("th").slice(1,-1),k=T.find("tbody"),A=k.find("td").slice(0,-1),O=A.find("> div"),M=A.find(".fc-day-content > div"),_=A.eq(0),D=O.eq(0),Z(N.add(N.find("tr"))),Z(k.add(k.find("tr")))}function Ct(){var e="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+kt()+_t()+"</table>";return e}function kt(){var e=pt+"-widget-header",t,n="",r,i;n+="<thead><tr>",yt?(t=v(0,0),r=b(t,wt),dt?r+=bt:r=bt+r,n+="<th class='fc-agenda-axis fc-week-number "+e+"'>"+G(r)+"</th>"):n+="<th class='fc-agenda-axis "+e+"'>&nbsp;</th>";for(i=0;i<st;i++)t=v(0,i),n+="<th class='fc-"+h[t.getDay()]+" fc-col"+i+" "+e+"'>"+G(b(t,gt))+"</th>";return n+="<th class='fc-agenda-gutter "+e+"'>&nbsp;</th>"+"</tr>"+"</thead>",n}function _t(){var e=pt+"-widget-header",t=pt+"-widget-content",n,r=E(new Date),i,s,o,u,a="";a+="<tbody><tr><th class='fc-agenda-axis "+e+"'>&nbsp;</th>",s="";for(i=0;i<st;i++)n=v(0,i),u=["fc-col"+i,"fc-"+h[n.getDay()],t],+n==+r?u.push(pt+"-state-highlight","fc-today"):n<r?u.push("fc-past"):u.push("fc-future"),o="<td class='"+u.join(" ")+"'>"+"<div>"+"<div class='fc-day-content'>"+"<div style='position:relative'>&nbsp;</div>"+"</div>"+"</div>"+"</td>",s+=o;return a+=s,a+="<td class='fc-agenda-gutter "+t+"'>&nbsp;</td>"+"</tr>"+"</tbody>",a}function Pt(e){e===t&&(e=J),J=e,ct={};var n=k.position().top,r=q.position().top,i=Math.min(e-n,W.height()+r+1);D.height(i-U(_)),P.css("top",n),q.height(i-r-1),tt=W.find("tr:first").height()+1,rt=o("slotMinutes")/nt,it=tt/rt}function Ht(t){V=t,ft.clear(),lt.clear();var n=N.find("th:first");F&&(n=n.add(F.find("th:first"))),n=n.add(W.find("th:first")),K=0,B(n.width("").each(function(t,n){K=Math.max(K,e(n).outerWidth())}),K);var r=T.find(".fc-agenda-gutter");F&&(r=r.add(F.find("th.fc-agenda-gutter")));var i=q[0].clientWidth;et=q.width()-i,et?(B(r,et),r.show().prev().removeClass("fc-last")):r.hide().prev().addClass("fc-last"),Q=Math.floor((i-K)/st),B(C.slice(0,-1),Q)}function Bt(){function r(){q.scrollTop(n)}var e=x(),t=S(e);t.setHours(o("firstHour"));var n=Qt(e,t)+1;r(),setTimeout(r,0)}function jt(){Bt()}function Ft(e){e.click(qt).mousedown(p)}function It(e){e.click(qt).mousedown(rn)}function qt(e){if(!o("selectable")){var t=Math.min(st-1,Math.floor((e.pageX-T.offset().left-K)/Q)),n=v(0,t),r=this.parentNode.className.match(/fc-slot(\d+)/);if(r){var i=parseInt(r[1])*o("slotMinutes"),s=Math.floor(i/60);n.setHours(s),n.setMinutes(i%60+vt),u("dayClick",A[t],n,!1,e)}else u("dayClick",A[t],n,!0,e)}}function Rt(e,t,n){n&&ut.build();var r=g(e,t);for(var i=0;i<r.length;i++){var s=r[i];Ft(Ut(s.row,s.leftCol,s.row,s.rightCol))}}function Ut(e,t,n,r){var i=ut.rect(e,t,n,r,P);return a(i,P)}function zt(e,t){for(var n=0;n<st;n++){var r=v(0,n),i=y(S(r),1),s=new Date(Math.max(r,e)),o=new Date(Math.min(i,t));if(s<o){var u=ut.rect(0,n,0,n,R),f=Qt(r,s),l=Qt(r,o);u.top=f,u.height=l-f,It(a(u,R))}}}function Wt(e){return ft.left(e)}function Xt(e){return lt.left(e)}function Vt(e){return ft.right(e)}function $t(e){return lt.right(e)}function Jt(e){return o("allDaySlot")&&!e.row}function Kt(e){var t=v(0,e.col),n=e.row;return o("allDaySlot")&&n--,n>=0&&w(t,vt+n*nt),t}function Qt(e,n){e=S(e,!0);if(n<w(S(e),vt))return 0;if(n>=w(S(e),mt))return W.height();var r=o("slotMinutes"),i=n.getHours()*60+n.getMinutes()-vt,s=Math.floor(i/r),u=ct[s];return u===t&&(u=ct[s]=W.find("tr").eq(s).find("td div")[0].offsetTop),Math.max(0,Math.round(u-1+tt*(i%r/r)))}function Gt(e){return I}function Yt(e){var t=S(e.start);return e.allDay?t:w(t,o("defaultEventMinutes"))}function Zt(e,t){return t?S(e):w(S(e),o("slotMinutes"))}function en(e,t,n){n?o("allDaySlot")&&Rt(e,y(S(t),1),!0):tn(e,t)}function tn(t,n){var r=o("selectHelper");ut.build();if(r){var i=m(t).col;if(i>=0&&i<st){var s=ut.rect(0,i,0,i,R),u=Qt(t,t),a=Qt(t,n);if(a>u){s.top=u,s.height=a-u,s.left+=2,s.width-=5;if(e.isFunction(r)){var f=r(t,n);f&&(s.position="absolute",X=e(f).css(s).appendTo(R))}else s.isStart=!0,s.isEnd=!0,X=e(d({title:"",start:t,end:n,className:["fc-select-helper"],editable:!1},s)),X.css("opacity",o("dragOpacity"));X&&(It(X),R.append(X),B(X,s.width,!0),j(X,s.height,!0))}}}else zt(t,n)}function nn(){f(),X&&(X.remove(),X=null)}function rn(t){if(t.which==1&&o("selectable")){c(t);var n;at.start(function(e,t){nn();if(e&&e.col==t.col&&!Jt(e)){var r=Kt(t),i=Kt(e);n=[r,w(S(r),nt),i,w(S(i),nt)].sort($),tn(n[0],n[3])}else n=null},t),e(document).one("mouseup",function(e){at.stop(),n&&(+n[0]==+n[1]&&sn(n[0],!1,e),l(n[0],n[3],!1,e))})}}function sn(e,t,n){u("dayClick",A[m(e).col],e,t,n)}function on(e,t,n){at.start(function(e){f();if(e)if(Jt(e))Ut(e.row,e.col,e.row,e.col);else{var t=Kt(e),n=w(S(t),o("defaultEventMinutes"));zt(t,n)}},t)}function un(e,t,n){var r=at.stop();f(),r&&u("drop",e,Kt(r),Jt(r),t,n)}var s=this;s.renderAgenda=Et,s.setWidth=Ht,s.setHeight=Pt,s.afterRender=jt,s.defaultEventEnd=Yt,s.timePosition=Qt,s.getIsCellAllDay=Jt,s.allDayRow=Gt,s.getCoordinateGrid=function(){return ut},s.getHoverListener=function(){return at},s.colLeft=Wt,s.colRight=Vt,s.colContentLeft=Xt,s.colContentRight=$t,s.getDaySegmentContainer=function(){return H},s.getSlotSegmentContainer=function(){return z},s.getMinMinute=function(){return vt},s.getMaxMinute=function(){return mt},s.getSlotContainer=function(){return R},s.getRowCnt=function(){return 1},s.getColCnt=function(){return st},s.getColWidth=function(){return Q},s.getSnapHeight=function(){return it},s.getSnapMinutes=function(){return nt},s.defaultSelectionEnd=Zt,s.renderDayOverlay=Rt,s.renderSelection=en,s.clearSelection=nn,s.reportDayClick=sn,s.dragStart=on,s.dragStop=un,xt.call(s,n,r,i),At.call(s),Lt.call(s),ht.call(s);var o=s.opt,u=s.trigger,a=s.renderOverlay,f=s.clearOverlays,l=s.reportSelection,c=s.unselect,p=s.daySelectionMousedown,d=s.slotSegHtml,v=s.cellToDate,m=s.dateToCell,g=s.rangeToSegments,b=r.formatDate,T,N,C,k,A,O,M,_,D,P,H,F,I,q,R,z,W,X,V,J,K,Q,et,tt,nt,rt,it,st,ot,ut,at,ft,lt,ct={},pt,dt,vt,mt,gt,yt,bt,wt;Y(n.addClass("fc-agenda")),ut=new Ot(function(t,n){function l(e){return Math.max(a,Math.min(f,e))}var r,i,s;C.each(function(t,o){r=e(o),i=r.offset().left,t&&(s[1]=i),s=[i],n[t]=s}),s[1]=i+r.outerWidth(),o("allDaySlot")&&(r=I,i=r.offset().top,t[0]=[i,i+r.outerHeight()]);var u=R.offset().top,a=q.offset().top,f=a+q.outerHeight();for(var c=0;c<ot*rt;c++)t.push([l(u+it*c),l(u+it*(c+1))])}),at=new Mt(ut),ft=new Dt(function(e){return O.eq(e)}),lt=new Dt(function(e){return M.eq(e)})}function ht(){function V(e,t){var n,i=e.length,s=[],o=[];for(n=0;n<i;n++)e[n].allDay?s.push(e[n]):o.push(e[n]);r("allDaySlot")&&(R(s,t),f()),Y(J(o),t)}function $(){l().empty(),c().empty()}function J(t){var n=N(),r=d(),i=p(),s,o=e.map(t,Q),u,a,f,l,c=[];for(u=0;u<n;u++){s=x(0,u),w(s,r),l=K(t,o,s,w(S(s),i-r)),l=pt(l);for(a=0;a<l.length;a++)f=l[a],f.col=u,c.push(f)}return c}function K(e,t,n,r){var i=[],s,o=e.length,u,a,f,l,c,h,p;for(s=0;s<o;s++)u=e[s],a=u.start,f=t[s],f>n&&a<r&&(a<n?(l=S(n),h=!1):(l=a,h=!0),f>r?(c=S(r),p=!1):(c=f,p=!0),i.push({event:u,start:l,end:c,isStart:h,isEnd:p}));return i.sort(St)}function Q(e){return e.end?S(e.end):w(S(e.start),r("defaultEventMinutes"))}function Y(n,s){var o,u=n.length,a,f,l,h,p,d,v,g,y,w,S="",x,T,N,C,k,L=c(),A=r("isRTL");for(o=0;o<u;o++)a=n[o],f=a.event,l=m(a.start,a.start),h=m(a.start,a.end),p=b(a.col),d=E(a.col),v=d-p,d-=v*.025,v=d-p,g=v*(a.forwardCoord-a.backwardCoord),r("slotEventOverlap")&&(g=Math.max((g-10)*2,g)),A?(w=d-a.backwardCoord*v,y=w-g):(y=p+a.backwardCoord*v,w=y+g),y=Math.max(y,p),w=Math.min(w,d),g=w-y,a.top=l,a.left=y,a.outerWidth=g,a.outerHeight=h-l,S+=Z(f,a);L[0].innerHTML=S,x=L.children();for(o=0;o<u;o++)a=n[o],f=a.event,T=e(x[o]),N=i("eventRender",f,f,T),N===!1?T.remove():(N&&N!==!0&&(T.remove(),T=e(N).css({position:"absolute",top:a.top,left:a.left}).appendTo(L)),a.element=T,f._id===s?et(f,T,a):T[0]._fci=o,O(f,T));H(L,n,et);for(o=0;o<u;o++){a=n[o];if(T=a.element)a.vsides=U(T,!0),a.hsides=F(T,!0),C=T.find(".fc-event-title"),C.length&&(a.contentTop=C[0].offsetTop)}for(o=0;o<u;o++){a=n[o];if(T=a.element)T[0].style.width=Math.max(0,a.outerWidth-a.hsides)+"px",k=Math.max(0,a.outerHeight-a.vsides),T[0].style.height=k+"px",f=a.event,a.contentTop!==t&&k-a.contentTop<10&&(T.find("div.fc-event-time").text(W(f.start,r("timeFormat"))+" - "+f.title),T.find("div.fc-event-title").remove()),i("eventAfterRender",f,f,T)}}function Z(e,t){var n="<",i=e.url,u=tt(e,r),a=["fc-event","fc-event-vert"];return s(e)&&a.push("fc-event-draggable"),t.isStart&&a.push("fc-event-start"),t.isEnd&&a.push("fc-event-end"),a=a.concat(e.className),e.source&&(a=a.concat(e.source.className||[])),i?n+="a href='"+G(e.url)+"'":n+="div",n+=" class='"+a.join(" ")+"'"+" style="+"'"+"position:absolute;"+"top:"+t.top+"px;"+"left:"+t.left+"px;"+u+"'"+">"+"<div class='fc-event-inner'>"+"<div class='fc-event-time'>"+G(X(e.start,e.end,r("timeFormat")))+"</div>"+"<div class='fc-event-title'>"+G(e.title||"")+"</div>"+"</div>"+"<div class='fc-event-bg'></div>",t.isEnd&&o(e)&&(n+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),n+="</"+(i?"a":"div")+">",n}function et(e,t,n){var r=t.find("div.fc-event-time");s(e)&&rt(e,t,r),n.isEnd&&o(e)&&it(e,t,r),a(e,t)}function nt(e,t,n){function b(){a||(t.width(o).height("").draggable("option","grid",null),a=!0)}var s=n.isStart,o,u,a=!0,f,l=h(),c=C(),p=k(),m=L(),g=d();t.draggable({opacity:r("dragOpacity","month"),revertDuration:r("dragRevertDuration"),start:function(n,h){i("eventDragStart",t,e,n,h),_(e,t),o=t.width(),l.start(function(n,i){q();if(n){u=!1;var o=x(0,i.col),l=x(0,n.col);f=T(l,o),n.row?s?a&&(t.width(c-10),j(t,p*Math.round((e.end?(e.end-e.start)/v:r("defaultEventMinutes"))/m)),t.draggable("option","grid",[c,1]),a=!1):u=!0:(I(y(S(e.start),f),y(D(e),f)),b()),u=u||a&&!f}else b(),u=!0;t.draggable("option","revert",u)},n,"drag")},stop:function(n,r){l.stop(),q(),i("eventDragStop",t,e,n,r);if(u)b(),t.css("filter",""),M(e,t);else{var s=0;a||(s=Math.round((t.offset().top-A().offset().top)/p)*m+g-(e.start.getHours()*60+e.start.getMinutes())),P(this,e,f,s,a,n,r)}}})}function rt(e,t,s){function B(){q(),p&&(v?(s.hide(),t.draggable("option","grid",null),I(y(S(e.start),A),y(D(e),A))):(j(O),s.css("display",""),t.draggable("option","grid",[a,f])))}function j(t){var n=w(S(e.start),t),i;e.end&&(i=w(S(e.end),t)),s.text(X(n,i,r("timeFormat")))}var o=n.getCoordinateGrid(),u=N(),a=C(),f=k(),l=L(),c,h,p,d,v,m,b,E,A,O,H;t.draggable({scroll:!1,grid:[a,f],axis:u==1?"y":!1,opacity:r("dragOpacity"),revertDuration:r("dragRevertDuration"),start:function(n,r){i("eventDragStart",t,e,n,r),_(e,t),o.build(),c=t.position(),h=o.cell(n.pageX,n.pageY),p=d=!0,v=m=g(h),b=E=0,A=0,O=H=0},drag:function(e,n){var r=o.cell(e.pageX,e.pageY);p=!!r;if(p){v=g(r),b=Math.round((n.position.left-c.left)/a);if(b!=E){var i=x(0,h.col),s=h.col+b;s=Math.max(0,s),s=Math.min(u-1,s);var y=x(0,s);A=T(y,i)}v||(O=Math.round((n.position.top-c.top)/f)*l)}if(p!=d||v!=m||b!=E||O!=H)B(),d=p,m=v,E=b,H=O;t.draggable("option","revert",!p)},stop:function(n,r){q(),i("eventDragStop",t,e,n,r),p&&(v||A||O)?P(this,e,A,v?0:O,v,n,r):(p=!0,v=!1,b=0,A=0,O=0,B(),t.css("filter",""),t.css(c),M(e,t))}})}function it(e,t,n){var s,o,a=k(),f=L();t.resizable({handles:{s:".ui-resizable-handle"},grid:a,start:function(n,r){s=o=0,_(e,t),i("eventResizeStart",this,e,n,r)},resize:function(i,l){s=Math.round((Math.max(a,t.height())-l.originalSize.height)/a),s!=o&&(n.text(X(e.start,!s&&!e.end?null:w(u(e),f*s),r("timeFormat"))),o=s)},stop:function(n,r){i("eventResizeStop",this,e,n,r),s?B(this,e,0,f*s,n,r):M(e,t)}})}var n=this;n.renderEvents=V,n.clearEvents=$,n.slotSegHtml=Z,Tt.call(n);var r=n.opt,i=n.trigger,s=n.isEventDraggable,o=n.isEventResizable,u=n.eventEnd,a=n.eventElementHandlers,f=n.setHeight,l=n.getDaySegmentContainer,c=n.getSlotSegmentContainer,h=n.getHoverListener,p=n.getMaxMinute,d=n.getMinMinute,m=n.timePosition,g=n.getIsCellAllDay,b=n.colContentLeft,E=n.colContentRight,x=n.cellToDate,N=n.getColCnt,C=n.getColWidth,k=n.getSnapHeight,L=n.getSnapMinutes,A=n.getSlotContainer,O=n.reportEventElement,M=n.showEvents,_=n.hideEvents,P=n.eventDrop,B=n.eventResize,I=n.renderDayOverlay,q=n.clearOverlays,R=n.renderDayEvents,z=n.calendar,W=z.formatDate,X=z.formatDates;n.draggableDayEvent=nt}function pt(e){var t=dt(e),n=t[0],r;vt(t);if(n){for(r=0;r<n.length;r++)mt(n[r]);for(r=0;r<n.length;r++)gt(n[r],0,0)}return yt(t)}function dt(e){var t=[],n,r,i;for(n=0;n<e.length;n++){r=e[n];for(i=0;i<t.length;i++)if(!bt(r,t[i]).length)break;(t[i]||(t[i]=[])).push(r)}return t}function vt(e){var t,n,r,i,s;for(t=0;t<e.length;t++){n=e[t];for(r=0;r<n.length;r++){i=n[r],i.forwardSegs=[];for(s=t+1;s<e.length;s++)bt(i,e[s],i.forwardSegs)}}}function mt(e){var n=e.forwardSegs,r=0,i,s;if(e.forwardPressure===t){for(i=0;i<n.length;i++)s=n[i],mt(s),r=Math.max(r,1+s.forwardPressure);e.forwardPressure=r}}function gt(e,n,r){var i=e.forwardSegs,s;if(e.forwardCoord===t){i.length?(i.sort(Et),gt(i[0],n+1,r),e.forwardCoord=i[0].backwardCoord):e.forwardCoord=1,e.backwardCoord=e.forwardCoord-(e.forwardCoord-r)/(n+1);for(s=0;s<i.length;s++)gt(i[s],0,e.forwardCoord)}}function yt(e){var t=[],n,r,i;for(n=0;n<e.length;n++){r=e[n];for(i=0;i<r.length;i++)t.push(r[i])}return t}function bt(e,t,n){n=n||[];for(var r=0;r<t.length;r++)wt(e,t[r])&&n.push(t[r]);return n}function wt(e,t){return e.end>t.start&&e.start<t.end}function Et(e,t){return t.forwardPressure-e.forwardPressure||(e.backwardCoord||0)-(t.backwardCoord||0)||St(e,t)}function St(e,t){return e.start-t.start||t.end-t.start-(e.end-e.start)||(e.event.title||"").localeCompare(t.event.title)}function xt(n,r,i){function p(t,n){var r=h[t];return e.isPlainObject(r)?Q(r,n||i):r}function d(e,t){return r.trigger.apply(r,[e,t||s].concat(Array.prototype.slice.call(arguments,2),[s]))}function v(e){var t=e.source||{};return rt(e.startEditable,t.startEditable,p("eventStartEditable"),e.editable,t.editable,p("editable"))&&!p("disableDragging")}function m(e){var t=e.source||{};return rt(e.durationEditable,t.durationEditable,p("eventDurationEditable"),e.editable,t.editable,p("editable"))&&!p("disableResizing")}function g(e){f={};var t,n=e.length,r;for(t=0;t<n;t++)r=e[t],f[r._id]?f[r._id].push(r):f[r._id]=[r]}function b(){f={},l={},c=[]}function E(e){return e.end?S(e.end):o(e)}function x(e,t){c.push({event:e,element:t}),l[e._id]?l[e._id].push(t):l[e._id]=[t]}function N(){e.each(c,function(e,t){s.trigger("eventDestroy",t.event,t.event,t.element)})}function C(e,t){t.click(function(n){if(!t.hasClass("ui-draggable-dragging")&&!t.hasClass("ui-resizable-resizing"))return d("eventClick",this,e,n)}).hover(function(t){d("eventMouseover",this,e,t)},function(t){d("eventMouseout",this,e,t)})}function k(e,t){A(e,t,"show")}function L(e,t){A(e,t,"hide")}function A(e,t,n){var r=l[e._id],i,s=r.length;for(i=0;i<s;i++)(!t||r[i][0]!=t[0])&&r[i][n]()}function O(e,t,n,r,i,s,o){var u=t.allDay,l=t._id;_(f[l],n,r,i),d("eventDrop",e,t,n,r,i,function(){_(f[l],-n,-r,u),a(l)},s,o),a(l)}function M(e,t,n,r,i,s){var o=t._id;D(f[o],n,r),d("eventResize",e,t,n,r,function(){D(f[o],-n,-r),a(o)},i,s),a(o)}function _(e,n,r,i){r=r||0;for(var s,o=e.length,a=0;a<o;a++)s=e[a],i!==t&&(s.allDay=i),w(y(s.start,n,!0),r),s.end&&(s.end=w(y(s.end,n,!0),r)),u(s,h)}function D(e,t,n){n=n||0;for(var r,i=e.length,s=0;s<i;s++)r=e[s],r.end=w(y(E(r),t,!0),n),u(r,h)}function q(e){return typeof e=="object"&&(e=e.getDay()),H[e]}function R(){return B}function U(e,t,n){t=t||1;while(H[(e.getDay()+(n?t:0)+7)%7])y(e,t)}function z(){var e=W.apply(null,arguments),t=X(e),n=V(t);return n}function W(e,t){var n=s.getColCnt(),r=I?-1:1,i=I?n-1:0;typeof e=="object"&&(t=e.col,e=e.row);var o=e*n+(t*r+i);return o}function X(e){var t=s.visStart.getDay();return e+=j[t],Math.floor(e/B)*7+F[(e%B+B)%B]-t}function V(e){var t=S(s.visStart);return y(t,e),t}function $(e){var t=J(e),n=K(t),r=G(n);return r}function J(e){return T(e,s.visStart)}function K(e){var t=s.visStart.getDay();return e+=t,Math.floor(e/7)*B+j[(e%7+7)%7]-j[t]}function G(e){var t=s.getColCnt(),n=I?-1:1,r=I?t-1:0,i=Math.floor(e/t),o=(e%t+t)%t*n+r;return{row:i,col:o}}function Y(e,t){var n=s.getRowCnt(),r=s.getColCnt(),i=[],o=J(e),u=J(t),a=K(o),f=K(u)-1;for(var l=0;l<n;l++){var c=l*r,h=c+r-1,p=Math.max(a,c),d=Math.min(f,h);if(p<=d){var v=G(p),m=G(d),g=[v.col,m.col].sort(),y=X(p)==o,b=X(d)+1==u;i.push({row:l,leftCol:g[0],rightCol:g[1],isStart:y,isEnd:b})}}return i}var s=this;s.element=n,s.calendar=r,s.name=i,s.opt=p,s.trigger=d,s.isEventDraggable=v,s.isEventResizable=m,s.setEventData=g,s.clearEventData=b,s.eventEnd=E,s.reportEventElement=x,s.triggerEventDestroy=N,s.eventElementHandlers=C,s.showEvents=k,s.hideEvents=L,s.eventDrop=O,s.eventResize=M;var o=s.defaultEventEnd,u=r.normalizeEvent,a=r.reportEventChange,f={},l={},c=[],h=r.options;s.isHiddenDay=q,s.skipHiddenDays=U,s.getCellsPerWeek=R,s.dateToCell=$,s.dateToDayOffset=J,s.dayOffsetToCellOffset=K,s.cellOffsetToCell=G,s.cellToDate=z,s.cellToCellOffset=W,s.cellOffsetToDayOffset=X,s.dayOffsetToDate=V,s.rangeToSegments=Y;var P=p("hiddenDays")||[],H=[],B,j=[],F=[],I=p("isRTL");(function(){p("weekends")===!1&&P.push(0,6);for(var t=0,n=0;t<7;t++)j[t]=n,H[t]=e.inArray(t,P)!=-1,H[t]||(F[n]=t,n++);B=n;if(!B)throw"invalid hiddenDays"})()}function Tt(){function q(e,t){var n=U(e,!1,!0);Ct(n,function(e,t){u(e.event,t)}),st(n,t),Ct(n,function(e,t){r("eventAfterRender",e.event,e.event,t)})}function R(e,t,n){var r=U([e],!0,!1),i=[];return Ct(r,function(e,r){e.row===t&&r.css("top",n),i.push(r[0])}),i}function U(t,n,r){var i=N(),s=n?e("<div/>"):i,o=z(t),u,a;return X(o),u=V(o),s[0].innerHTML=u,a=s.children(),n&&i.append(a),K(o,a),Ct(o,function(e,t){e.hsides=F(t,!0)}),Ct(o,function(e,t){t.width(Math.max(0,e.outerWidth-e.hsides))}),Ct(o,function(e,t){e.outerHeight=t.outerHeight(!0)}),Q(o,r),o}function z(e){var t=[];for(var n=0;n<e.length;n++){var r=W(e[n]);t.push.apply(t,r)}return t}function W(e){var t=e.start,n=D(e),r=M(t,n);for(var i=0;i<r.length;i++)r[i].event=e;return r}function X(e){var t=n("isRTL");for(var r=0;r<e.length;r++){var i=e[r],s=(t?i.isEnd:i.isStart)?w:g,o=(t?i.isStart:i.isEnd)?E:b,u=s(i.leftCol),a=o(i.rightCol);i.left=u,i.outerWidth=a-u}}function V(e){var t="";for(var n=0;n<e.length;n++)t+=$(e[n]);return t}function $(e){var t="",r=n("isRTL"),o=e.event,u=o.url,a=["fc-event","fc-event-hori"];i(o)&&a.push("fc-event-draggable"),e.isStart&&a.push("fc-event-start"),e.isEnd&&a.push("fc-event-end"),a=a.concat(o.className),o.source&&(a=a.concat(o.source.className||[]));var f=tt(o,n);return u?t+="<a href='"+G(u)+"'":t+="<div",t+=" class='"+a.join(" ")+"'"+" style="+"'"+"position:absolute;"+"left:"+e.left+"px;"+f+"'"+">"+"<div class='fc-event-inner'>",!o.allDay&&e.isStart&&(t+="<span class='fc-event-time'>"+G(C(o.start,o.end,n("timeFormat")))+"</span>"),t+="<span class='fc-event-title'>"+G(o.title||"")+"</span>"+"</div>",e.isEnd&&s(o)&&(t+="<div class='ui-resizable-handle ui-resizable-"+(r?"w":"e")+"'>"+"&nbsp;&nbsp;&nbsp;"+"</div>"),t+="</"+(u?"a":"div")+">",t}function K(t,n){for(var i=0;i<t.length;i++){var s=t[i],o=s.event,u=n.eq(i),a=r("eventRender",o,o,u);a===!1?u.remove():(a&&a!==!0&&(a=e(a).css({position:"absolute",left:s.left}),u.replaceWith(a),u=a),s.element=u)}}function Q(e,t){var n=Z(e),r=it(),i=[];if(t)for(var s=0;s<r.length;s++)r[s].height(n[s]);for(var s=0;s<r.length;s++)i.push(r[s].position().top);Ct(e,function(e,t){t.css("top",i[e.row]+e.top)})}function Z(e){var t=p(),n=d(),r=[],i=et(e);for(var s=0;s<t;s++){var o=i[s],u=[];for(var a=0;a<n;a++)u.push(0);for(var f=0;f<o.length;f++){var l=o[f];l.top=J(u.slice(l.leftCol,l.rightCol+1));for(var a=l.leftCol;a<=l.rightCol;a++)u[a]=l.top+l.outerHeight}r.push(J(u))}return r}function et(e){var t=p(),n=[],r,i,s;for(r=0;r<e.length;r++)i=e[r],s=i.row,i.element&&(n[s]?n[s].push(i):n[s]=[i]);for(s=0;s<t;s++)n[s]=nt(n[s]||[]);return n}function nt(e){var t=[],n=rt(e);for(var r=0;r<n.length;r++)t.push.apply(t,n[r]);return t}function rt(e){e.sort(kt);var t=[];for(var n=0;n<e.length;n++){var r=e[n];for(var i=0;i<t.length;i++)if(!Nt(r,t[i]))break;t[i]?t[i].push(r):t[i]=[r]}return t}function it(){var e,t=p(),n=[];for(e=0;e<t;e++)n[e]=m(e).find("div.fc-day-content > div");return n}function st(e,t){var n=N();Ct(e,function(e,n,r){var i=e.event;i._id===t?ot(i,n,e):n[0]._fci=r}),H(n,e,ot)}function ot(e,n,r){i(e)&&t.draggableDayEvent(e,n,r),r.isEnd&&s(e)&&t.resizableDayEvent(e,n,r),a(e,n)}function ut(e,t){var i=O(),s;t.draggable({delay:50,opacity:n("dragOpacity"),revertDuration:n("dragRevertDuration"),start:function(n,o){r("eventDragStart",t,e,n,o),l(e,t),i.start(function(n,r,i,o){t.draggable("option","revert",!n||!i&&!o),L();if(n){var u=_(r),a=_(n);s=T(a,u),k(y(S(e.start),s),y(D(e),s))}else s=0},n,"drag")},stop:function(n,o){i.stop(),L(),r("eventDragStop",t,e,n,o),s?c(this,e,s,0,e.allDay,n,o):(t.css("filter",""),f(e,t))}})}function at(t,i,s){var u=n("isRTL"),a=u?"w":"e",c=i.find(".ui-resizable-"+a),v=!1;Y(i),i.mousedown(function(e){e.preventDefault()}).click(function(e){v&&(e.preventDefault(),e.stopImmediatePropagation())}),c.mousedown(function(n){function x(n){r("eventResizeStop",this,t,n),e("body").css("cursor",""),u.stop(),L(),b&&h(this,t,b,0,n),setTimeout(function(){v=!1},0)}if(n.which!=1)return;v=!0;var u=O(),c=p(),m=d(),g=i.css("top"),b,w,E=e.extend({},t),S=I(j(t.start));A(),e("body").css("cursor",a+"-resize").one("mouseup",x),r("eventResizeStart",this,t,n),u.start(function(n,r){if(n){var i=P(r),u=P(n);u=Math.max(u,S),b=B(u)-B(i);if(b){E.end=y(o(t),b,!0);var c=w;w=R(E,s.row,g),w=e(w),w.find("*").css("cursor",a+"-resize"),c&&c.remove(),l(t)}else w&&(f(t),w.remove(),w=null);L(),k(t.start,y(D(t),b))}},n)})}var t=this;t.renderDayEvents=q,t.draggableDayEvent=ut,t.resizableDayEvent=at;var n=t.opt,r=t.trigger,i=t.isEventDraggable,s=t.isEventResizable,o=t.eventEnd,u=t.reportEventElement,a=t.eventElementHandlers,f=t.showEvents,l=t.hideEvents,c=t.eventDrop,h=t.eventResize,p=t.getRowCnt,d=t.getColCnt,v=t.getColWidth,m=t.allDayRow,g=t.colLeft,b=t.colRight,w=t.colContentLeft,E=t.colContentRight,x=t.dateToCell,N=t.getDaySegmentContainer,C=t.calendar.formatDates,k=t.renderDayOverlay,L=t.clearOverlays,A=t.clearSelection,O=t.getHoverListener,M=t.rangeToSegments,_=t.cellToDate,P=t.cellToCellOffset,B=t.cellOffsetToDayOffset,j=t.dateToDayOffset,I=t.dayOffsetToCellOffset}function Nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];if(r.leftCol<=e.rightCol&&r.rightCol>=e.leftCol)return!0}return!1}function Ct(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=r.element;i&&t(r,i,n)}}function kt(e,t){return t.rightCol-t.leftCol-(e.rightCol-e.leftCol)||t.event.allDay-e.event.allDay||e.event.start-t.event.start||(e.event.title||"").localeCompare(t.event.title)}function Lt(){function a(e,t,n){f(),t||(t=i(e,n)),s(e,t,n),l(e,t,n)}function f(e){u&&(u=!1,o(),r("unselect",null,e))}function l(e,t,n,i){u=!0,r("select",null,e,t,n,i)}function c(r){var i=t.cellToDate,u=t.getIsCellAllDay,a=t.getHoverListener(),c=t.reportDayClick;if(r.which==1&&n("selectable")){f(r);var h=this,p;a.start(function(e,t){o(),e&&u(e)?(p=[i(t),i(e)].sort($),s(p[0],p[1],!0)):p=null},r),e(document).one("mouseup",function(e){a.stop(),p&&(+p[0]==+p[1]&&c(p[0],!0,e),l(p[0],p[1],!0,e))})}}var t=this;t.select=a,t.unselect=f,t.reportSelection=l,t.daySelectionMousedown=c;var n=t.opt,r=t.trigger,i=t.defaultSelectionEnd,s=t.renderSelection,o=t.clearSelection,u=!1;n("selectable")&&n("unselectAuto")&&e(document).mousedown(function(t){var r=n("unselectCancel");if(r&&e(t.target).parents(r).length)return;f(t)})}function At(){function i(t,i){var s=r.shift();return s||(s=e("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),s[0].parentNode!=i[0]&&s.appendTo(i),n.push(s.css(t).show()),s}function s(){var e;while(e=n.shift())r.push(e.hide().unbind())}var t=this;t.renderOverlay=i,t.clearOverlays=s;var n=[],r=[]}function Ot(e){var t=this,n,r;t.build=function(){n=[],r=[],e(n,r)},t.cell=function(e,t){var i=n.length,s=r.length,o,u=-1,a=-1;for(o=0;o<i;o++)if(t>=n[o][0]&&t<n[o][1]){u=o;break}for(o=0;o<s;o++)if(e>=r[o][0]&&e<r[o][1]){a=o;break}return u>=0&&a>=0?{row:u,col:a}:null},t.rect=function(e,t,i,s,o){var u=o.offset();return{top:n[e][0]-u.top,left:r[t][0]-u.left,width:r[s][1]-r[t][0],height:n[i][1]-n[e][0]}}}function Mt(t){function u(e){_t(e);var n=t.cell(e.pageX,e.pageY);if(!n!=!o||n&&(n.row!=o.row||n.col!=o.col))n?(s||(s=n),i(n,s,n.row-s.row,n.col-s.col)):i(n,s),o=n}var n=this,r,i,s,o;n.start=function(n,a,f){i=n,s=o=null,t.build(),u(a),r=f||"mousemove",e(document).bind(r,u)},n.stop=function(){return e(document).unbind(r,u),o}}function _t(e){e.pageX===t&&(e.pageX=e.originalEvent.pageX,e.pageY=e.originalEvent.pageY)}function Dt(e){function o(t){return r[t]=r[t]||e(t)}var n=this,r={},i={},s={};n.left=function(e){return i[e]=i[e]===t?o(e).position().left:i[e]},n.right=function(e){return s[e]=s[e]===t?n.left(e)+o(e).width():s[e]},n.clear=function(){r={},i={},s={}}}var n={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*",handleWindowResize:!0},r={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},i=e.fullCalendar={version:"1.6.4"},s=i.views={};e.fn.fullCalendar=function(i){if(typeof i=="string"){var s=Array.prototype.slice.call(arguments,1),o;return this.each(function(){var n=e.data(this,"fullCalendar");if(n&&e.isFunction(n[i])){var r=n[i].apply(n,s);o===t&&(o=r),i=="destroy"&&e.removeData(this,"fullCalendar")}}),o!==t?o:this}i=i||{};var a=i.eventSources||[];return delete i.eventSources,i.events&&(a.push(i.events),delete i.events),i=e.extend(!0,{},n,i.isRTL||i.isRTL===t&&n.isRTL?r:{},i),this.each(function(t,n){var r=e(n),s=new u(r,i,a);r.data("fullCalendar",s),s.render()}),this},i.sourceNormalizers=[],i.sourceFetchers=[];var f={dataType:"json",cache:!1},l=1;i.addDays=y,i.cloneDate=S,i.parseDate=C,i.parseISO8601=k,i.parseTime=L,i.formatDate=A,i.formatDates=O;var h=["sun","mon","tue","wed","thu","fri","sat"],p=864e5,d=36e5,v=6e4,M={s:function(e){return e.getSeconds()},ss:function(e){return K(e.getSeconds())},m:function(e){return e.getMinutes()},mm:function(e){return K(e.getMinutes())},h:function(e){return e.getHours()%12||12},hh:function(e){return K(e.getHours()%12||12)},H:function(e){return e.getHours()},HH:function(e){return K(e.getHours())},d:function(e){return e.getDate()},dd:function(e){return K(e.getDate())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return e.getMonth()+1},MM:function(e){return K(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},yy:function(e){return(e.getFullYear()+"").substring(2)},yyyy:function(e){return e.getFullYear()},t:function(e){return e.getHours()<12?"a":"p"},tt:function(e){return e.getHours()<12?"am":"pm"},T:function(e){return e.getHours()<12?"A":"P"},TT:function(e){return e.getHours()<12?"AM":"PM"},u:function(e){return A(e,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(e){var t=e.getDate();return t>10&&t<20?"th":["st","nd","rd"][t%10-1]||"th"},w:function(e,t){return t.weekNumberCalculation(e)},W:function(e){return _(e)}};i.dateFormatters=M,i.applyAll=nt,s.month=it,s.basicWeek=st,s.basicDay=ot,o({weekMode:"fixed"}),s.agendaWeek=ft,s.agendaDay=lt,o({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24,slotEventOverlap:!0})})(jQuery);