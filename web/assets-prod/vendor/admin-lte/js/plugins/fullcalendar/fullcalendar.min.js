/*!
 * FullCalendar v1.6.4
 * Docs & License: http://arshaw.com/fullcalendar/
 * (c) 2013 Adam Shaw
 */

(function(e,t){function n(t){e.extend(!0,St,t)}function r(n,r,f){function l(e){it?m()&&(N(),x(e)):c()}function c(){st=r.theme?"ui":"fc",n.addClass("fc"),r.isRTL?n.addClass("fc-rtl"):n.addClass("fc-ltr"),r.theme&&n.addClass("ui-widget"),it=e("<div class='fc-content' style='position:relative'/>").prependTo(n),nt=new i(tt,r),rt=nt.render(),rt&&n.prepend(rt),y(r.defaultView),r.handleWindowResize&&e(window).resize(k),g()||p()}function p(){setTimeout(function(){!ot.start&&g()&&S()},0)}function d(){ot&&(et("viewDestroy",ot,ot,ot.element),ot.triggerEventDestroy()),e(window).unbind("resize",k),nt.destroy(),it.remove(),n.removeClass("fc fc-rtl ui-widget")}function m(){return n.is(":visible")}function g(){return e("body").is(":visible")}function y(e){ot&&e==ot.name||E(e)}function E(t){dt++,ot&&(et("viewDestroy",ot,ot,ot.element),R(),ot.triggerEventDestroy(),Q(),ot.element.remove(),nt.deactivateButton(ot.name)),nt.activateButton(t),ot=new Nt[t](e("<div class='fc-view fc-view-"+t+"' style='position:relative'/>").appendTo(it),tt),S(),G(),dt--}function S(e){(!ot.start||e||ot.start>vt||vt>=ot.end)&&m()&&x(e)}function x(e){dt++,ot.start&&(et("viewDestroy",ot,ot,ot.element),R(),_()),Q(),ot.render(vt,e||0),C(),G(),(ot.afterRender||H)(),F(),I(),et("viewRender",ot,ot,ot.element),ot.trigger("viewDisplay",ht),dt--,D()}function T(){m()&&(R(),_(),N(),C(),O())}function N(){at=r.contentHeight?r.contentHeight:r.height?r.height-(rt?rt.height():0)-M(it):Math.round(it.width()/Math.max(r.aspectRatio,.5))}function C(){at===t&&N(),dt++,ot.setHeight(at),ot.setWidth(it.width()),dt--,ut=n.outerWidth()}function k(){if(!dt)if(ot.start){var e=++pt;setTimeout(function(){e==pt&&!dt&&m()&&ut!=(ut=n.outerWidth())&&(dt++,T(),ot.trigger("windowResize",ht),dt--)},200)}else p()}function L(){_(),P()}function A(e){_(),O(e)}function O(e){m()&&(ot.setEventData(mt),ot.renderEvents(mt,e),ot.trigger("eventAfterAllRender"))}function _(){ot.triggerEventDestroy(),ot.clearEvents(),ot.clearEventData()}function D(){!r.lazyFetching||lt(ot.visStart,ot.visEnd)?P():O()}function P(){ct(ot.visStart,ot.visEnd)}function B(e){mt=e,O()}function j(e){A(e)}function F(){nt.updateTitle(ot.title)}function I(){var e=new Date;e>=ot.start&&ot.end>e?nt.disableButton("today"):nt.enableButton("today")}function q(e,n,r){ot.select(e,n,r===t?!0:r)}function R(){ot&&ot.unselect()}function U(){S(-1)}function z(){S(1)}function W(){o(vt,-1),S()}function X(){o(vt,1),S()}function V(){vt=new Date,S()}function $(e,t,n){e instanceof Date?vt=h(e):v(vt,e,t,n),S()}function J(e,n,r){e!==t&&o(vt,e),n!==t&&u(vt,n),r!==t&&a(vt,r),S()}function K(){return h(vt)}function Q(){it.css({width:"100%",height:it.height(),overflow:"hidden"})}function G(){it.css({width:"",height:"",overflow:""})}function Y(){return ot}function Z(e,n){return n===t?r[e]:(("height"==e||"contentHeight"==e||"aspectRatio"==e)&&(r[e]=n,T()),t)}function et(e,n){return r[e]?r[e].apply(n||ht,Array.prototype.slice.call(arguments,2)):t}var tt=this;tt.options=r,tt.render=l,tt.destroy=d,tt.refetchEvents=L,tt.reportEvents=B,tt.reportEventChange=j,tt.rerenderEvents=A,tt.changeView=y,tt.select=q,tt.unselect=R,tt.prev=U,tt.next=z,tt.prevYear=W,tt.nextYear=X,tt.today=V,tt.gotoDate=$,tt.incrementDate=J,tt.formatDate=function(e,t){return b(e,t,r)},tt.formatDates=function(e,t,n){return w(e,t,n,r)},tt.getDate=K,tt.getView=Y,tt.option=Z,tt.trigger=et,s.call(tt,r,f);var nt,rt,it,st,ot,ut,at,ft,lt=tt.isFetchNeeded,ct=tt.fetchEvents,ht=n[0],pt=0,dt=0,vt=new Date,mt=[];v(vt,r.year,r.month,r.date),r.droppable&&e(document).bind("dragstart",function(t,n){var i=t.target,s=e(i);if(!s.parents(".fc").length){var o=r.dropAccept;(e.isFunction(o)?o.call(i,s):s.is(o))&&(ft=i,ot.dragStart(ft,t,n))}}).bind("dragstop",function(e,t){ft&&(ot.dragStop(ft,e,t),ft=null)})}function i(n,r){function i(){p=r.theme?"ui":"fc";var n=r.header;return n?d=e("<table class='fc-header' style='width:100%'/>").append(e("<tr/>").append(o("left")).append(o("center")).append(o("right"))):t}function s(){d.remove()}function o(t){var i=e("<td class='fc-header-"+t+"'/>"),s=r.header[t];return s&&e.each(s.split(" "),function(t){t>0&&i.append("<span class='fc-header-space'/>");var s;e.each(this.split(","),function(t,o){if("title"==o)i.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),s&&s.addClass(p+"-corner-right"),s=null;else{var u;if(n[o]?u=n[o]:Nt[o]&&(u=function(){l.removeClass(p+"-state-hover"),n.changeView(o)}),u){var a=r.theme?I(r.buttonIcons,o):null,f=I(r.buttonText,o),l=e("<span class='fc-button fc-button-"+o+" "+p+"-state-default'>"+(a?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+a+"'/>"+"</span>":f)+"</span>").click(function(){l.hasClass(p+"-state-disabled")||u()}).mousedown(function(){l.not("."+p+"-state-active").not("."+p+"-state-disabled").addClass(p+"-state-down")}).mouseup(function(){l.removeClass(p+"-state-down")}).hover(function(){l.not("."+p+"-state-active").not("."+p+"-state-disabled").addClass(p+"-state-hover")},function(){l.removeClass(p+"-state-hover").removeClass(p+"-state-down")}).appendTo(i);R(l),s||l.addClass(p+"-corner-left"),s=l}}}),s&&s.addClass(p+"-corner-right")}),i}function u(e){d.find("h2").html(e)}function a(e){d.find("span.fc-button-"+e).addClass(p+"-state-active")}function f(e){d.find("span.fc-button-"+e).removeClass(p+"-state-active")}function l(e){d.find("span.fc-button-"+e).addClass(p+"-state-disabled")}function c(e){d.find("span.fc-button-"+e).removeClass(p+"-state-disabled")}var h=this;h.render=i,h.destroy=s,h.updateTitle=u,h.activateButton=a,h.deactivateButton=f,h.disableButton=l,h.enableButton=c;var p,d=e([])}function s(n,r){function i(e,t){return!T||T>e||t>N}function s(e,t){T=e,N=t,P=[];var n=++M,r=O.length;_=r;for(var i=0;r>i;i++)o(O[i],n)}function o(t,r){u(t,function(i){if(r==M){if(i){n.eventDataTransform&&(i=e.map(i,n.eventDataTransform)),t.eventDataTransform&&(i=e.map(i,t.eventDataTransform));for(var s=0;i.length>s;s++)i[s].source=t,b(i[s]);P=P.concat(i)}_--,_||L(P)}})}function u(r,i){var s,o,a=Tt.sourceFetchers;for(s=0;a.length>s;s++){if(o=a[s](r,T,N,i),o===!0)return;if("object"==typeof o)return u(o,i),t}var f=r.events;if(f)e.isFunction(f)?(g(),f(h(T),h(N),function(e){i(e),y()})):e.isArray(f)?i(f):i();else{var l=r.url;if(l){var c,p=r.success,d=r.error,v=r.complete;c=e.isFunction(r.data)?r.data():r.data;var m=e.extend({},c||{}),b=X(r.startParam,n.startParam),w=X(r.endParam,n.endParam);b&&(m[b]=Math.round(+T/1e3)),w&&(m[w]=Math.round(+N/1e3)),g(),e.ajax(e.extend({},Ct,r,{data:m,success:function(t){t=t||[];var n=W(p,this,arguments);e.isArray(n)&&(t=n),i(t)},error:function(){W(d,this,arguments),i()},complete:function(){W(v,this,arguments),y()}}))}else i()}}function a(e){e=f(e),e&&(_++,o(e,M))}function f(n){return e.isFunction(n)||e.isArray(n)?n={events:n}:"string"==typeof n&&(n={url:n}),"object"==typeof n?(w(n),O.push(n),n):t}function l(t){O=e.grep(O,function(e){return!E(e,t)}),P=e.grep(P,function(e){return!E(e.source,t)}),L(P)}function c(e){var t,n,r=P.length,i=k().defaultEventEnd,s=e.start-e._start,o=e.end?e.end-(e._end||i(e)):0;for(t=0;r>t;t++)n=P[t],n._id==e._id&&n!=e&&(n.start=new Date(+n.start+s),n.end=e.end?n.end?new Date(+n.end+o):new Date(+i(n)+o):null,n.title=e.title,n.url=e.url,n.allDay=e.allDay,n.className=e.className,n.editable=e.editable,n.color=e.color,n.backgroundColor=e.backgroundColor,n.borderColor=e.borderColor,n.textColor=e.textColor,b(n));b(e),L(P)}function p(e,t){b(e),e.source||(t&&(A.events.push(e),e.source=A),P.push(e)),L(P)}function d(t){if(t){if(!e.isFunction(t)){var n=t+"";t=function(e){return e._id==n}}P=e.grep(P,t,!0);for(var r=0;O.length>r;r++)e.isArray(O[r].events)&&(O[r].events=e.grep(O[r].events,t,!0))}else{P=[];for(var r=0;O.length>r;r++)e.isArray(O[r].events)&&(O[r].events=[])}L(P)}function v(t){return e.isFunction(t)?e.grep(P,t):t?(t+="",e.grep(P,function(e){return e._id==t})):P}function g(){D++||C("loading",null,!0,k())}function y(){--D||C("loading",null,!1,k())}function b(e){var r=e.source||{},i=X(r.ignoreTimezone,n.ignoreTimezone);e._id=e._id||(e.id===t?"_fc"+kt++:e.id+""),e.date&&(e.start||(e.start=e.date),delete e.date),e._start=h(e.start=m(e.start,i)),e.end=m(e.end,i),e.end&&e.end<=e.start&&(e.end=null),e._end=e.end?h(e.end):null,e.allDay===t&&(e.allDay=X(r.allDayDefault,n.allDayDefault)),e.className?"string"==typeof e.className&&(e.className=e.className.split(/\s+/)):e.className=[]}function w(e){e.className?"string"==typeof e.className&&(e.className=e.className.split(/\s+/)):e.className=[];for(var t=Tt.sourceNormalizers,n=0;t.length>n;n++)t[n](e)}function E(e,t){return e&&t&&S(e)==S(t)}function S(e){return("object"==typeof e?e.events||e.url:"")||e}var x=this;x.isFetchNeeded=i,x.fetchEvents=s,x.addEventSource=a,x.removeEventSource=l,x.updateEvent=c,x.renderEvent=p,x.removeEvents=d,x.clientEvents=v,x.normalizeEvent=b;for(var T,N,C=x.trigger,k=x.getView,L=x.reportEvents,A={events:[]},O=[A],M=0,_=0,D=0,P=[],H=0;r.length>H;H++)f(r[H])}function o(e,t,n){return e.setFullYear(e.getFullYear()+t),n||c(e),e}function u(e,t,n){if(+e){var r=e.getMonth()+t,i=h(e);for(i.setDate(1),i.setMonth(r),e.setMonth(r),n||c(e);e.getMonth()!=i.getMonth();)e.setDate(e.getDate()+(i>e?1:-1))}return e}function a(e,t,n){if(+e){var r=e.getDate()+t,i=h(e);i.setHours(9),i.setDate(r),e.setDate(r),n||c(e),f(e,i)}return e}function f(e,t){if(+e)for(;e.getDate()!=t.getDate();)e.setTime(+e+(t>e?1:-1)*Ot)}function l(e,t){return e.setMinutes(e.getMinutes()+t),e}function c(e){return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e}function h(e,t){return t?c(new Date(+e)):new Date(+e)}function p(){var e,t=0;do e=new Date(1970,t++,1);while(e.getHours());return e}function d(e,t){return Math.round((h(e,!0)-h(t,!0))/At)}function v(e,n,r,i){n!==t&&n!=e.getFullYear()&&(e.setDate(1),e.setMonth(0),e.setFullYear(n)),r!==t&&r!=e.getMonth()&&(e.setDate(1),e.setMonth(r)),i!==t&&e.setDate(i)}function m(e,n){return"object"==typeof e?e:"number"==typeof e?new Date(1e3*e):"string"==typeof e?e.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(e)):(n===t&&(n=!0),g(e,n)||(e?new Date(e):null)):null}function g(e,t){var n=e.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!n)return null;var r=new Date(n[1],0,1);if(t||!n[13]){var i=new Date(n[1],0,1,9,0);n[3]&&(r.setMonth(n[3]-1),i.setMonth(n[3]-1)),n[5]&&(r.setDate(n[5]),i.setDate(n[5])),f(r,i),n[7]&&r.setHours(n[7]),n[8]&&r.setMinutes(n[8]),n[10]&&r.setSeconds(n[10]),n[12]&&r.setMilliseconds(1e3*Number("0."+n[12])),f(r,i)}else if(r.setUTCFullYear(n[1],n[3]?n[3]-1:0,n[5]||1),r.setUTCHours(n[7]||0,n[8]||0,n[10]||0,n[12]?1e3*Number("0."+n[12]):0),n[14]){var s=60*Number(n[16])+(n[18]?Number(n[18]):0);s*="-"==n[15]?1:-1,r=new Date(+r+6e4*s)}return r}function y(e){if("number"==typeof e)return 60*e;if("object"==typeof e)return 60*e.getHours()+e.getMinutes();var t=e.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(t){var n=parseInt(t[1],10);return t[3]&&(n%=12,"p"==t[3].toLowerCase().charAt(0)&&(n+=12)),60*n+(t[2]?parseInt(t[2],10):0)}}function b(e,t,n){return w(e,null,t,n)}function w(e,t,n,r){r=r||St;var i,s,o,u,a=e,f=t,l=n.length,c="";for(i=0;l>i;i++)if(s=n.charAt(i),"'"==s){for(o=i+1;l>o;o++)if("'"==n.charAt(o)){a&&(c+=o==i+1?"'":n.substring(i+1,o),i=o);break}}else if("("==s){for(o=i+1;l>o;o++)if(")"==n.charAt(o)){var h=b(a,n.substring(i+1,o),r);parseInt(h.replace(/\D/,""),10)&&(c+=h),i=o;break}}else if("["==s){for(o=i+1;l>o;o++)if("]"==n.charAt(o)){var p=n.substring(i+1,o),h=b(a,p,r);h!=b(f,p,r)&&(c+=h),i=o;break}}else if("{"==s)a=t,f=e;else if("}"==s)a=e,f=t;else{for(o=l;o>i;o--)if(u=_t[n.substring(i,o)]){a&&(c+=u(a,r)),i=o-1;break}o==i&&a&&(c+=s)}return c}function E(e){var t,n=new Date(e.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),t=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((t-n)/864e5)/7)+1}function S(e){return e.end?x(e.end,e.allDay):a(h(e.start),1)}function x(e,t){return e=h(e),t||e.getHours()||e.getMinutes()?a(e,1):c(e)}function T(n,r,i){n.unbind("mouseover").mouseover(function(n){for(var s,o,u,a=n.target;a!=this;)s=a,a=a.parentNode;(o=s._fci)!==t&&(s._fci=t,u=r[o],i(u.event,u.element,u),e(n.target).trigger(n)),n.stopPropagation()})}function N(t,n,r){for(var i,s=0;t.length>s;s++)i=e(t[s]),i.width(Math.max(0,n-k(i,r)))}function C(t,n,r){for(var i,s=0;t.length>s;s++)i=e(t[s]),i.height(Math.max(0,n-M(i,r)))}function k(e,t){return L(e)+O(e)+(t?A(e):0)}function L(t){return(parseFloat(e.css(t[0],"paddingLeft",!0))||0)+(parseFloat(e.css(t[0],"paddingRight",!0))||0)}function A(t){return(parseFloat(e.css(t[0],"marginLeft",!0))||0)+(parseFloat(e.css(t[0],"marginRight",!0))||0)}function O(t){return(parseFloat(e.css(t[0],"borderLeftWidth",!0))||0)+(parseFloat(e.css(t[0],"borderRightWidth",!0))||0)}function M(e,t){return _(e)+P(e)+(t?D(e):0)}function _(t){return(parseFloat(e.css(t[0],"paddingTop",!0))||0)+(parseFloat(e.css(t[0],"paddingBottom",!0))||0)}function D(t){return(parseFloat(e.css(t[0],"marginTop",!0))||0)+(parseFloat(e.css(t[0],"marginBottom",!0))||0)}function P(t){return(parseFloat(e.css(t[0],"borderTopWidth",!0))||0)+(parseFloat(e.css(t[0],"borderBottomWidth",!0))||0)}function H(){}function B(e,t){return e-t}function j(e){return Math.max.apply(Math,e)}function F(e){return(10>e?"0":"")+e}function I(e,n){if(e[n]!==t)return e[n];for(var r,i=n.split(/(?=[A-Z])/),s=i.length-1;s>=0;s--)if(r=e[i[s].toLowerCase()],r!==t)return r;return e[""]}function q(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function R(e){e.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function U(e){e.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function z(e,t){var n=e.source||{},r=e.color,i=n.color,s=t("eventColor"),o=e.backgroundColor||r||n.backgroundColor||i||t("eventBackgroundColor")||s,u=e.borderColor||r||n.borderColor||i||t("eventBorderColor")||s,a=e.textColor||n.textColor||t("eventTextColor"),f=[];return o&&f.push("background-color:"+o),u&&f.push("border-color:"+u),a&&f.push("color:"+a),f.join(";")}function W(t,n,r){if(e.isFunction(t)&&(t=[t]),t){var i,s;for(i=0;t.length>i;i++)s=t[i].apply(n,r)||s;return s}}function X(){for(var e=0;arguments.length>e;e++)if(arguments[e]!==t)return arguments[e]}function V(e,t){function n(e,t){t&&(u(e,t),e.setDate(1));var n=i("firstDay"),c=h(e,!0);c.setDate(1);var p=u(h(c),1),v=h(c);a(v,-((v.getDay()-n+7)%7)),o(v);var m=h(p);a(m,(7-m.getDay()+n)%7),o(m,-1,!0);var g=f(),y=Math.round(d(m,v)/7);"fixed"==i("weekMode")&&(a(m,7*(6-y)),y=6),r.title=l(c,i("titleFormat")),r.start=c,r.end=p,r.visStart=v,r.visEnd=m,s(y,g,!0)}var r=this;r.render=n,K.call(r,e,t,"month");var i=r.opt,s=r.renderBasic,o=r.skipHiddenDays,f=r.getCellsPerWeek,l=t.formatDate}function $(e,t){function n(e,t){t&&a(e,7*t);var n=a(h(e),-((e.getDay()-i("firstDay")+7)%7)),l=a(h(n),7),c=h(n);o(c);var p=h(l);o(p,-1,!0);var d=u();r.start=n,r.end=l,r.visStart=c,r.visEnd=p,r.title=f(c,a(h(p),-1),i("titleFormat")),s(1,d,!1)}var r=this;r.render=n,K.call(r,e,t,"basicWeek");var i=r.opt,s=r.renderBasic,o=r.skipHiddenDays,u=r.getCellsPerWeek,f=t.formatDates}function J(e,t){function n(e,t){t&&a(e,t),o(e,0>t?-1:1);var n=h(e,!0),f=a(h(n),1);r.title=u(e,i("titleFormat")),r.start=r.visStart=n,r.end=r.visEnd=f,s(1,1,!1)}var r=this;r.render=n,K.call(r,e,t,"basicDay");var i=r.opt,s=r.renderBasic,o=r.skipHiddenDays,u=t.formatDate}function K(t,n,r){function i(e,t,n){tt=e,nt=t,rt=n,s(),z||o(),u()}function s(){at=dt("theme")?"ui":"fc",ft=dt("columnFormat"),lt=dt("weekNumbers"),ht=dt("weekNumberTitle"),pt="iso"!=dt("weekNumberCalculation")?"w":"W"}function o(){K=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(t)}function u(){var n=f();j&&j.remove(),j=e(n).appendTo(t),F=j.find("thead"),I=F.find(".fc-day-header"),z=j.find("tbody"),W=z.find("tr"),X=z.find(".fc-day"),V=W.find("td:first-child"),$=W.eq(0).find(".fc-day > div"),J=W.eq(0).find(".fc-day-content > div"),U(F.add(F.find("tr"))),U(W),W.eq(0).addClass("fc-first"),W.filter(":last").addClass("fc-last"),X.each(function(t,n){var r=Tt(Math.floor(t/nt),t%nt);vt("dayRender",B,r,e(n))}),y(X)}function f(){var e="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+l()+p()+"</table>";return e}function l(){var e,t,n=at+"-widget-header",r="";for(r+="<thead><tr>",lt&&(r+="<th class='fc-week-number "+n+"'>"+q(ht)+"</th>"),e=0;nt>e;e++)t=Tt(0,e),r+="<th class='fc-day-header fc-"+Lt[t.getDay()]+" "+n+"'>"+q(kt(t,ft))+"</th>";return r+="</tr></thead>"}function p(){var e,t,n,r=at+"-widget-content",i="";for(i+="<tbody>",e=0;tt>e;e++){for(i+="<tr class='fc-week'>",lt&&(n=Tt(e,0),i+="<td class='fc-week-number "+r+"'>"+"<div>"+q(kt(n,pt))+"</div>"+"</td>"),t=0;nt>t;t++)n=Tt(e,t),i+=d(n);i+="</tr>"}return i+="</tbody>"}function d(e){var t=at+"-widget-content",n=B.start.getMonth(),r=c(new Date),i="",s=["fc-day","fc-"+Lt[e.getDay()],t];return e.getMonth()!=n&&s.push("fc-other-month"),+e==+r?s.push("fc-today",at+"-state-highlight"):r>e?s.push("fc-past"):s.push("fc-future"),i+="<td class='"+s.join(" ")+"'"+" data-date='"+kt(e,"yyyy-MM-dd")+"'"+">"+"<div>",rt&&(i+="<div class='fc-day-number'>"+e.getDate()+"</div>"),i+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>"}function v(t){Y=t;var n,r,i,s=Y-F.height();"variable"==dt("weekMode")?n=r=Math.floor(s/(1==tt?2:6)):(n=Math.floor(s/tt),r=s-n*(tt-1)),V.each(function(t,s){tt>t&&(i=e(s),i.find("> div").css("min-height",(t==tt-1?r:n)-M(i)))})}function m(e){G=e,ot.clear(),ut.clear(),et=0,lt&&(et=F.find("th.fc-week-number").outerWidth()),Z=Math.floor((G-et)/nt),N(I.slice(0,-1),Z)}function y(e){e.click(b).mousedown(xt)}function b(t){if(!dt("selectable")){var n=g(e(this).data("date"));vt("dayClick",this,n,!0,t)}}function w(e,t,n){n&&it.build();for(var r=Ct(e,t),i=0;r.length>i;i++){var s=r[i];y(E(s.row,s.leftCol,s.row,s.rightCol))}}function E(e,n,r,i){var s=it.rect(e,n,r,i,t);return wt(s,t)}function S(e){return h(e)}function x(e,t){w(e,a(h(t),1),!0)}function T(){St()}function C(e,t,n){var r=Nt(e),i=X[r.row*nt+r.col];vt("dayClick",i,e,t,n)}function k(e,t){st.start(function(e){St(),e&&E(e.row,e.col,e.row,e.col)},t)}function L(e,t,n){var r=st.stop();if(St(),r){var i=Tt(r);vt("drop",e,i,!0,t,n)}}function A(e){return h(e.start)}function O(e){return ot.left(e)}function _(e){return ot.right(e)}function D(e){return ut.left(e)}function P(e){return ut.right(e)}function H(e){return W.eq(e)}var B=this;B.renderBasic=i,B.setHeight=v,B.setWidth=m,B.renderDayOverlay=w,B.defaultSelectionEnd=S,B.renderSelection=x,B.clearSelection=T,B.reportDayClick=C,B.dragStart=k,B.dragStop=L,B.defaultEventEnd=A,B.getHoverListener=function(){return st},B.colLeft=O,B.colRight=_,B.colContentLeft=D,B.colContentRight=P,B.getIsCellAllDay=function(){return!0},B.allDayRow=H,B.getRowCnt=function(){return tt},B.getColCnt=function(){return nt},B.getColWidth=function(){return Z},B.getDaySegmentContainer=function(){return K},ct.call(B,t,n,r),gt.call(B),mt.call(B),Q.call(B);var j,F,I,z,W,X,V,$,J,K,G,Y,Z,et,tt,nt,rt,it,st,ot,ut,at,ft,lt,ht,pt,dt=B.opt,vt=B.trigger,wt=B.renderOverlay,St=B.clearOverlays,xt=B.daySelectionMousedown,Tt=B.cellToDate,Nt=B.dateToCell,Ct=B.rangeToSegments,kt=n.formatDate;R(t.addClass("fc-grid")),it=new yt(function(t,n){var r,i,s;I.each(function(t,o){r=e(o),i=r.offset().left,t&&(s[1]=i),s=[i],n[t]=s}),s[1]=i+r.outerWidth(),W.each(function(n,o){tt>n&&(r=e(o),i=r.offset().top,n&&(s[1]=i),s=[i],t[n]=s)}),s[1]=i+r.outerHeight()}),st=new bt(it),ot=new Et(function(e){return $.eq(e)}),ut=new Et(function(e){return J.eq(e)})}function Q(){function e(e,t){n.renderDayEvents(e,t)}function t(){n.getDaySegmentContainer().empty()}var n=this;n.renderEvents=e,n.clearEvents=t,ht.call(n)}function G(e,t){function n(e,t){t&&a(e,7*t);var n=a(h(e),-((e.getDay()-i("firstDay")+7)%7)),l=a(h(n),7),c=h(n);o(c);var p=h(l);o(p,-1,!0);var d=u();r.title=f(c,a(h(p),-1),i("titleFormat")),r.start=n,r.end=l,r.visStart=c,r.visEnd=p,s(d)}var r=this;r.render=n,Z.call(r,e,t,"agendaWeek");var i=r.opt,s=r.renderAgenda,o=r.skipHiddenDays,u=r.getCellsPerWeek,f=t.formatDates}function Y(e,t){function n(e,t){t&&a(e,t),o(e,0>t?-1:1);var n=h(e,!0),f=a(h(n),1);r.title=u(e,i("titleFormat")),r.start=r.visStart=n,r.end=r.visEnd=f,s(1)}var r=this;r.render=n,Z.call(r,e,t,"agendaDay");var i=r.opt,s=r.renderAgenda,o=r.skipHiddenDays,u=t.formatDate}function Z(n,r,i){function s(e){Pt=e,o(),Z?f():u()}function o(){qt=Jt("theme")?"ui":"fc",Rt=Jt("isRTL"),Ut=y(Jt("minTime")),zt=y(Jt("maxTime")),Wt=Jt("columnFormat"),Xt=Jt("weekNumbers"),Vt=Jt("weekNumberTitle"),$t="iso"!=Jt("weekNumberCalculation")?"w":"W",Mt=Jt("snapMinutes")||Jt("slotMinutes")}function u(){var t,r,i,s,o,u=qt+"-widget-header",a=qt+"-widget-content",c=0==Jt("slotMinutes")%15;for(f(),ft=e("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(n),Jt("allDaySlot")?(lt=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(ft),t="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+u+" fc-agenda-axis'>"+Jt("allDayText")+"</th>"+"<td>"+"<div class='fc-day-content'><div style='position:relative'/></div>"+"</td>"+"<th class='"+u+" fc-agenda-gutter'>&nbsp;</th>"+"</tr>"+"</table>",ht=e(t).appendTo(ft),pt=ht.find("tr"),S(pt.find("td")),ft.append("<div class='fc-agenda-divider "+u+"'>"+"<div class='fc-agenda-divider-inner'/>"+"</div>")):lt=e([]),dt=e("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(ft),vt=e("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(dt),wt=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(vt),t="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",r=p(),s=l(h(r),zt),l(r,Ut),Ht=0,i=0;s>r;i++)o=r.getMinutes(),t+="<tr class='fc-slot"+i+" "+(o?"fc-minor":"")+"'>"+"<th class='fc-agenda-axis "+u+"'>"+(c&&o?"&nbsp;":on(r,Jt("axisFormat")))+"</th>"+"<td class='"+a+"'>"+"<div style='position:relative'>&nbsp;</div>"+"</td>"+"</tr>",l(r,Jt("slotMinutes")),Ht++;t+="</tbody></table>",St=e(t).appendTo(vt),x(St.find("td"))}function f(){var t=d();Z&&Z.remove(),Z=e(t).appendTo(n),tt=Z.find("thead"),nt=tt.find("th").slice(1,-1),rt=Z.find("tbody"),it=rt.find("td").slice(0,-1),st=it.find("> div"),ot=it.find(".fc-day-content > div"),ut=it.eq(0),at=st.eq(0),U(tt.add(tt.find("tr"))),U(rt.add(rt.find("tr")))}function d(){var e="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+v()+m()+"</table>";return e}function v(){var e,t,n,r=qt+"-widget-header",i="";for(i+="<thead><tr>",Xt?(e=nn(0,0),t=on(e,$t),Rt?t+=Vt:t=Vt+t,i+="<th class='fc-agenda-axis fc-week-number "+r+"'>"+q(t)+"</th>"):i+="<th class='fc-agenda-axis "+r+"'>&nbsp;</th>",n=0;Pt>n;n++)e=nn(0,n),i+="<th class='fc-"+Lt[e.getDay()]+" fc-col"+n+" "+r+"'>"+q(on(e,Wt))+"</th>";return i+="<th class='fc-agenda-gutter "+r+"'>&nbsp;</th>"+"</tr>"+"</thead>"}function m(){var e,t,n,r,i,s=qt+"-widget-header",o=qt+"-widget-content",u=c(new Date),a="";for(a+="<tbody><tr><th class='fc-agenda-axis "+s+"'>&nbsp;</th>",n="",t=0;Pt>t;t++)e=nn(0,t),i=["fc-col"+t,"fc-"+Lt[e.getDay()],o],+e==+u?i.push(qt+"-state-highlight","fc-today"):u>e?i.push("fc-past"):i.push("fc-future"),r="<td class='"+i.join(" ")+"'>"+"<div>"+"<div class='fc-day-content'>"+"<div style='position:relative'>&nbsp;</div>"+"</div>"+"</div>"+"</td>",n+=r;return a+=n,a+="<td class='fc-agenda-gutter "+o+"'>&nbsp;</td>"+"</tr>"+"</tbody>"}function g(e){e===t&&(e=Nt),Nt=e,un={};var n=rt.position().top,r=dt.position().top,i=Math.min(e-n,St.height()+r+1);at.height(i-M(ut)),ft.css("top",n),dt.height(i-r-1),Ot=St.find("tr:first").height()+1,_t=Jt("slotMinutes")/Mt,Dt=Ot/_t}function b(t){Tt=t,Ft.clear(),It.clear();var n=tt.find("th:first");ht&&(n=n.add(ht.find("th:first"))),n=n.add(St.find("th:first")),Ct=0,N(n.width("").each(function(t,n){Ct=Math.max(Ct,e(n).outerWidth())}),Ct);var r=Z.find(".fc-agenda-gutter");ht&&(r=r.add(ht.find("th.fc-agenda-gutter")));var i=dt[0].clientWidth;At=dt.width()-i,At?(N(r,At),r.show().prev().removeClass("fc-last")):r.hide().prev().addClass("fc-last"),kt=Math.floor((i-Ct)/Pt),N(nt.slice(0,-1),kt)}function w(){function e(){dt.scrollTop(r)}var t=p(),n=h(t);n.setHours(Jt("firstHour"));var r=F(t,n)+1;e(),setTimeout(e,0)}function E(){w()}function S(e){e.click(T).mousedown(en)}function x(e){e.click(T).mousedown(J)}function T(e){if(!Jt("selectable")){var t=Math.min(Pt-1,Math.floor((e.pageX-Z.offset().left-Ct)/kt)),n=nn(0,t),r=this.parentNode.className.match(/fc-slot(\d+)/);if(r){var i=parseInt(r[1])*Jt("slotMinutes"),s=Math.floor(i/60);n.setHours(s),n.setMinutes(i%60+Ut),Kt("dayClick",it[t],n,!1,e)}else Kt("dayClick",it[t],n,!0,e)}}function k(e,t,n){n&&Bt.build();for(var r=sn(e,t),i=0;r.length>i;i++){var s=r[i];S(L(s.row,s.leftCol,s.row,s.rightCol))}}function L(e,t,n,r){var i=Bt.rect(e,t,n,r,ft);return Qt(i,ft)}function A(e,t){for(var n=0;Pt>n;n++){var r=nn(0,n),i=a(h(r),1),s=new Date(Math.max(r,e)),o=new Date(Math.min(i,t));if(o>s){var u=Bt.rect(0,n,0,n,vt),f=F(r,s),l=F(r,o);u.top=f,u.height=l-f,x(Qt(u,vt))}}}function O(e){return Ft.left(e)}function _(e){return It.left(e)}function D(e){return Ft.right(e)}function P(e){return It.right(e)}function H(e){return Jt("allDaySlot")&&!e.row}function j(e){var t=nn(0,e.col),n=e.row;return Jt("allDaySlot")&&n--,n>=0&&l(t,Ut+n*Mt),t}function F(e,n){if(e=h(e,!0),l(h(e),Ut)>n)return 0;if(n>=l(h(e),zt))return St.height();var r=Jt("slotMinutes"),i=60*n.getHours()+n.getMinutes()-Ut,s=Math.floor(i/r),o=un[s];return o===t&&(o=un[s]=St.find("tr").eq(s).find("td div")[0].offsetTop),Math.max(0,Math.round(o-1+Ot*(i%r/r)))}function I(){return pt}function z(e){var t=h(e.start);return e.allDay?t:l(t,Jt("defaultEventMinutes"))}function W(e,t){return t?h(e):l(h(e),Jt("slotMinutes"))}function X(e,t,n){n?Jt("allDaySlot")&&k(e,a(h(t),1),!0):V(e,t)}function V(t,n){var r=Jt("selectHelper");if(Bt.build(),r){var i=rn(t).col;if(i>=0&&Pt>i){var s=Bt.rect(0,i,0,i,vt),o=F(t,t),u=F(t,n);if(u>o){if(s.top=o,s.height=u-o,s.left+=2,s.width-=5,e.isFunction(r)){var a=r(t,n);a&&(s.position="absolute",xt=e(a).css(s).appendTo(vt))}else s.isStart=!0,s.isEnd=!0,xt=e(tn({title:"",start:t,end:n,className:["fc-select-helper"],editable:!1},s)),xt.css("opacity",Jt("dragOpacity"));xt&&(x(xt),vt.append(xt),N(xt,s.width,!0),C(xt,s.height,!0))}}}else A(t,n)}function $(){Gt(),xt&&(xt.remove(),xt=null)}function J(t){if(1==t.which&&Jt("selectable")){Zt(t);var n;jt.start(function(e,t){if($(),e&&e.col==t.col&&!H(e)){var r=j(t),i=j(e);n=[r,l(h(r),Mt),i,l(h(i),Mt)].sort(B),V(n[0],n[3])}else n=null},t),e(document).one("mouseup",function(e){jt.stop(),n&&(+n[0]==+n[1]&&K(n[0],!1,e),Yt(n[0],n[3],!1,e))})}}function K(e,t,n){Kt("dayClick",it[rn(e).col],e,t,n)}function Q(e,t){jt.start(function(e){if(Gt(),e)if(H(e))L(e.row,e.col,e.row,e.col);else{var t=j(e),n=l(h(t),Jt("defaultEventMinutes"));A(t,n)}},t)}function G(e,t,n){var r=jt.stop();Gt(),r&&Kt("drop",e,j(r),H(r),t,n)}var Y=this;Y.renderAgenda=s,Y.setWidth=b,Y.setHeight=g,Y.afterRender=E,Y.defaultEventEnd=z,Y.timePosition=F,Y.getIsCellAllDay=H,Y.allDayRow=I,Y.getCoordinateGrid=function(){return Bt},Y.getHoverListener=function(){return jt},Y.colLeft=O,Y.colRight=D,Y.colContentLeft=_,Y.colContentRight=P,Y.getDaySegmentContainer=function(){return lt},Y.getSlotSegmentContainer=function(){return wt},Y.getMinMinute=function(){return Ut},Y.getMaxMinute=function(){return zt},Y.getSlotContainer=function(){return vt},Y.getRowCnt=function(){return 1},Y.getColCnt=function(){return Pt},Y.getColWidth=function(){return kt},Y.getSnapHeight=function(){return Dt},Y.getSnapMinutes=function(){return Mt},Y.defaultSelectionEnd=W,Y.renderDayOverlay=k,Y.renderSelection=X,Y.clearSelection=$,Y.reportDayClick=K,Y.dragStart=Q,Y.dragStop=G,ct.call(Y,n,r,i),gt.call(Y),mt.call(Y),et.call(Y);var Z,tt,nt,rt,it,st,ot,ut,at,ft,lt,ht,pt,dt,vt,wt,St,xt,Tt,Nt,Ct,kt,At,Ot,Mt,_t,Dt,Pt,Ht,Bt,jt,Ft,It,qt,Rt,Ut,zt,Wt,Xt,Vt,$t,Jt=Y.opt,Kt=Y.trigger,Qt=Y.renderOverlay,Gt=Y.clearOverlays,Yt=Y.reportSelection,Zt=Y.unselect,en=Y.daySelectionMousedown,tn=Y.slotSegHtml,nn=Y.cellToDate,rn=Y.dateToCell,sn=Y.rangeToSegments,on=r.formatDate,un={};R(n.addClass("fc-agenda")),Bt=new yt(function(t,n){function r(e){return Math.max(a,Math.min(f,e))}var i,s,o;nt.each(function(t,r){i=e(r),s=i.offset().left,t&&(o[1]=s),o=[s],n[t]=o}),o[1]=s+i.outerWidth(),Jt("allDaySlot")&&(i=pt,s=i.offset().top,t[0]=[s,s+i.outerHeight()]);for(var u=vt.offset().top,a=dt.offset().top,f=a+dt.outerHeight(),l=0;Ht*_t>l;l++)t.push([r(u+Dt*l),r(u+Dt*(l+1))])}),jt=new bt(Bt),Ft=new Et(function(e){return st.eq(e)}),It=new Et(function(e){return ot.eq(e)})}function et(){function n(e,t){var n,r=e.length,s=[],o=[];for(n=0;r>n;n++)e[n].allDay?s.push(e[n]):o.push(e[n]);y("allDaySlot")&&(et(s,t),L()),u(i(o),t)}function r(){A().empty(),O().empty()}function i(t){var n,r,i,u,a,f=R(),c=P(),p=D(),d=e.map(t,o),v=[];for(r=0;f>r;r++)for(n=I(0,r),l(n,c),a=s(t,d,n,l(h(n),p-c)),a=tt(a),i=0;a.length>i;i++)u=a[i],u.col=r,v.push(u);return v}function s(e,t,n,r){var i,s,o,u,a,f,l,c,p=[],d=e.length;for(i=0;d>i;i++)s=e[i],o=s.start,u=t[i],u>n&&r>o&&(n>o?(a=h(n),l=!1):(a=o,l=!0),u>r?(f=h(r),c=!1):(f=u,c=!0),p.push({event:s,start:a,end:f,isStart:l,isEnd:c}));return p.sort(lt)}function o(e){return e.end?h(e.end):l(h(e.start),y("defaultEventMinutes"))}function u(n,r){var i,s,o,u,a,l,h,p,d,v,m,g,w,E,S,x,N=n.length,C="",L=O(),A=y("isRTL");for(i=0;N>i;i++)s=n[i],o=s.event,u=H(s.start,s.start),a=H(s.start,s.end),l=j(s.col),h=F(s.col),p=h-l,h-=.025*p,p=h-l,d=p*(s.forwardCoord-s.backwardCoord),y("slotEventOverlap")&&(d=Math.max(2*(d-10),d)),A?(m=h-s.backwardCoord*p,v=m-d):(v=l+s.backwardCoord*p,m=v+d),v=Math.max(v,l),m=Math.min(m,h),d=m-v,s.top=u,s.left=v,s.outerWidth=d,s.outerHeight=a-u,C+=f(o,s);for(L[0].innerHTML=C,g=L.children(),i=0;N>i;i++)s=n[i],o=s.event,w=e(g[i]),E=b("eventRender",o,o,w),E===!1?w.remove():(E&&E!==!0&&(w.remove(),w=e(E).css({position:"absolute",top:s.top,left:s.left}).appendTo(L)),s.element=w,o._id===r?c(o,w,s):w[0]._fci=i,$(o,w));for(T(L,n,c),i=0;N>i;i++)s=n[i],(w=s.element)&&(s.vsides=M(w,!0),s.hsides=k(w,!0),S=w.find(".fc-event-title"),S.length&&(s.contentTop=S[0].offsetTop));for(i=0;N>i;i++)s=n[i],(w=s.element)&&(w[0].style.width=Math.max(0,s.outerWidth-s.hsides)+"px",x=Math.max(0,s.outerHeight-s.vsides),w[0].style.height=x+"px",o=s.event,s.contentTop!==t&&10>x-s.contentTop&&(w.find("div.fc-event-time").text(rt(o.start,y("timeFormat"))+" - "+o.title),w.find("div.fc-event-title").remove()),b("eventAfterRender",o,o,w))}function f(e,t){var n="<",r=e.url,i=z(e,y),s=["fc-event","fc-event-vert"];return w(e)&&s.push("fc-event-draggable"),t.isStart&&s.push("fc-event-start"),t.isEnd&&s.push("fc-event-end"),s=s.concat(e.className),e.source&&(s=s.concat(e.source.className||[])),n+=r?"a href='"+q(e.url)+"'":"div",n+=" class='"+s.join(" ")+"'"+" style="+"'"+"position:absolute;"+"top:"+t.top+"px;"+"left:"+t.left+"px;"+i+"'"+">"+"<div class='fc-event-inner'>"+"<div class='fc-event-time'>"+q(it(e.start,e.end,y("timeFormat")))+"</div>"+"<div class='fc-event-title'>"+q(e.title||"")+"</div>"+"</div>"+"<div class='fc-event-bg'></div>",t.isEnd&&E(e)&&(n+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),n+="</"+(r?"a":"div")+">"}function c(e,t,n){var r=t.find("div.fc-event-time");w(e)&&v(e,t,r),n.isEnd&&E(e)&&m(e,t,r),N(e,t)}function p(e,t,n){function r(){f||(t.width(i).height("").draggable("option","grid",null),f=!0)}var i,s,o,u=n.isStart,f=!0,l=_(),c=U(),p=W(),v=X(),m=P();t.draggable({opacity:y("dragOpacity","month"),revertDuration:y("dragRevertDuration"),start:function(n,m){b("eventDragStart",t,e,n,m),K(e,t),i=t.width(),l.start(function(n,i){if(Z(),n){s=!1;var l=I(0,i.col),m=I(0,n.col);o=d(m,l),n.row?u?f&&(t.width(c-10),C(t,p*Math.round((e.end?(e.end-e.start)/Mt:y("defaultEventMinutes"))/v)),t.draggable("option","grid",[c,1]),f=!1):s=!0:(Y(a(h(e.start),o),a(S(e),o)),r()),s=s||f&&!o}else r(),s=!0;t.draggable("option","revert",s)},n,"drag")},stop:function(n,i){if(l.stop(),Z(),b("eventDragStop",t,e,n,i),s)r(),t.css("filter",""),J(e,t);else{var u=0;f||(u=Math.round((t.offset().top-V().offset().top)/p)*v+m-(60*e.start.getHours()+e.start.getMinutes())),Q(this,e,o,u,f,n,i)}}})}function v(e,t,n){function r(){Z(),u&&(c?(n.hide(),t.draggable("option","grid",null),Y(a(h(e.start),w),a(S(e),w))):(i(E),n.css("display",""),t.draggable("option","grid",[C,k])))}function i(t){var r,i=l(h(e.start),t);e.end&&(r=l(h(e.end),t)),n.text(it(i,r,y("timeFormat")))}var s,o,u,f,c,p,v,m,w,E,x,T=g.getCoordinateGrid(),N=R(),C=U(),k=W(),L=X();t.draggable({scroll:!1,grid:[C,k],axis:1==N?"y":!1,opacity:y("dragOpacity"),revertDuration:y("dragRevertDuration"),start:function(n,r){b("eventDragStart",t,e,n,r),K(e,t),T.build(),s=t.position(),o=T.cell(n.pageX,n.pageY),u=f=!0,c=p=B(o),v=m=0,w=0,E=x=0},drag:function(e,n){var i=T.cell(e.pageX,e.pageY);if(u=!!i){if(c=B(i),v=Math.round((n.position.left-s.left)/C),v!=m){var a=I(0,o.col),l=o.col+v;l=Math.max(0,l),l=Math.min(N-1,l);var h=I(0,l);w=d(h,a)}c||(E=Math.round((n.position.top-s.top)/k)*L)}(u!=f||c!=p||v!=m||E!=x)&&(r(),f=u,p=c,m=v,x=E),t.draggable("option","revert",!u)},stop:function(n,i){Z(),b("eventDragStop",t,e,n,i),u&&(c||w||E)?Q(this,e,w,c?0:E,c,n,i):(u=!0,c=!1,v=0,w=0,E=0,r(),t.css("filter",""),t.css(s),J(e,t))}})}function m(e,t,n){var r,i,s=W(),o=X();t.resizable({handles:{s:".ui-resizable-handle"},grid:s,start:function(n,s){r=i=0,K(e,t),b("eventResizeStart",this,e,n,s)},resize:function(u,a){r=Math.round((Math.max(s,t.height())-a.originalSize.height)/s),r!=i&&(n.text(it(e.start,r||e.end?l(x(e),o*r):null,y("timeFormat"))),i=r)},stop:function(n,i){b("eventResizeStop",this,e,n,i),r?G(this,e,0,o*r,n,i):J(e,t)}})}var g=this;g.renderEvents=n,g.clearEvents=r,g.slotSegHtml=f,ht.call(g);var y=g.opt,b=g.trigger,w=g.isEventDraggable,E=g.isEventResizable,x=g.eventEnd,N=g.eventElementHandlers,L=g.setHeight,A=g.getDaySegmentContainer,O=g.getSlotSegmentContainer,_=g.getHoverListener,D=g.getMaxMinute,P=g.getMinMinute,H=g.timePosition,B=g.getIsCellAllDay,j=g.colContentLeft,F=g.colContentRight,I=g.cellToDate,R=g.getColCnt,U=g.getColWidth,W=g.getSnapHeight,X=g.getSnapMinutes,V=g.getSlotContainer,$=g.reportEventElement,J=g.showEvents,K=g.hideEvents,Q=g.eventDrop,G=g.eventResize,Y=g.renderDayOverlay,Z=g.clearOverlays,et=g.renderDayEvents,nt=g.calendar,rt=nt.formatDate,it=nt.formatDates;g.draggableDayEvent=p}function tt(e){var t,n=nt(e),r=n[0];if(rt(n),r){for(t=0;r.length>t;t++)it(r[t]);for(t=0;r.length>t;t++)st(r[t],0,0)}return ot(n)}function nt(e){var t,n,r,i=[];for(t=0;e.length>t;t++){for(n=e[t],r=0;i.length>r&&ut(n,i[r]).length;r++);(i[r]||(i[r]=[])).push(n)}return i}function rt(e){var t,n,r,i,s;for(t=0;e.length>t;t++)for(n=e[t],r=0;n.length>r;r++)for(i=n[r],i.forwardSegs=[],s=t+1;e.length>s;s++)ut(i,e[s],i.forwardSegs)}function it(e){var n,r,i=e.forwardSegs,s=0;if(e.forwardPressure===t){for(n=0;i.length>n;n++)r=i[n],it(r),s=Math.max(s,1+r.forwardPressure);e.forwardPressure=s}}function st(e,n,r){var i,s=e.forwardSegs;if(e.forwardCoord===t)for(s.length?(s.sort(ft),st(s[0],n+1,r),e.forwardCoord=s[0].backwardCoord):e.forwardCoord=1,e.backwardCoord=e.forwardCoord-(e.forwardCoord-r)/(n+1),i=0;s.length>i;i++)st(s[i],0,e.forwardCoord)}function ot(e){var t,n,r,i=[];for(t=0;e.length>t;t++)for(n=e[t],r=0;n.length>r;r++)i.push(n[r]);return i}function ut(e,t,n){n=n||[];for(var r=0;t.length>r;r++)at(e,t[r])&&n.push(t[r]);return n}function at(e,t){return e.end>t.start&&e.start<t.end}function ft(e,t){return t.forwardPressure-e.forwardPressure||(e.backwardCoord||0)-(t.backwardCoord||0)||lt(e,t)}function lt(e,t){return e.start-t.start||t.end-t.start-(e.end-e.start)||(e.event.title||"").localeCompare(t.event.title)}function ct(n,r,i){function s(t,n){var r=$[t];return e.isPlainObject(r)?I(r,n||i):r}function o(e,t){return r.trigger.apply(r,[e,t||F].concat(Array.prototype.slice.call(arguments,2),[F]))}function u(e){var t=e.source||{};return X(e.startEditable,t.startEditable,s("eventStartEditable"),e.editable,t.editable,s("editable"))&&!s("disableDragging")}function f(e){var t=e.source||{};return X(e.durationEditable,t.durationEditable,s("eventDurationEditable"),e.editable,t.editable,s("editable"))&&!s("disableResizing")}function c(e){z={};var t,n,r=e.length;for(t=0;r>t;t++)n=e[t],z[n._id]?z[n._id].push(n):z[n._id]=[n]}function p(){z={},W={},V=[]}function v(e){return e.end?h(e.end):q(e)}function m(e,t){V.push({event:e,element:t}),W[e._id]?W[e._id].push(t):W[e._id]=[t]}function g(){e.each(V,function(e,t){F.trigger("eventDestroy",t.event,t.event,t.element)})}function y(e,n){n.click(function(r){return n.hasClass("ui-draggable-dragging")||n.hasClass("ui-resizable-resizing")?t:o("eventClick",this,e,r)}).hover(function(t){o("eventMouseover",this,e,t)},function(t){o("eventMouseout",this,e,t)})}function b(e,t){E(e,t,"show")}function w(e,t){E(e,t,"hide")}function E(e,t,n){var r,i=W[e._id],s=i.length;for(r=0;s>r;r++)t&&i[r][0]==t[0]||i[r][n]()}function S(e,t,n,r,i,s,u){var a=t.allDay,f=t._id;T(z[f],n,r,i),o("eventDrop",e,t,n,r,i,function(){T(z[f],-n,-r,a),U(f)},s,u),U(f)}function x(e,t,n,r,i,s){var u=t._id;N(z[u],n,r),o("eventResize",e,t,n,r,function(){N(z[u],-n,-r),U(u)},i,s),U(u)}function T(e,n,r,i){r=r||0;for(var s,o=e.length,u=0;o>u;u++)s=e[u],i!==t&&(s.allDay=i),l(a(s.start,n,!0),r),s.end&&(s.end=l(a(s.end,n,!0),r)),R(s,$)}function N(e,t,n){n=n||0;for(var r,i=e.length,s=0;i>s;s++)r=e[s],r.end=l(a(v(r),t,!0),n),R(r,$)}function C(e){return"object"==typeof e&&(e=e.getDay()),Q[e]}function k(){return J}function L(e,t,n){for(t=t||1;Q[(e.getDay()+(n?t:0)+7)%7];)a(e,t)}function A(){var e=O.apply(null,arguments),t=M(e),n=_(t);return n}function O(e,t){var n=F.getColCnt(),r=Z?-1:1,i=Z?n-1:0;"object"==typeof e&&(t=e.col,e=e.row);var s=e*n+(t*r+i);return s}function M(e){var t=F.visStart.getDay();return e+=G[t],7*Math.floor(e/J)+Y[(e%J+J)%J]-t}function _(e){var t=h(F.visStart);return a(t,e),t}function D(e){var t=P(e),n=H(t),r=B(n);return r}function P(e){return d(e,F.visStart)}function H(e){var t=F.visStart.getDay();return e+=t,Math.floor(e/7)*J+G[(e%7+7)%7]-G[t]}function B(e){var t=F.getColCnt(),n=Z?-1:1,r=Z?t-1:0,i=Math.floor(e/t),s=(e%t+t)%t*n+r;return{row:i,col:s}}function j(e,t){for(var n=F.getRowCnt(),r=F.getColCnt(),i=[],s=P(e),o=P(t),u=H(s),a=H(o)-1,f=0;n>f;f++){var l=f*r,c=l+r-1,h=Math.max(u,l),p=Math.min(a,c);if(p>=h){var d=B(h),v=B(p),m=[d.col,v.col].sort(),g=M(h)==s,y=M(p)+1==o;i.push({row:f,leftCol:m[0],rightCol:m[1],isStart:g,isEnd:y})}}return i}var F=this;F.element=n,F.calendar=r,F.name=i,F.opt=s,F.trigger=o,F.isEventDraggable=u,F.isEventResizable=f,F.setEventData=c,F.clearEventData=p,F.eventEnd=v,F.reportEventElement=m,F.triggerEventDestroy=g,F.eventElementHandlers=y,F.showEvents=b,F.hideEvents=w,F.eventDrop=S,F.eventResize=x;var q=F.defaultEventEnd,R=r.normalizeEvent,U=r.reportEventChange,z={},W={},V=[],$=r.options;F.isHiddenDay=C,F.skipHiddenDays=L,F.getCellsPerWeek=k,F.dateToCell=D,F.dateToDayOffset=P,F.dayOffsetToCellOffset=H,F.cellOffsetToCell=B,F.cellToDate=A,F.cellToCellOffset=O,F.cellOffsetToDayOffset=M,F.dayOffsetToDate=_,F.rangeToSegments=j;var J,K=s("hiddenDays")||[],Q=[],G=[],Y=[],Z=s("isRTL");(function(){s("weekends")===!1&&K.push(0,6);for(var t=0,n=0;7>t;t++)G[t]=n,Q[t]=-1!=e.inArray(t,K),Q[t]||(Y[n]=t,n++);if(J=n,!J)throw"invalid hiddenDays"})()}function ht(){function t(e,t){var n=r(e,!1,!0);dt(n,function(e,t){_(e.event,t)}),b(n,t),dt(n,function(e,t){L("eventAfterRender",e.event,e.event,t)})}function n(e,t,n){var i=r([e],!0,!1),s=[];return dt(i,function(e,r){e.row===t&&r.css("top",n),s.push(r[0])}),s}function r(t,n,r){var s,a,f=K(),h=n?e("<div/>"):f,p=i(t);return o(p),s=u(p),h[0].innerHTML=s,a=h.children(),n&&f.append(a),l(p,a),dt(p,function(e,t){e.hsides=k(t,!0)}),dt(p,function(e,t){t.width(Math.max(0,e.outerWidth-e.hsides))}),dt(p,function(e,t){e.outerHeight=t.outerHeight(!0)}),c(p,r),p}function i(e){for(var t=[],n=0;e.length>n;n++){var r=s(e[n]);t.push.apply(t,r)}return t}function s(e){for(var t=e.start,n=S(e),r=tt(t,n),i=0;r.length>i;i++)r[i].event=e;return r}function o(e){for(var t=C("isRTL"),n=0;e.length>n;n++){var r=e[n],i=(t?r.isEnd:r.isStart)?$:X,s=(t?r.isStart:r.isEnd)?J:V,o=i(r.leftCol),u=s(r.rightCol);r.left=o,r.outerWidth=u-o}}function u(e){for(var t="",n=0;e.length>n;n++)t+=f(e[n]);return t}function f(e){var t="",n=C("isRTL"),r=e.event,i=r.url,s=["fc-event","fc-event-hori"];A(r)&&s.push("fc-event-draggable"),e.isStart&&s.push("fc-event-start"),e.isEnd&&s.push("fc-event-end"),s=s.concat(r.className),r.source&&(s=s.concat(r.source.className||[]));var o=z(r,C);return t+=i?"<a href='"+q(i)+"'":"<div",t+=" class='"+s.join(" ")+"'"+" style="+"'"+"position:absolute;"+"left:"+e.left+"px;"+o+"'"+">"+"<div class='fc-event-inner'>",!r.allDay&&e.isStart&&(t+="<span class='fc-event-time'>"+q(Q(r.start,r.end,C("timeFormat")))+"</span>"),t+="<span class='fc-event-title'>"+q(r.title||"")+"</span>"+"</div>",e.isEnd&&O(r)&&(t+="<div class='ui-resizable-handle ui-resizable-"+(n?"w":"e")+"'>"+"&nbsp;&nbsp;&nbsp;"+"</div>"),t+="</"+(i?"a":"div")+">"}function l(t,n){for(var r=0;t.length>r;r++){var i=t[r],s=i.event,o=n.eq(r),u=L("eventRender",s,s,o);u===!1?o.remove():(u&&u!==!0&&(u=e(u).css({position:"absolute",left:i.left}),o.replaceWith(u),o=u),i.element=o)}}function c(e,t){var n=p(e),r=y(),i=[];if(t)for(var s=0;r.length>s;s++)r[s].height(n[s]);for(var s=0;r.length>s;s++)i.push(r[s].position().top);dt(e,function(e,t){t.css("top",i[e.row]+e.top)})}function p(e){for(var t=I(),n=U(),r=[],i=v(e),s=0;t>s;s++){for(var o=i[s],u=[],a=0;n>a;a++)u.push(0);for(var f=0;o.length>f;f++){var l=o[f];l.top=j(u.slice(l.leftCol,l.rightCol+1));for(var a=l.leftCol;l.rightCol>=a;a++)u[a]=l.top+l.outerHeight}r.push(j(u))}return r}function v(e){var t,n,r,i=I(),s=[];for(t=0;e.length>t;t++)n=e[t],r=n.row,n.element&&(s[r]?s[r].push(n):s[r]=[n]);for(r=0;i>r;r++)s[r]=m(s[r]||[]);return s}function m(e){for(var t=[],n=g(e),r=0;n.length>r;r++)t.push.apply(t,n[r]);return t}function g(e){e.sort(vt);for(var t=[],n=0;e.length>n;n++){for(var r=e[n],i=0;t.length>i&&pt(r,t[i]);i++);t[i]?t[i].push(r):t[i]=[r]}return t}function y(){var e,t=I(),n=[];for(e=0;t>e;e++)n[e]=W(e).find("div.fc-day-content > div");return n}function b(e,t){var n=K();dt(e,function(e,n,r){var i=e.event;i._id===t?w(i,n,e):n[0]._fci=r}),T(n,e,w)}function w(e,t,n){A(e)&&N.draggableDayEvent(e,t,n),n.isEnd&&O(e)&&N.resizableDayEvent(e,t,n),D(e,t)}function E(e,t){var n,r=et();t.draggable({delay:50,opacity:C("dragOpacity"),revertDuration:C("dragRevertDuration"),start:function(i,s){L("eventDragStart",t,e,i,s),H(e,t),r.start(function(r,i,s,o){if(t.draggable("option","revert",!r||!s&&!o),Y(),r){var u=nt(i),f=nt(r);n=d(f,u),G(a(h(e.start),n),a(S(e),n))}else n=0},i,"drag")},stop:function(i,s){r.stop(),Y(),L("eventDragStop",t,e,i,s),n?B(this,e,n,0,e.allDay,i,s):(t.css("filter",""),P(e,t))}})}function x(t,r,i){var s=C("isRTL"),o=s?"w":"e",u=r.find(".ui-resizable-"+o),f=!1;R(r),r.mousedown(function(e){e.preventDefault()}).click(function(e){f&&(e.preventDefault(),e.stopImmediatePropagation())}),u.mousedown(function(s){function u(n){L("eventResizeStop",this,t,n),e("body").css("cursor",""),l.stop(),Y(),c&&F(this,t,c,0,n),setTimeout(function(){f=!1},0)}if(1==s.which){f=!0;var l=et();I(),U();var c,h,p=r.css("top"),d=e.extend({},t),v=ot(st(t.start));Z(),e("body").css("cursor",o+"-resize").one("mouseup",u),L("eventResizeStart",this,t,s),l.start(function(r,s){if(r){var u=rt(s),f=rt(r);if(f=Math.max(f,v),c=it(f)-it(u)){d.end=a(M(t),c,!0);var l=h;h=n(d,i.row,p),h=e(h),h.find("*").css("cursor",o+"-resize"),l&&l.remove(),H(t)}else h&&(P(t),h.remove(),h=null);Y(),G(t.start,a(S(t),c))}},s)}})}var N=this;N.renderDayEvents=t,N.draggableDayEvent=E,N.resizableDayEvent=x;var C=N.opt,L=N.trigger,A=N.isEventDraggable,O=N.isEventResizable,M=N.eventEnd,_=N.reportEventElement,D=N.eventElementHandlers,P=N.showEvents,H=N.hideEvents,B=N.eventDrop,F=N.eventResize,I=N.getRowCnt,U=N.getColCnt;N.getColWidth;var W=N.allDayRow,X=N.colLeft,V=N.colRight,$=N.colContentLeft,J=N.colContentRight;N.dateToCell;var K=N.getDaySegmentContainer,Q=N.calendar.formatDates,G=N.renderDayOverlay,Y=N.clearOverlays,Z=N.clearSelection,et=N.getHoverListener,tt=N.rangeToSegments,nt=N.cellToDate,rt=N.cellToCellOffset,it=N.cellOffsetToDayOffset,st=N.dateToDayOffset,ot=N.dayOffsetToCellOffset}function pt(e,t){for(var n=0;t.length>n;n++){var r=t[n];if(r.leftCol<=e.rightCol&&r.rightCol>=e.leftCol)return!0}return!1}function dt(e,t){for(var n=0;e.length>n;n++){var r=e[n],i=r.element;i&&t(r,i,n)}}function vt(e,t){return t.rightCol-t.leftCol-(e.rightCol-e.leftCol)||t.event.allDay-e.event.allDay||e.event.start-t.event.start||(e.event.title||"").localeCompare(t.event.title)}function mt(){function t(e,t,i){n(),t||(t=a(e,i)),f(e,t,i),r(e,t,i)}function n(e){c&&(c=!1,l(),u("unselect",null,e))}function r(e,t,n,r){c=!0,u("select",null,e,t,n,r)}function i(t){var i=s.cellToDate,u=s.getIsCellAllDay,a=s.getHoverListener(),c=s.reportDayClick;if(1==t.which&&o("selectable")){n(t);var h;a.start(function(e,t){l(),e&&u(e)?(h=[i(t),i(e)].sort(B),f(h[0],h[1],!0)):h=null},t),e(document).one("mouseup",function(e){a.stop(),h&&(+h[0]==+h[1]&&c(h[0],!0,e),r(h[0],h[1],!0,e))})}}var s=this;s.select=t,s.unselect=n,s.reportSelection=r,s.daySelectionMousedown=i;var o=s.opt,u=s.trigger,a=s.defaultSelectionEnd,f=s.renderSelection,l=s.clearSelection,c=!1;o("selectable")&&o("unselectAuto")&&e(document).mousedown(function(t){var r=o("unselectCancel");r&&e(t.target).parents(r).length||n(t)})}function gt(){function t(t,n){var r=s.shift();return r||(r=e("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),r[0].parentNode!=n[0]&&r.appendTo(n),i.push(r.css(t).show()),r}function n(){for(var e;e=i.shift();)s.push(e.hide().unbind())}var r=this;r.renderOverlay=t,r.clearOverlays=n;var i=[],s=[]}function yt(e){var t,n,r=this;r.build=function(){t=[],n=[],e(t,n)},r.cell=function(e,r){var i,s=t.length,o=n.length,u=-1,a=-1;for(i=0;s>i;i++)if(r>=t[i][0]&&t[i][1]>r){u=i;break}for(i=0;o>i;i++)if(e>=n[i][0]&&n[i][1]>e){a=i;break}return u>=0&&a>=0?{row:u,col:a}:null},r.rect=function(e,r,i,s,o){var u=o.offset();return{top:t[e][0]-u.top,left:n[r][0]-u.left,width:n[s][1]-n[r][0],height:t[i][1]-t[e][0]}}}function bt(t){function n(e){wt(e);var n=t.cell(e.pageX,e.pageY);(!n!=!o||n&&(n.row!=o.row||n.col!=o.col))&&(n?(s||(s=n),i(n,s,n.row-s.row,n.col-s.col)):i(n,s),o=n)}var r,i,s,o,u=this;u.start=function(u,a,f){i=u,s=o=null,t.build(),n(a),r=f||"mousemove",e(document).bind(r,n)},u.stop=function(){return e(document).unbind(r,n),o}}function wt(e){e.pageX===t&&(e.pageX=e.originalEvent.pageX,e.pageY=e.originalEvent.pageY)}function Et(e){function n(t){return i[t]=i[t]||e(t)}var r=this,i={},s={},o={};r.left=function(e){return s[e]=s[e]===t?n(e).position().left:s[e]},r.right=function(e){return o[e]=o[e]===t?r.left(e)+n(e).width():o[e]},r.clear=function(){i={},s={},o={}}}var St={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*",handleWindowResize:!0},xt={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},Tt=e.fullCalendar={version:"1.6.4"},Nt=Tt.views={};e.fn.fullCalendar=function(n){if("string"==typeof n){var i,s=Array.prototype.slice.call(arguments,1);return this.each(function(){var r=e.data(this,"fullCalendar");if(r&&e.isFunction(r[n])){var o=r[n].apply(r,s);i===t&&(i=o),"destroy"==n&&e.removeData(this,"fullCalendar")}}),i!==t?i:this}n=n||{};var o=n.eventSources||[];return delete n.eventSources,n.events&&(o.push(n.events),delete n.events),n=e.extend(!0,{},St,n.isRTL||n.isRTL===t&&St.isRTL?xt:{},n),this.each(function(t,i){var s=e(i),u=new r(s,n,o);s.data("fullCalendar",u),u.render()}),this},Tt.sourceNormalizers=[],Tt.sourceFetchers=[];var Ct={dataType:"json",cache:!1},kt=1;Tt.addDays=a,Tt.cloneDate=h,Tt.parseDate=m,Tt.parseISO8601=g,Tt.parseTime=y,Tt.formatDate=b,Tt.formatDates=w;var Lt=["sun","mon","tue","wed","thu","fri","sat"],At=864e5,Ot=36e5,Mt=6e4,_t={s:function(e){return e.getSeconds()},ss:function(e){return F(e.getSeconds())},m:function(e){return e.getMinutes()},mm:function(e){return F(e.getMinutes())},h:function(e){return e.getHours()%12||12},hh:function(e){return F(e.getHours()%12||12)},H:function(e){return e.getHours()},HH:function(e){return F(e.getHours())},d:function(e){return e.getDate()},dd:function(e){return F(e.getDate())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return e.getMonth()+1},MM:function(e){return F(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},yy:function(e){return(e.getFullYear()+"").substring(2)},yyyy:function(e){return e.getFullYear()},t:function(e){return 12>e.getHours()?"a":"p"},tt:function(e){return 12>e.getHours()?"am":"pm"},T:function(e){return 12>e.getHours()?"A":"P"},TT:function(e){return 12>e.getHours()?"AM":"PM"},u:function(e){return b(e,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(e){var t=e.getDate();return t>10&&20>t?"th":["st","nd","rd"][t%10-1]||"th"},w:function(e,t){return t.weekNumberCalculation(e)},W:function(e){return E(e)}};Tt.dateFormatters=_t,Tt.applyAll=W,Nt.month=V,Nt.basicWeek=$,Nt.basicDay=J,n({weekMode:"fixed"}),Nt.agendaWeek=G,Nt.agendaDay=Y,n({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24,slotEventOverlap:!0})})(jQuery);