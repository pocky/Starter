!function(e,t){var n=function(e,n,r){return t.tpl[e]({locale:n,options:r})},r=function(n,r){this.el=n;var i=r||s;for(var o in i.customTemplates)t.tpl[o]=i.customTemplates[o];this.toolbar=this.createToolbar(n,i),this.editor=this.createEditor(r),window.editor=this.editor,e("iframe.wysihtml5-sandbox").each(function(t,n){e(n.contentWindow).off("focus.wysihtml5").on({"focus.wysihtml5":function(){e("li.dropdown").removeClass("open")}})})};r.prototype={constructor:r,createEditor:function(n){n=n||{},n=e.extend(!0,{},n),n.toolbar=this.toolbar[0];var r=new t.Editor(this.el[0],n);if(n&&n.events)for(var i in n.events)r.on(i,n.events[i]);return r},createToolbar:function(t,r){var i=this,u=e("<ul/>",{"class":"wysihtml5-toolbar",style:"display:none"}),a=r.locale||s.locale||"en";for(var f in s){var l=!1;r[f]!==undefined?r[f]===!0&&(l=!0):l=s[f],l===!0&&(u.append(n(f,o[a],r)),f==="html"&&this.initHtml(u),f==="link"&&this.initInsertLink(u),f==="image"&&this.initInsertImage(u))}if(r.toolbar)for(f in r.toolbar)u.append(r.toolbar[f]);return u.find('a[data-wysihtml5-command="formatBlock"]').click(function(t){var n=t.target||t.srcElement,r=e(n);i.toolbar.find(".current-font").text(r.html())}),u.find('a[data-wysihtml5-command="foreColor"]').click(function(t){var n=t.target||t.srcElement,r=e(n);i.toolbar.find(".current-color").text(r.html())}),this.el.before(u),u},initHtml:function(e){var t='a[data-wysihtml5-action="change_view"]';e.find(t).click(function(n){e.find("a.btn").not(t).toggleClass("disabled")})},initInsertImage:function(t){var n=this,r=t.find(".bootstrap-wysihtml5-insert-image-modal"),i=r.find(".bootstrap-wysihtml5-insert-image-url"),s=r.find("a.btn-primary"),o=i.val(),u,a=function(){var e=i.val();i.val(o),n.editor.currentView.element.focus(),u&&(n.editor.composer.selection.setBookmark(u),u=null),n.editor.composer.commands.exec("insertImage",e)};i.keypress(function(e){e.which==13&&(a(),r.modal("hide"))}),s.click(a),r.on("shown",function(){i.focus()}),r.on("hide",function(){n.editor.currentView.element.focus()}),t.find("a[data-wysihtml5-command=insertImage]").click(function(){var t=e(this).hasClass("wysihtml5-command-active");return t?!0:(n.editor.currentView.element.focus(!1),u=n.editor.composer.selection.getBookmark(),r.appendTo("body").modal("show"),r.on("click.dismiss.modal",'[data-dismiss="modal"]',function(e){e.stopPropagation()}),!1)})},initInsertLink:function(t){var n=this,r=t.find(".bootstrap-wysihtml5-insert-link-modal"),i=r.find(".bootstrap-wysihtml5-insert-link-url"),s=r.find(".bootstrap-wysihtml5-insert-link-target"),o=r.find("a.btn-primary"),u=i.val(),a,f=function(){var e=i.val();i.val(u),n.editor.currentView.element.focus(),a&&(n.editor.composer.selection.setBookmark(a),a=null);var t=s.prop("checked");n.editor.composer.commands.exec("createLink",{href:e,target:t?"_blank":"_self",rel:t?"nofollow":""})},l=!1;i.keypress(function(e){e.which==13&&(f(),r.modal("hide"))}),o.click(f),r.on("shown",function(){i.focus()}),r.on("hide",function(){n.editor.currentView.element.focus()}),t.find("a[data-wysihtml5-command=createLink]").click(function(){var t=e(this).hasClass("wysihtml5-command-active");return t?!0:(n.editor.currentView.element.focus(!1),a=n.editor.composer.selection.getBookmark(),r.appendTo("body").modal("show"),r.on("click.dismiss.modal",'[data-dismiss="modal"]',function(e){e.stopPropagation()}),!1)})}};var i={resetDefaults:function(){e.fn.wysihtml5.defaultOptions=e.extend(!0,{},e.fn.wysihtml5.defaultOptionsCache)},bypassDefaults:function(t){return this.each(function(){var n=e(this);n.data("wysihtml5",new r(n,t))})},shallowExtend:function(t){var n=e.extend({},e.fn.wysihtml5.defaultOptions,t||{},e(this).data()),r=this;return i.bypassDefaults.apply(r,[n])},deepExtend:function(t){var n=e.extend(!0,{},e.fn.wysihtml5.defaultOptions,t||{}),r=this;return i.bypassDefaults.apply(r,[n])},init:function(e){var t=this;return i.shallowExtend.apply(t,[e])}};e.fn.wysihtml5=function(t){if(i[t])return i[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t=="object"||!t)return i.init.apply(this,arguments);e.error("Method "+t+" does not exist on jQuery.wysihtml5")},e.fn.wysihtml5.Constructor=r;var s=e.fn.wysihtml5.defaultOptions={"font-styles":!0,color:!1,emphasis:!0,lists:!0,html:!1,link:!0,image:!0,events:{},parserRules:{classes:{"wysiwyg-color-silver":1,"wysiwyg-color-gray":1,"wysiwyg-color-white":1,"wysiwyg-color-maroon":1,"wysiwyg-color-red":1,"wysiwyg-color-purple":1,"wysiwyg-color-fuchsia":1,"wysiwyg-color-green":1,"wysiwyg-color-lime":1,"wysiwyg-color-olive":1,"wysiwyg-color-yellow":1,"wysiwyg-color-navy":1,"wysiwyg-color-blue":1,"wysiwyg-color-teal":1,"wysiwyg-color-aqua":1,"wysiwyg-color-orange":1},tags:{b:{},i:{},strong:{},em:{},p:{},br:{},ol:{},ul:{},li:{},h1:{},h2:{},h3:{},h4:{},h5:{},h6:{},blockquote:{},u:1,img:{check_attributes:{width:"numbers",alt:"alt",src:"url",height:"numbers"}},a:{check_attributes:{href:"url"},set_attributes:{target:"_blank",rel:"nofollow"}},span:1,div:1,code:1,pre:1}},locale:"en"};typeof e.fn.wysihtml5.defaultOptionsCache=="undefined"&&(e.fn.wysihtml5.defaultOptionsCache=e.extend(!0,{},e.fn.wysihtml5.defaultOptions));var o=e.fn.wysihtml5.locale={}}(window.jQuery,window.wysihtml5);