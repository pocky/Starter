/*
Input Mask plugin extensions
http://github.com/RobinHerbots/jquery.inputmask
Copyright (c) 2010 - 2014 Robin Herbots
Licensed under the MIT license (http://www.opensource.org/licenses/mit-license.php)
Version: 0.0.0

Optional extensions on the jquery.inputmask base
*/

(function(e){e.extend(e.inputmask.defaults.definitions,{h:{validator:"[01][0-9]|2[0-3]",cardinality:2,prevalidator:[{validator:"[0-2]",cardinality:1}]},s:{validator:"[0-5][0-9]",cardinality:2,prevalidator:[{validator:"[0-5]",cardinality:1}]},d:{validator:"0[1-9]|[12][0-9]|3[01]",cardinality:2,prevalidator:[{validator:"[0-3]",cardinality:1}]},m:{validator:"0[1-9]|1[012]",cardinality:2,prevalidator:[{validator:"[01]",cardinality:1}]},y:{validator:"(19|20)\\d{2}",cardinality:4,prevalidator:[{validator:"[12]",cardinality:1},{validator:"(19|20)",cardinality:2},{validator:"(19|20)\\d",cardinality:3}]}}),e.extend(e.inputmask.defaults.aliases,{"dd/mm/yyyy":{mask:"1/2/y",placeholder:"dd/mm/yyyy",regex:{val1pre:new RegExp("[0-3]"),val1:new RegExp("0[1-9]|[12][0-9]|3[01]"),val2pre:function(t){var n=e.inputmask.escapeRegex.call(this,t);return new RegExp("((0[1-9]|[12][0-9]|3[01])"+n+"[01])")},val2:function(t){var n=e.inputmask.escapeRegex.call(this,t);return new RegExp("((0[1-9]|[12][0-9])"+n+"(0[1-9]|1[012]))|(30"+n+"(0[13-9]|1[012]))|(31"+n+"(0[13578]|1[02]))")}},leapday:"29/02/",separator:"/",yearrange:{minyear:1900,maxyear:2099},isInYearRange:function(e,t,n){var r=parseInt(e.concat(t.toString().slice(e.length))),i=parseInt(e.concat(n.toString().slice(e.length)));return(r!=NaN?t<=r&&r<=n:!1)||(i!=NaN?t<=i&&i<=n:!1)},determinebaseyear:function(e,t,n){var r=(new Date).getFullYear();if(e>r)return e;if(t<r){var i=t.toString().slice(0,2),s=t.toString().slice(2,4);while(t<i+n)i--;var o=i+s;return e>o?e:o}return r},onKeyUp:function(t,n,r){var i=e(this);if(t.ctrlKey&&t.keyCode==r.keyCode.RIGHT){var s=new Date;i.val(s.getDate().toString()+(s.getMonth()+1).toString()+s.getFullYear().toString())}},definitions:{1:{validator:function(e,t,n,r,i){var s=i.regex.val1.test(e);if(!r&&!s)if(e.charAt(1)==i.separator||"-./".indexOf(e.charAt(1))!=-1){s=i.regex.val1.test("0"+e.charAt(0));if(s)return t[n-1]="0",{pos:n,c:e.charAt(0)}}return s},cardinality:2,prevalidator:[{validator:function(e,t,n,r,i){var s=i.regex.val1pre.test(e);if(!r&&!s){s=i.regex.val1.test("0"+e);if(s)return t[n]="0",n++,{pos:n}}return s},cardinality:1}]},2:{validator:function(e,t,n,r,i){var s=t.join("").substr(0,3);s.indexOf(i.placeholder[0])!=-1&&(s="01"+i.separator);var o=i.regex.val2(i.separator).test(s+e);if(!r&&!o)if(e.charAt(1)==i.separator||"-./".indexOf(e.charAt(1))!=-1){o=i.regex.val2(i.separator).test(s+"0"+e.charAt(0));if(o)return t[n-1]="0",{pos:n,c:e.charAt(0)}}return o},cardinality:2,prevalidator:[{validator:function(e,t,n,r,i){var s=t.join("").substr(0,3);s.indexOf(i.placeholder[0])!=-1&&(s="01"+i.separator);var o=i.regex.val2pre(i.separator).test(s+e);if(!r&&!o){o=i.regex.val2(i.separator).test(s+"0"+e);if(o)return t[n]="0",n++,{pos:n}}return o},cardinality:1}]},y:{validator:function(e,t,n,r,i){if(i.isInYearRange(e,i.yearrange.minyear,i.yearrange.maxyear)){var s=t.join("").substr(0,6);if(s!=i.leapday)return!0;var o=parseInt(e,10);return o%4===0?o%100===0?o%400===0?!0:!1:!0:!1}return!1},cardinality:4,prevalidator:[{validator:function(e,t,n,r,i){var s=i.isInYearRange(e,i.yearrange.minyear,i.yearrange.maxyear);if(!r&&!s){var o=i.determinebaseyear(i.yearrange.minyear,i.yearrange.maxyear,e+"0").toString().slice(0,1);s=i.isInYearRange(o+e,i.yearrange.minyear,i.yearrange.maxyear);if(s)return t[n++]=o[0],{pos:n};o=i.determinebaseyear(i.yearrange.minyear,i.yearrange.maxyear,e+"0").toString().slice(0,2),s=i.isInYearRange(o+e,i.yearrange.minyear,i.yearrange.maxyear);if(s)return t[n++]=o[0],t[n++]=o[1],{pos:n}}return s},cardinality:1},{validator:function(e,t,n,r,i){var s=i.isInYearRange(e,i.yearrange.minyear,i.yearrange.maxyear);if(!r&&!s){var o=i.determinebaseyear(i.yearrange.minyear,i.yearrange.maxyear,e).toString().slice(0,2);s=i.isInYearRange(e[0]+o[1]+e[1],i.yearrange.minyear,i.yearrange.maxyear);if(s)return t[n++]=o[1],{pos:n};o=i.determinebaseyear(i.yearrange.minyear,i.yearrange.maxyear,e).toString().slice(0,2);if(i.isInYearRange(o+e,i.yearrange.minyear,i.yearrange.maxyear)){var u=t.join("").substr(0,6);if(u!=i.leapday)s=!0;else{var a=parseInt(e,10);a%4===0?a%100===0?a%400===0?s=!0:s=!1:s=!0:s=!1}}else s=!1;if(s)return t[n-1]=o[0],t[n++]=o[1],t[n++]=e[0],{pos:n}}return s},cardinality:2},{validator:function(e,t,n,r,i){return i.isInYearRange(e,i.yearrange.minyear,i.yearrange.maxyear)},cardinality:3}]}},insertMode:!1,autoUnmask:!1},"mm/dd/yyyy":{placeholder:"mm/dd/yyyy",alias:"dd/mm/yyyy",regex:{val2pre:function(t){var n=e.inputmask.escapeRegex.call(this,t);return new RegExp("((0[13-9]|1[012])"+n+"[0-3])|(02"+n+"[0-2])")},val2:function(t){var n=e.inputmask.escapeRegex.call(this,t);return new RegExp("((0[1-9]|1[012])"+n+"(0[1-9]|[12][0-9]))|((0[13-9]|1[012])"+n+"30)|((0[13578]|1[02])"+n+"31)")},val1pre:new RegExp("[01]"),val1:new RegExp("0[1-9]|1[012]")},leapday:"02/29/",onKeyUp:function(t,n,r){var i=e(this);if(t.ctrlKey&&t.keyCode==r.keyCode.RIGHT){var s=new Date;i.val((s.getMonth()+1).toString()+s.getDate().toString()+s.getFullYear().toString())}}},"yyyy/mm/dd":{mask:"y/1/2",placeholder:"yyyy/mm/dd",alias:"mm/dd/yyyy",leapday:"/02/29",onKeyUp:function(t,n,r){var i=e(this);if(t.ctrlKey&&t.keyCode==r.keyCode.RIGHT){var s=new Date;i.val(s.getFullYear().toString()+(s.getMonth()+1).toString()+s.getDate().toString())}},definitions:{2:{validator:function(e,t,n,r,i){var s=t.join("").substr(5,3);s.indexOf(i.placeholder[5])!=-1&&(s="01"+i.separator);var o=i.regex.val2(i.separator).test(s+e);if(!r&&!o)if(e.charAt(1)==i.separator||"-./".indexOf(e.charAt(1))!=-1){o=i.regex.val2(i.separator).test(s+"0"+e.charAt(0));if(o)return t[n-1]="0",{pos:n,c:e.charAt(0)}}if(o){var u=t.join("").substr(4,4)+e;if(u!=i.leapday)return!0;var a=parseInt(t.join("").substr(0,4),10);return a%4===0?a%100===0?a%400===0?!0:!1:!0:!1}return o},cardinality:2,prevalidator:[{validator:function(e,t,n,r,i){var s=t.join("").substr(5,3);s.indexOf(i.placeholder[5])!=-1&&(s="01"+i.separator);var o=i.regex.val2pre(i.separator).test(s+e);if(!r&&!o){o=i.regex.val2(i.separator).test(s+"0"+e);if(o)return t[n]="0",n++,{pos:n}}return o},cardinality:1}]}}},"dd.mm.yyyy":{mask:"1.2.y",placeholder:"dd.mm.yyyy",leapday:"29.02.",separator:".",alias:"dd/mm/yyyy"},"dd-mm-yyyy":{mask:"1-2-y",placeholder:"dd-mm-yyyy",leapday:"29-02-",separator:"-",alias:"dd/mm/yyyy"},"mm.dd.yyyy":{mask:"1.2.y",placeholder:"mm.dd.yyyy",leapday:"02.29.",separator:".",alias:"mm/dd/yyyy"},"mm-dd-yyyy":{mask:"1-2-y",placeholder:"mm-dd-yyyy",leapday:"02-29-",separator:"-",alias:"mm/dd/yyyy"},"yyyy.mm.dd":{mask:"y.1.2",placeholder:"yyyy.mm.dd",leapday:".02.29",separator:".",alias:"yyyy/mm/dd"},"yyyy-mm-dd":{mask:"y-1-2",placeholder:"yyyy-mm-dd",leapday:"-02-29",separator:"-",alias:"yyyy/mm/dd"},datetime:{mask:"1/2/y h:s",placeholder:"dd/mm/yyyy hh:mm",alias:"dd/mm/yyyy",regex:{hrspre:new RegExp("[012]"),hrs24:new RegExp("2[0-9]|1[3-9]"),hrs:new RegExp("[01][0-9]|2[0-3]"),ampm:new RegExp("^[a|p|A|P][m|M]")},timeseparator:":",hourFormat:"24",definitions:{h:{validator:function(e,t,n,r,i){var s=i.regex.hrs.test(e);if(!r&&!s)if(e.charAt(1)==i.timeseparator||"-.:".indexOf(e.charAt(1))!=-1){s=i.regex.hrs.test("0"+e.charAt(0));if(s)return t[n-1]="0",t[n]=e.charAt(0),n++,{pos:n}}if(s&&i.hourFormat!=="24"&&i.regex.hrs24.test(e)){var o=parseInt(e,10);return o==24?(t[n+5]="a",t[n+6]="m"):(t[n+5]="p",t[n+6]="m"),o-=12,o<10?(t[n]=o.toString(),t[n-1]="0"):(t[n]=o.toString().charAt(1),t[n-1]=o.toString().charAt(0)),{pos:n,c:t[n]}}return s},cardinality:2,prevalidator:[{validator:function(e,t,n,r,i){var s=i.regex.hrspre.test(e);if(!r&&!s){s=i.regex.hrs.test("0"+e);if(s)return t[n]="0",n++,{pos:n}}return s},cardinality:1}]},t:{validator:function(e,t,n,r,i){return i.regex.ampm.test(e+"m")},casing:"lower",cardinality:1}},insertMode:!1,autoUnmask:!1},datetime12:{mask:"1/2/y h:s t\\m",placeholder:"dd/mm/yyyy hh:mm xm",alias:"datetime",hourFormat:"12"},"hh:mm t":{mask:"h:s t\\m",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"h:s t":{mask:"h:s t\\m",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"hh:mm:ss":{mask:"h:s:s",autoUnmask:!1},"hh:mm":{mask:"h:s",autoUnmask:!1},date:{alias:"dd/mm/yyyy"},"mm/yyyy":{mask:"1/y",placeholder:"mm/yyyy",leapday:"donotuse",separator:"/",alias:"mm/dd/yyyy"}})})(jQuery);