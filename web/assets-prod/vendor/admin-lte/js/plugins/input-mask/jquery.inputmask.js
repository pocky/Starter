/**
* @license Input Mask plugin for jquery
* http://github.com/RobinHerbots/jquery.inputmask
* Copyright (c) 2010 - 2014 Robin Herbots
* Licensed under the MIT license (http://www.opensource.org/licenses/mit-license.php)
* Version: 0.0.0
*/

(function(e){if(e.fn.inputmask===undefined){function t(e){var t=document.createElement("input"),e="on"+e,n=e in t;return n||(t.setAttribute(e,"return;"),n=typeof t[e]=="function"),t=null,n}function n(t,r,i){var s=i.aliases[t];return s?(s.alias&&n(s.alias,undefined,i),e.extend(!0,i,s),e.extend(!0,i,r),!0):!1}function r(t){function i(n){t.numericInput&&(n=n.split("").reverse().join(""));var r=!1,i=0,s=t.greedy,o=t.repeat;o=="*"&&(s=!1),n.length==1&&s==0&&o!=0&&(t.placeholder="");var u=e.map(n.split(""),function(e,n){var s=[];if(e==t.escapeChar)r=!0;else if(e!=t.optionalmarker.start&&e!=t.optionalmarker.end||r){var o=t.definitions[e];if(o&&!r)for(var u=0;u<o.cardinality;u++)s.push(t.placeholder.charAt((i+u)%t.placeholder.length));else s.push(e),r=!1;return i+=s.length,s}}),a=u.slice();for(var f=1;f<o&&s;f++)a=a.concat(u.slice());return{mask:a,repeat:o,greedy:s}}function s(n){t.numericInput&&(n=n.split("").reverse().join(""));var r=!1,i=!1,s=!1;return e.map(n.split(""),function(e,n){var o=[];if(e==t.escapeChar)i=!0;else if(e==t.optionalmarker.start&&!i)r=!0,s=!0;else{if(e!=t.optionalmarker.end||!!i){var u=t.definitions[e];if(u&&!i){var a=u.prevalidator,f=a?a.length:0;for(var l=1;l<u.cardinality;l++){var c=f>=l?a[l-1]:[],h=c.validator,p=c.cardinality;o.push({fn:h?typeof h=="string"?new RegExp(h):new function(){this.test=h}:new RegExp("."),cardinality:p?p:1,optionality:r,newBlockMarker:r==1?s:!1,offset:0,casing:u.casing,def:u.definitionSymbol||e}),r==1&&(s=!1)}o.push({fn:u.validator?typeof u.validator=="string"?new RegExp(u.validator):new function(){this.test=u.validator}:new RegExp("."),cardinality:u.cardinality,optionality:r,newBlockMarker:s,offset:0,casing:u.casing,def:u.definitionSymbol||e})}else o.push({fn:null,cardinality:0,optionality:r,newBlockMarker:s,offset:0,casing:null,def:e}),i=!1;return s=!1,o}r=!1,s=!0}})}function o(e){return t.optionalmarker.start+e+t.optionalmarker.end}function u(e){var n=0,r=0,i=e.length;for(var s=0;s<i;s++){e.charAt(s)==t.optionalmarker.start&&n++,e.charAt(s)==t.optionalmarker.end&&r++;if(n>0&&n==r)break}var o=[e.substring(0,s)];return s<i&&o.push(e.substring(s+1,i)),o}function a(e){var n=e.length;for(var r=0;r<n;r++)if(e.charAt(r)==t.optionalmarker.start)break;var i=[e.substring(0,r)];return r<n&&i.push(e.substring(r+1,n)),i}function f(t,l,c){var h=u(l),p,d,v=a(h[0]);v.length>1?(p=t+v[0]+o(v[1])+(h.length>1?h[1]:""),e.inArray(p,r)==-1&&p!=""&&(r.push(p),d=i(p),n.push({mask:p,_buffer:d.mask,buffer:d.mask.slice(),tests:s(p),lastValidPosition:-1,greedy:d.greedy,repeat:d.repeat,metadata:c})),p=t+v[0]+(h.length>1?h[1]:""),e.inArray(p,r)==-1&&p!=""&&(r.push(p),d=i(p),n.push({mask:p,_buffer:d.mask,buffer:d.mask.slice(),tests:s(p),lastValidPosition:-1,greedy:d.greedy,repeat:d.repeat,metadata:c})),a(v[1]).length>1&&f(t+v[0],v[1]+h[1],c),h.length>1&&a(h[1]).length>1&&(f(t+v[0]+o(v[1]),h[1],c),f(t+v[0],h[1],c))):(p=t+h,e.inArray(p,r)==-1&&p!=""&&(r.push(p),d=i(p),n.push({mask:p,_buffer:d.mask,buffer:d.mask.slice(),tests:s(p),lastValidPosition:-1,greedy:d.greedy,repeat:d.repeat,metadata:c})))}var n=[],r=[];return e.isFunction(t.mask)&&(t.mask=t.mask.call(this,t)),e.isArray(t.mask)?e.each(t.mask,function(e,t){t["mask"]!=undefined?f("",t.mask.toString(),t):f("",t.toString())}):f("",t.mask.toString()),t.greedy?n:n.sort(function(e,t){return e.mask.length-t.mask.length})}var i=navigator.userAgent.match(new RegExp("msie 10","i"))!==null,s=navigator.userAgent.match(new RegExp("iphone","i"))!==null,o=navigator.userAgent.match(new RegExp("android.*safari.*","i"))!==null,u=navigator.userAgent.match(new RegExp("android.*chrome.*","i"))!==null,a=t("paste")?"paste":t("input")?"input":"propertychange";function f(t,n,r,f){function g(){return t[n]}function y(){return g().tests}function b(){return g()._buffer}function w(){return g().buffer}function E(i,s,o){function u(e,t,n,i){var s=T(e),o=n?1:0,u="",a=t.buffer;for(var f=t.tests[s].cardinality;f>o;f--)u+=A(a,s-(f-1));return n&&(u+=n),t["tests"][s].fn!=null?t.tests[s].fn.test(u,a,e,i,r):n==A(t["_buffer"],e,true)||n==r.skipOptionalPartCharacter?{refresh:!0,c:A(t._buffer,e,!0),pos:e}:!1}function a(n,r){var o=!1;e.each(r,function(t,r){o=e.inArray(r["activeMasksetIndex"],n)==-1&&r.result!==!1;if(o)return!1});if(o)r=e.map(r,function(r,i){if(e.inArray(r["activeMasksetIndex"],n)==-1)return r;t[r.activeMasksetIndex].lastValidPosition=p});else{var a=-1,f=-1,l;e.each(r,function(t,r){e.inArray(r["activeMasksetIndex"],n)!=-1&&r.result!==!1&(a==-1||a>r.result.pos)&&(a=r.result.pos,f=r.activeMasksetIndex)}),r=e.map(r,function(r,o){if(e.inArray(r["activeMasksetIndex"],n)!=-1){if(r["result"]["pos"]==a)return r;if(r.result!==!1){for(var c=i;c<a;c++){l=u(c,t[r.activeMasksetIndex],t[f].buffer[c],!0);if(l===!1){t[r.activeMasksetIndex].lastValidPosition=a-1;break}L(t[r.activeMasksetIndex].buffer,c,t[f].buffer[c],!0),t[r.activeMasksetIndex].lastValidPosition=c}return l=u(a,t[r.activeMasksetIndex],s,!0),l!==!1&&(L(t[r.activeMasksetIndex].buffer,a,s,!0),t[r.activeMasksetIndex].lastValidPosition=a),r}}})}return r}o=o===!0;if(o){var f=u(i,g(),s,o);return f===!0&&(f={pos:i}),f}var l=[],f=!1,c=n,h=w().slice(),p=g().lastValidPosition,d=k(i),v=[];return e.each(t,function(e,t){if(typeof t=="object"){n=e;var r=i,a=g().lastValidPosition,d;if(a==p){if(r-p>1)for(var m=a==-1?0:a;m<r;m++){d=u(m,g(),h[m],!0);if(d===!1)break;L(w(),m,h[m],!0),d===!0&&(d={pos:m});var y=d.pos||m;g().lastValidPosition<y&&(g().lastValidPosition=y)}if(!x(r)&&!u(r,g(),s,o)){var b=C(r)-r;for(var E=0;E<b;E++)if(u(++r,g(),s,o)!==!1)break;v.push(n)}}if(g().lastValidPosition>=p||n==c)if(r>=0&&r<N()){f=u(r,g(),s,o);if(f!==!1){f===!0&&(f={pos:r});var y=f.pos||r;g().lastValidPosition<y&&(g().lastValidPosition=y)}l.push({activeMasksetIndex:e,result:f})}}}),n=c,a(v,l)}function S(){var r=n,i={activeMasksetIndex:0,lastValidPosition:-1,next:-1};e.each(t,function(e,t){typeof t=="object"&&(n=e,g().lastValidPosition>i.lastValidPosition?(i.activeMasksetIndex=e,i.lastValidPosition=g().lastValidPosition,i.next=C(g().lastValidPosition)):g()["lastValidPosition"]==i["lastValidPosition"]&&(i["next"]==-1||i.next>C(g().lastValidPosition))&&(i.activeMasksetIndex=e,i.lastValidPosition=g().lastValidPosition,i.next=C(g().lastValidPosition)))}),n=i["lastValidPosition"]!=-1&&t[r]["lastValidPosition"]==i["lastValidPosition"]?r:i.activeMasksetIndex,r!=n&&(_(w(),C(i.lastValidPosition),N()),g().writeOutBuffer=!0),h.data("_inputmask").activeMasksetIndex=n}function x(e){var t=T(e),n=y()[t];return n!=undefined?n.fn:!1}function T(e){return e%y().length}function N(){return r.getMaskLength(b(),g().greedy,g().repeat,w(),r)}function C(e){var t=N();if(e>=t)return t;var n=e;while(++n<t&&!x(n));return n}function k(e){var t=e;if(t<=0)return 0;while(--t>0&&!x(t));return t}function L(e,t,n,r){r&&(t=O(e,t));var i=y()[T(t)],s=n;if(s!=undefined&&i!=undefined)switch(i.casing){case"upper":s=n.toUpperCase();break;case"lower":s=n.toLowerCase()}e[t]=s}function A(e,t,n){return n&&(t=O(e,t)),e[t]}function O(e,t){var n;while(e[t]==undefined&&e.length<N()){n=0;while(b()[n]!==undefined)e.push(b()[n++])}return t}function M(e,t,n){e._valueSet(t.join("")),n!=undefined&&R(e,n)}function _(e,t,n,r){for(var i=t,s=N();i<n&&i<s;i++)r===!0?x(i)||L(e,i,""):L(e,i,A(b().slice(),i,!0))}function D(e,t){var n=T(t);L(e,t,A(b(),n))}function P(e){return r.placeholder.charAt(e%r.placeholder.length)}function H(r,i,s,o,u){var a=o!=undefined?o.slice():j(r._valueGet()).split("");e.each(t,function(e,t){typeof t=="object"&&(t.buffer=t._buffer.slice(),t.lastValidPosition=-1,t.p=-1)}),s!==!0&&(n=0),i&&r._valueSet("");var f=N();e.each(a,function(t,n){if(u===!0){var o=g().p,a=o==-1?o:k(o),f=a==-1?t:C(a);e.inArray(n,b().slice(a+1,f))==-1&&G.call(r,undefined,!0,n.charCodeAt(0),i,s,t)}else G.call(r,undefined,!0,n.charCodeAt(0),i,s,t)}),s===!0&&g()["p"]!=-1&&(g().lastValidPosition=k(g().p))}function B(t){return e.inputmask.escapeRegex.call(this,t)}function j(e){return e.replace(new RegExp("("+B(b().join(""))+")*$"),"")}function F(e){var t=w(),n=t.slice(),r,i;for(var i=n.length-1;i>=0;i--){var r=T(i);if(!y()[r].optionality)break;if(!!x(i)&&!!E(i,t[i],!0))break;n.pop()}M(e,n)}function I(t,n){if(y()&&(n===!0||!t.hasClass("hasDatepicker"))){var i=e.map(w(),function(e,t){return x(t)&&E(t,e,!0)?e:null}),s=(l?i.reverse():i).join("");return r.onUnMask!=undefined?r.onUnMask.call(this,w().join(""),s):s}return t[0]._valueGet()}function q(e){if(l&&typeof e=="number"&&(!r.greedy||r.placeholder!="")){var t=w().length;e=t-e}return e}function R(t,n,i){var s=t.jquery&&t.length>0?t[0]:t,u;if(typeof n!="number")return e(t).is(":visible")?(s.setSelectionRange?(n=s.selectionStart,i=s.selectionEnd):document.selection&&document.selection.createRange&&(u=document.selection.createRange(),n=0-u.duplicate().moveStart("character",-1e5),i=n+u.text.length),n=q(n),i=q(i),{begin:n,end:i}):{begin:0,end:0};n=q(n),i=q(i);if(!e(t).is(":visible"))return;i=typeof i=="number"?i:n,s.scrollLeft=s.scrollWidth,r.insertMode==0&&n==i&&i++,s.setSelectionRange?(s.selectionStart=n,s.selectionEnd=o?n:i):s.createTextRange&&(u=s.createTextRange(),u.collapse(!0),u.moveEnd("character",i),u.moveStart("character",n),u.select())}function U(i){if(r.repeat=="*")return undefined;var s=!1,o=0,u=n;return e.each(t,function(e,t){if(typeof t=="object"){n=e;var r=k(N());if(t.lastValidPosition>=o&&t["lastValidPosition"]==r){var u=!0;for(var a=0;a<=r;a++){var f=x(a),l=T(a);if(f&&(i[a]==undefined||i[a]==P(a))||!f&&i[a]!=b()[l]){u=!1;break}}s=s||u;if(s)return!1}o=t.lastValidPosition}}),n=u,s}function z(e,t){return l?e-t>1||e-t==1&&r.insertMode:t-e>1||t-e==1&&r.insertMode}function W(t){var n=e._data(t).events;e.each(n,function(t,n){e.each(n,function(e,t){if(t.namespace=="inputmask"&&t.type!="setvalue"){var n=t.handler;t.handler=function(e){if(!this.readOnly&&!this.disabled)return n.apply(this,arguments);e.preventDefault}}})})}function X(t){var n;Object.getOwnPropertyDescriptor&&(n=Object.getOwnPropertyDescriptor(t,"value"));if(n&&n.get){if(!t._valueGet){var r=n.get,i=n.set;t._valueGet=function(){return l?r.call(this).split("").reverse().join(""):r.call(this)},t._valueSet=function(e){i.call(this,l?e.split("").reverse().join(""):e)},Object.defineProperty(t,"value",{get:function(){var t=e(this),n=e(this).data("_inputmask"),i=n.masksets,s=n.activeMasksetIndex;return n&&n.opts.autoUnmask?t.inputmask("unmaskedvalue"):r.call(this)!=i[s]["_buffer"].join("")?r.call(this):""},set:function(t){i.call(this,t),e(this).triggerHandler("setvalue.inputmask")}})}}else if(document.__lookupGetter__&&t.__lookupGetter__("value")){if(!t._valueGet){var r=t.__lookupGetter__("value"),i=t.__lookupSetter__("value");t._valueGet=function(){return l?r.call(this).split("").reverse().join(""):r.call(this)},t._valueSet=function(e){i.call(this,l?e.split("").reverse().join(""):e)},t.__defineGetter__("value",function(){var t=e(this),n=e(this).data("_inputmask"),i=n.masksets,s=n.activeMasksetIndex;return n&&n.opts.autoUnmask?t.inputmask("unmaskedvalue"):r.call(this)!=i[s]["_buffer"].join("")?r.call(this):""}),t.__defineSetter__("value",function(t){i.call(this,t),e(this).triggerHandler("setvalue.inputmask")})}}else{t._valueGet||(t._valueGet=function(){return l?this.value.split("").reverse().join(""):this.value},t._valueSet=function(e){this.value=l?e.split("").reverse().join(""):e});if(e.valHooks.text==undefined||e.valHooks.text.inputmaskpatch!=1){var r=e.valHooks.text&&e.valHooks.text.get?e.valHooks.text.get:function(e){return e.value},i=e.valHooks.text&&e.valHooks.text.set?e.valHooks.text.set:function(e,t){return e.value=t,e};jQuery.extend(e.valHooks,{text:{get:function(t){var n=e(t);if(n.data("_inputmask")){if(n.data("_inputmask").opts.autoUnmask)return n.inputmask("unmaskedvalue");var i=r(t),s=n.data("_inputmask"),o=s.masksets,u=s.activeMasksetIndex;return i!=o[u]["_buffer"].join("")?i:""}return r(t)},set:function(t,n){var r=e(t),s=i(t,n);return r.data("_inputmask")&&r.triggerHandler("setvalue.inputmask"),s},inputmaskpatch:!0}})}}}function V(e,t,n,r){var i=w();if(r!==!1)while(!x(e)&&e-1>=0)e--;for(var s=e;s<t&&s<N();s++)if(x(s)){D(i,s);var o=C(s),u=A(i,o);if(u!=P(o))if(o<N()&&E(s,u,!0)!==!1&&y()[T(s)].def==y()[T(o)].def)L(i,s,u,!0);else if(x(s))break}else D(i,s);n!=undefined&&L(i,k(t),n);if(g()["greedy"]==0){var a=j(i.join("")).split("");i.length=a.length;for(var s=0,f=i.length;s<f;s++)i[s]=a[s];i.length==0&&(g().buffer=b().slice())}return e}function J(e,t,n){var r=w();if(A(r,e,true)!=P(e))for(var i=k(t);i>e&&i>=0;i--)if(x(i)){var s=k(i),o=A(r,s);o!=P(s)&&E(s,o,!0)!==!1&&y()[T(i)].def==y()[T(s)].def&&(L(r,i,o,!0),D(r,s))}else D(r,i);n!=undefined&&A(r,e)==P(e)&&L(r,e,n);var u=r.length;if(g()["greedy"]==0){var a=j(r.join("")).split("");r.length=a.length;for(var i=0,f=r.length;i<f;i++)r[i]=a[i];r.length==0&&(g().buffer=b().slice())}return t-(u-r.length)}function K(e,n,i){if(r.numericInput||l){switch(n){case r.keyCode.BACKSPACE:n=r.keyCode.DELETE;break;case r.keyCode.DELETE:n=r.keyCode.BACKSPACE}if(l){var s=i.end;i.end=i.begin,i.begin=s}}var o=!0;if(i.begin==i.end){var u=n==r.keyCode.BACKSPACE?i.begin-1:i.begin;r.isNumeric&&r.radixPoint!=""&&w()[u]==r.radixPoint&&(i.begin=w().length-1==u?i.begin:n==r.keyCode.BACKSPACE?u:C(u),i.end=i.begin),o=!1,n==r.keyCode.BACKSPACE?i.begin--:n==r.keyCode.DELETE&&i.end++}else i.end-i.begin==1&&!r.insertMode&&(o=!1,n==r.keyCode.BACKSPACE&&i.begin--);_(w(),i.begin,i.end);var a=N();if(r.greedy==0)V(i.begin,a,undefined,!l&&n==r.keyCode.BACKSPACE&&!o);else{var f=i.begin;for(var c=i.begin;c<i.end;c++)if(x(c)||!o)f=V(i.begin,a,undefined,!l&&n==r.keyCode.BACKSPACE&&!o);o||(i.begin=f)}var h=C(-1);_(w(),i.begin,i.end,!0),H(e,!1,t[1]==undefined||h>=i.end,w()),g().lastValidPosition<h?(g().lastValidPosition=-1,g().p=h):g().p=i.begin}function Q(t){d=!1;var n=this,i=e(n),o=t.keyCode,u=R(n);o==r.keyCode.BACKSPACE||o==r.keyCode.DELETE||s&&o==127||t.ctrlKey&&o==88?(t.preventDefault(),o==88&&(c=w().join("")),K(n,o,u),S(),M(n,w(),g().p),n._valueGet()==b().join("")&&i.trigger("cleared"),r.showTooltip&&i.prop("title",g().mask)):o==r.keyCode.END||o==r.keyCode.PAGE_DOWN?setTimeout(function(){var e=C(g().lastValidPosition);!r.insertMode&&e==N()&&!t.shiftKey&&e--,R(n,t.shiftKey?u.begin:e,e)},0):o==r.keyCode.HOME&&!t.shiftKey||o==r.keyCode.PAGE_UP?R(n,0,t.shiftKey?u.begin:0):o==r.keyCode.ESCAPE||o==90&&t.ctrlKey?(H(n,!0,!1,c.split("")),i.click()):o==r.keyCode.INSERT&&!t.shiftKey&&!t.ctrlKey?(r.insertMode=!r.insertMode,R(n,!r.insertMode&&u.begin==N()?u.begin-1:u.begin)):r.insertMode==0&&!t.shiftKey&&(o==r.keyCode.RIGHT?setTimeout(function(){var e=R(n);R(n,e.begin)},0):o==r.keyCode.LEFT&&setTimeout(function(){var e=R(n);R(n,e.begin-1)},0));var a=R(n);r.onKeyDown.call(this,t,w(),r)===!0&&R(n,a.begin,a.end),m=e.inArray(o,r.ignorables)!=-1}function G(i,s,o,u,a,f){if(o==undefined&&d)return!1;d=!0;var l=this,c=e(l);i=i||window.event;var o=s?o:i.which||i.charCode||i.keyCode;if(s!==!0&&(!i.ctrlKey||!i.altKey)&&(i.ctrlKey||i.metaKey||m))return!0;if(o){s!==!0&&o==46&&i.shiftKey==0&&r.radixPoint==","&&(o=44);var h,p,y,b=String.fromCharCode(o);if(s){var x=a?f:g().lastValidPosition+1;h={begin:x,end:x}}else h=R(l);var T=z(h.begin,h.end),O=!1,_=n;T&&(n=_,e.each(t,function(e,t){typeof t=="object"&&(n=e,g().undoBuffer=w().join(""))}),K(l,r.keyCode.DELETE,h),r.insertMode||e.each(t,function(e,t){typeof t=="object"&&(n=e,J(h.begin,N()),g().lastValidPosition=C(g().lastValidPosition))}),n=_);var D=w().join("").indexOf(r.radixPoint);r.isNumeric&&s!==!0&&D!=-1&&(r.greedy&&h.begin<=D?(h.begin=k(h.begin),h.end=h.begin):b==r.radixPoint&&(h.begin=D,h.end=h.begin));var H=h.begin;p=E(H,b,a),a===!0&&(p=[{activeMasksetIndex:n,result:p}]);var B=-1;e.each(p,function(e,t){n=t.activeMasksetIndex,g().writeOutBuffer=!0;var i=t.result;if(i!==!1){var s=!1,o=w();i!==!0&&(s=i.refresh,H=i.pos!=undefined?i.pos:H,b=i.c!=undefined?i.c:b);if(s!==!0){if(r.insertMode==1){var u=N(),f=o.slice();while(A(f,u,true)!=P(u)&&u>=H)u=u==0?-1:k(u);if(u>=H){J(H,N(),b);var l=g().lastValidPosition,c=C(l);c!=N()&&l>=H&&A(w(),c,true)!=P(c)&&(g().lastValidPosition=c)}else g().writeOutBuffer=!1}else L(o,H,b,!0);if(B==-1||B>C(H))B=C(H)}else if(!a){var h=H<N()?H+1:H;if(B==-1||B>h)B=h}B>g().p&&(g().p=B)}}),a!==!0&&(n=_,S());if(u!==!1){e.each(p,function(e,t){if(t["activeMasksetIndex"]==n)return y=t,!1});if(y!=undefined){var j=this;setTimeout(function(){r.onKeyValidation.call(j,y.result,r)},0);if(g().writeOutBuffer&&y.result!==!1){var F=w(),I;s?I=undefined:r.numericInput?H>D?I=k(B):b==r.radixPoint?I=B-1:I=k(B-1):I=B,M(l,F,I),s!==!0&&setTimeout(function(){U(F)===!0&&c.trigger("complete"),v=!0,c.trigger("input")},0)}else T&&(g().buffer=g().undoBuffer.split(""))}}r.showTooltip&&c.prop("title",g().mask),i&&(i.preventDefault?i.preventDefault():i.returnValue=!1)}}function Y(t){var n=e(this),i=this,s=t.keyCode,o=w();u&&s==r.keyCode.BACKSPACE&&p==i._valueGet()&&Q.call(this,t),r.onKeyUp.call(this,t,o,r),s==r.keyCode.TAB&&r.showMaskOnFocus&&(n.hasClass("focus.inputmask")&&i._valueGet().length==0?(o=b().slice(),M(i,o),R(i,0),c=w().join("")):(M(i,o),o.join("")==b().join("")&&e.inArray(r.radixPoint,o)!=-1?(R(i,q(0)),n.click()):R(i,q(0),q(N()))))}function Z(t){if(v===!0)return v=!1,!0;var n=this,r=e(n);p=w().join(""),H(n,!1,!1),M(n,w()),U(w())===!0&&r.trigger("complete"),r.click()}function et(s){h=e(s);if(h.is(":input")){h.data("_inputmask",{masksets:t,activeMasksetIndex:n,opts:r,isRTL:!1}),r.showTooltip&&h.prop("title",g().mask),g().greedy=g().greedy?g().greedy:g()["repeat"]==0;if(h.attr("maxLength")!=null){var o=h.prop("maxLength");o>-1&&e.each(t,function(e,t){typeof t=="object"&&t["repeat"]=="*"&&(t.repeat=o)}),N()>=o&&o>-1&&(o<b().length&&(b().length=o),g()["greedy"]==0&&(g().repeat=Math.round(o/b().length)),h.prop("maxLength",N()*2))}X(s),r.numericInput&&(r.isNumeric=r.numericInput),(s.dir=="rtl"||r.numericInput&&r.rightAlignNumerics||r.isNumeric&&r.rightAlignNumerics)&&h.css("text-align","right");if(s.dir=="rtl"||r.numericInput){s.dir="ltr",h.removeAttr("dir");var f=h.data("_inputmask");f.isRTL=!0,h.data("_inputmask",f),l=!0}h.unbind(".inputmask"),h.removeClass("focus.inputmask"),h.closest("form").bind("submit",function(){c!=w().join("")&&h.change()}).bind("reset",function(){setTimeout(function(){h.trigger("setvalue")},0)}),h.bind("mouseenter.inputmask",function(){var t=e(this),n=this;!t.hasClass("focus.inputmask")&&r.showMaskOnHover&&n._valueGet()!=w().join("")&&M(n,w())}).bind("blur.inputmask",function(){var i=e(this),s=this,o=s._valueGet(),u=w();i.removeClass("focus.inputmask"),c!=w().join("")&&i.change(),r.clearMaskOnLostFocus&&o!=""&&(o==b().join("")?s._valueSet(""):F(s)),U(u)===!1&&(i.trigger("incomplete"),r.clearIncomplete&&(e.each(t,function(e,t){typeof t=="object"&&(t.buffer=t._buffer.slice(),t.lastValidPosition=-1)}),n=0,r.clearMaskOnLostFocus?s._valueSet(""):(u=b().slice(),M(s,u))))}).bind("focus.inputmask",function(){var t=e(this),n=this,i=n._valueGet();r.showMaskOnFocus&&!t.hasClass("focus.inputmask")&&(!r.showMaskOnHover||r.showMaskOnHover&&i=="")&&n._valueGet()!=w().join("")&&M(n,w(),C(g().lastValidPosition)),t.addClass("focus.inputmask"),c=w().join("")}).bind("mouseleave.inputmask",function(){var t=e(this),n=this;r.clearMaskOnLostFocus&&!t.hasClass("focus.inputmask")&&n._valueGet()!=t.attr("placeholder")&&(n._valueGet()==b().join("")||n._valueGet()==""?n._valueSet(""):F(n))}).bind("click.inputmask",function(){var t=this;setTimeout(function(){var n=R(t),i=w();if(n.begin==n.end){var s=l?q(n.begin):n.begin,o=g().lastValidPosition,u;r.isNumeric?u=r.skipRadixDance===!1&&r.radixPoint!=""&&e.inArray(r.radixPoint,i)!=-1?r.numericInput?C(e.inArray(r.radixPoint,i)):e.inArray(r.radixPoint,i):C(o):u=C(o),s<u?x(s)?R(t,s):R(t,C(s)):R(t,u)}},0)}).bind("dblclick.inputmask",function(){var e=this;setTimeout(function(){R(e,0,C(g().lastValidPosition))},0)}).bind(a+".inputmask dragdrop.inputmask drop.inputmask",function(t){if(v===!0)return v=!1,!0;var n=this,i=e(n);if(t.type=="propertychange"&&n._valueGet().length<=N())return!0;setTimeout(function(){var e=r.onBeforePaste!=undefined?r.onBeforePaste.call(this,n._valueGet()):n._valueGet();H(n,!0,!1,e.split(""),!0),U(w())===!0&&i.trigger("complete"),i.click()},0)}).bind("setvalue.inputmask",function(){var e=this;H(e,!0),c=w().join(""),e._valueGet()==b().join("")&&e._valueSet("")}).bind("complete.inputmask",r.oncomplete).bind("incomplete.inputmask",r.onincomplete).bind("cleared.inputmask",r.oncleared).bind("keyup.inputmask",Y),u?h.bind("input.inputmask",Z):h.bind("keydown.inputmask",Q).bind("keypress.inputmask",G),i&&h.bind("input.inputmask",Z),H(s,!0,!1),c=w().join("");var p;try{p=document.activeElement}catch(d){}p===s?(h.addClass("focus.inputmask"),R(s,C(g().lastValidPosition))):r.clearMaskOnLostFocus?w().join("")==b().join("")?s._valueSet(""):F(s):M(s,w()),W(s)}}var l=!1,c=w().join(""),h,p,d=!1,v=!1,m=!1;if(f!=undefined)switch(f.action){case"isComplete":return U(f.buffer);case"unmaskedvalue":return l=f.$input.data("_inputmask").isRTL,I(f.$input,f.skipDatepickerCheck);case"mask":et(f.el);break;case"format":return h=e({}),h.data("_inputmask",{masksets:t,activeMasksetIndex:n,opts:r,isRTL:r.numericInput}),r.numericInput&&(r.isNumeric=r.numericInput,l=!0),H(h,!1,!1,f.value.split(""),!0),w().join("")}}e.inputmask={defaults:{placeholder:"_",optionalmarker:{start:"[",end:"]"},quantifiermarker:{start:"{",end:"}"},groupmarker:{start:"(",end:")"},escapeChar:"\\",mask:null,oncomplete:e.noop,onincomplete:e.noop,oncleared:e.noop,repeat:0,greedy:!0,autoUnmask:!1,clearMaskOnLostFocus:!0,insertMode:!0,clearIncomplete:!1,aliases:{},onKeyUp:e.noop,onKeyDown:e.noop,onBeforePaste:undefined,onUnMask:undefined,showMaskOnFocus:!0,showMaskOnHover:!0,onKeyValidation:e.noop,skipOptionalPartCharacter:" ",showTooltip:!1,numericInput:!1,isNumeric:!1,radixPoint:"",skipRadixDance:!1,rightAlignNumerics:!0,definitions:{9:{validator:"[0-9]",cardinality:1},a:{validator:"[A-Za-zА-яЁё]",cardinality:1},"*":{validator:"[A-Za-zА-яЁё0-9]",cardinality:1}},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91},ignorables:[8,9,13,19,27,33,34,35,36,37,38,39,40,45,46,93,112,113,114,115,116,117,118,119,120,121,122,123],getMaskLength:function(e,t,n,r,i){var s=e.length;return t||(n=="*"?s=r.length+1:n>1&&(s+=e.length*(n-1))),s}},escapeRegex:function(e){var t=["/",".","*","+","?","|","(",")","[","]","{","}","\\"];return e.replace(new RegExp("(\\"+t.join("|\\")+")","gim"),"\\$1")},format:function(t,i){var s=e.extend(!0,{},e.inputmask.defaults,i);return n(s.alias,i,s),f(r(s),0,s,{action:"format",value:t})}},e.fn.inputmask=function(t,i){var s=e.extend(!0,{},e.inputmask.defaults,i),o,u=0;if(typeof t=="string")switch(t){case"mask":n(s.alias,i,s),o=r(s);if(o.length==0)return this;return this.each(function(){f(e.extend(!0,{},o),0,s,{action:"mask",el:this})});case"unmaskedvalue":var a=e(this),l=this;return a.data("_inputmask")?(o=a.data("_inputmask").masksets,u=a.data("_inputmask").activeMasksetIndex,s=a.data("_inputmask").opts,f(o,u,s,{action:"unmaskedvalue",$input:a})):a.val();case"remove":return this.each(function(){var t=e(this),n=this;if(t.data("_inputmask")){o=t.data("_inputmask").masksets,u=t.data("_inputmask").activeMasksetIndex,s=t.data("_inputmask").opts,n._valueSet(f(o,u,s,{action:"unmaskedvalue",$input:t,skipDatepickerCheck:!0})),t.removeData("_inputmask"),t.unbind(".inputmask"),t.removeClass("focus.inputmask");var r;Object.getOwnPropertyDescriptor&&(r=Object.getOwnPropertyDescriptor(n,"value")),r&&r.get?n._valueGet&&Object.defineProperty(n,"value",{get:n._valueGet,set:n._valueSet}):document.__lookupGetter__&&n.__lookupGetter__("value")&&n._valueGet&&(n.__defineGetter__("value",n._valueGet),n.__defineSetter__("value",n._valueSet));try{delete n._valueGet,delete n._valueSet}catch(i){n._valueGet=undefined,n._valueSet=undefined}}});case"getemptymask":return this.data("_inputmask")?(o=this.data("_inputmask").masksets,u=this.data("_inputmask").activeMasksetIndex,o[u]._buffer.join("")):"";case"hasMaskedValue":return this.data("_inputmask")?!this.data("_inputmask").opts.autoUnmask:!1;case"isComplete":return o=this.data("_inputmask").masksets,u=this.data("_inputmask").activeMasksetIndex,s=this.data("_inputmask").opts,f(o,u,s,{action:"isComplete",buffer:this[0]._valueGet().split("")});case"getmetadata":return this.data("_inputmask")?(o=this.data("_inputmask").masksets,u=this.data("_inputmask").activeMasksetIndex,o[u].metadata):undefined;default:n(t,i,s)||(s.mask=t),o=r(s);if(o.length==0)return this;return this.each(function(){f(e.extend(!0,{},o),u,s,{action:"mask",el:this})})}else{if(typeof t=="object")return s=e.extend(!0,{},e.inputmask.defaults,t),n(s.alias,t,s),o=r(s),o.length==0?this:this.each(function(){f(e.extend(!0,{},o),u,s,{action:"mask",el:this})});if(t==undefined)return this.each(function(){var t=e(this).attr("data-inputmask");if(t&&t!="")try{t=t.replace(new RegExp("'","g"),'"');var r=e.parseJSON("{"+t+"}");e.extend(!0,r,i),s=e.extend(!0,{},e.inputmask.defaults,r),n(s.alias,r,s),s.alias=undefined,e(this).inputmask(s)}catch(o){}})}}}})(jQuery);